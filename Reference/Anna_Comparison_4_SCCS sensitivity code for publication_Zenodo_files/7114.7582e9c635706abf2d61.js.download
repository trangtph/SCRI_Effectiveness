(self.webpackChunkinvenio_assets=self.webpackChunkinvenio_assets||[]).push([[7114],{8306:(e,t,r)=>{"use strict";r.d(t,{TV:()=>F,D0:()=>d,qB:()=>O,MQ:()=>S,yv:()=>y,vE:()=>R});var n=r(58156),i=r.n(n),a=(r(2404),r(23029)),o=r(92901),l=r(63560),s=r.n(l),c=r(88055),u=r.n(c),d=function(){return(0,o.A)(function e(t){var r=t.fieldpath,n=t.deserializedDefault,i=void 0===n?null:n,o=t.serializedDefault,l=void 0===o?null:o,s=t.allowEmpty,c=void 0!==s&&s;(0,a.A)(this,e),this.fieldpath=r,this.deserializedDefault=i,this.serializedDefault=l,this.allowEmpty=c},[{key:"deserialize",value:function(e){var t=i()(e,this.fieldpath,this.deserializedDefault);return null!==t?s()(u()(e),this.fieldpath,t):e}},{key:"serialize",value:function(e){var t=i()(e,this.fieldpath,this.serializedDefault);return null!==t?s()(u()(e),this.fieldpath,t):e}}])}();var p=r(56822),f=r(53954),m=r(85501),h=r(44383),v=r.n(h);function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}var y=function(e){function t(e){var r,n,i,o,l=e.fieldpath,s=e.schema,c=e.deserializedDefault,u=void 0===c?[]:c,d=e.serializedDefault,m=void 0===d?[]:d;return(0,a.A)(this,t),n=this,i=t,o=[{fieldpath:l,deserializedDefault:u,serializedDefault:m}],i=(0,f.A)(i),(r=(0,p.A)(n,b()?Reflect.construct(i,o||[],(0,f.A)(n).constructor):i.apply(n,o))).schema=s,r.schemaKeys=Object.keys(r.schema),r}return(0,m.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var r=this,n=i()(e,this.fieldpath,this.deserializedDefault).map(function(e,n){var i=v()(e,r.schemaKeys);return r.schemaKeys.forEach(function(e){i=r.schema[e].deserialize(i,t)}),i.__key=n,i});return s()(u()(e),this.fieldpath,n)}},{key:"serialize",value:function(e,t){var r=this,n=i()(e,this.fieldpath,this.serializedDefault),a=null===n||void 0===n?void 0:n.map(function(e){var n=v()(e,r.schemaKeys);return r.schemaKeys.forEach(function(e){n=r.schema[e].serialize(n,t)}),n});return null!==a?s()(u()(e),this.fieldpath,a):a}}])}(d),g=r(64467);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,g.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}var R=function(e){function t(e){var r,n,i,o,l=e.fieldpath,s=e.deserializedDefault,c=void 0===s?null:s,u=e.serializedDefault,d=void 0===u?null:u,m=e.labelField,h=void 0===m?"name":m;return(0,a.A)(this,t),n=this,i=t,o=[{fieldpath:l,deserializedDefault:c,serializedDefault:d}],i=(0,f.A)(i),(r=(0,p.A)(n,w()?Reflect.construct(i,o||[],(0,f.A)(n).constructor):i.apply(n,o))).labelField=h,r}return(0,m.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e){var t=function(e){if(null!==e&&void 0!==e&&e.id)return e.id},r=i()(e,this.fieldpath,this.deserializedDefault),n=null;return null!==r&&(n=Array.isArray(r)?r.map(t):t(r)),s()(u()(e),this.fieldpath,n||r)}},{key:"serialize",value:function(e){var t=this,r=function(e){return"string"===typeof e?{id:e}:E(E({},e.id?{id:e.id}:{}),e[t.labelField]&&(0,g.A)({},t.labelField,e[t.labelField]))},n=i()(e,this.fieldpath,this.serializedDefault),a=null;return null!==n&&(a=Array.isArray(n)?n.map(r):r(n)),s()(u()(e),this.fieldpath,a||n)}}])}(d);function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(P=function(){return!!e})()}var O=function(e){function t(e){var r,n,i,o=e.fieldpath,l=e.deserializedDefault,s=void 0===l?null:l,c=e.serializedDefault,u=void 0===c?null:c;return(0,a.A)(this,t),r=this,n=t,i=[{fieldpath:o,deserializedDefault:s,serializedDefault:u}],n=(0,f.A)(n),(0,p.A)(r,P()?Reflect.construct(n,i||[],(0,f.A)(r).constructor):n.apply(r,i))}return(0,m.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var r=function(e){var r=u()(e);if(null!==e&&void 0!==e&&e.title&&(r.title=e.title[t]),e.identifiers){["url"].forEach(function(t){var n=null;e.identifiers.forEach(function(e){e.scheme===t&&(n=e.identifier)}),n&&(r[t]=n)}),delete r.identifiers}return r},n=i()(e,this.fieldpath,this.deserializedDefault),a=null;return null!==n&&(a=Array.isArray(n)?n.map(r):r(n)),s()(u()(e),this.fieldpath,a||n)}},{key:"serialize",value:function(e,t){var r=function(e){if(e.id)return{id:e.id};var r=u()(e);return e.title&&(r.title=(0,g.A)({},t,e.title)),e.url&&(r.identifiers=[{identifier:e.url,scheme:"url"}],delete r.url),r},n=i()(e,this.fieldpath,this.serializedDefault),a=null;return null!==n&&(a=Array.isArray(n)?n.map(r):r(n)),s()(u()(e),this.fieldpath,a||n)}}])}(d);function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(C=function(){return!!e})()}var S=function(e){function t(e){var r,n,i,o,l=e.fieldpath,s=e.deserializedDefault,c=void 0===s?null:s,u=e.serializedDefault,d=void 0===u?null:u,m=e.localeFields,h=void 0===m?[]:m;return(0,a.A)(this,t),n=this,i=t,o=[{fieldpath:l,deserializedDefault:c,serializedDefault:d}],i=(0,f.A)(i),(r=(0,p.A)(n,C()?Reflect.construct(i,o||[],(0,f.A)(n).constructor):i.apply(n,o))).localeFields=h,r}return(0,m.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e,t){var r=this,n=i()(e,this.fieldpath,this.deserializedDefault),a=function(e){if("id"in e)return"string"===typeof e.title?e:{id:e.id};var n=u()(e);return r.localeFields.forEach(function(r){e[r]&&(n[r]=e[r][t])}),n},o=null;return null!==n&&(o=Array.isArray(n)?n.map(a):a(n)),s()(u()(e),this.fieldpath,o||n)}},{key:"serialize",value:function(e,t){var r=this,n=i()(e,this.fieldpath,this.serializedDefault),a=null,o=function(e){var n=u()(e);return"id"in e&&null!=e.id?{id:e.id}:(r.localeFields.forEach(function(r){r in e&&(n[r]=(0,g.A)({},t,e[r]))}),n)};return null!==n&&(a=Array.isArray(n)?n.map(o):o(n)),s()(u()(e),this.fieldpath,a||n)}}])}(R);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,g.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}var F=function(e){function t(){return(0,a.A)(this,t),e=this,r=t,n=arguments,r=(0,f.A)(r),(0,p.A)(e,I()?Reflect.construct(r,n||[],(0,f.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,m.A)(t,e),(0,o.A)(t,[{key:"deserialize",value:function(e){var t=this,r=i()(e,this.fieldpath,this.deserializedDefault),n=function(e){return D(D({},e.id?{id:e.id}:{}),{},(0,g.A)({},t.labelField,e[t.labelField]))},a=null;return null!==r&&(a=Array.isArray(r)?r.map(n):n(r)),s()(u()(e),this.fieldpath,a||r)}}])}(R)},30319:(e,t,r)=>{"use strict";r.d(t,{t:()=>y});var n=r(64467),i=r(23029),a=r(92901),o=r(56822),l=r(53954),s=r(85501),c=r(96540),u=r(5556),d=r.n(u),p=r(53196),f=r(65002),m=r(81057);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}var b=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,v()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.required,a=e.disabled,o=e.helpText,l=e.placeholder,s=e.optimized;return c.createElement(p.default,{id:"InvenioRdmRecords.DepositForm.CopyrightsField.Container",label:r,labelIcon:n,required:i,disabled:a,helpText:o,placeholder:l,optimized:s},c.createElement(m.TextField,{fieldPath:t,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),required:i,disabled:a,helpText:o,placeholder:l,optimized:s}))}}])}(c.Component);b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({optimized:d().bool},m.fieldCommonProps),b.defaultProps={label:f.M.t("Copyright"),labelIcon:"copyright outline",required:!1,helpText:f.M.t("A copyright statement describing the ownership of the uploaded resource."),placeholder:f.M.t("Copyright (C) {{currentYear}} The Authors.",{currentYear:(new Date).getFullYear()}),optimized:!0};var y=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.CopyrightsField",b)},37114:(e,t,r)=>{"use strict";r.d(t,{Re:()=>Q,D:()=>Rs,qE:()=>bo,En:()=>ho,Y4:()=>Ze,Kp:()=>pt,et:()=>ao,k6:()=>bs,KI:()=>As,q1:()=>de,l0:()=>Nr,yY:()=>Jo,l4:()=>Wr,Km:()=>re,g7:()=>pi,z4:()=>Rr,EM:()=>jn,PI:()=>co,Hq:()=>vi,IZ:()=>qo,nH:()=>Ai,bT:()=>Oi,CP:()=>_i,n:()=>xi,fB:()=>Uo,GC:()=>Bi,Kd:()=>Io,y5:()=>Xi,Fk:()=>Ha,Je:()=>ea,n2:()=>Ps});var n=r(58168),i=r(23029),a=r(92901),o=r(56822),l=r(53954),s=r(85501),c=r(96540),u=r(61225),d=r(5556),p=r.n(d),f=r(17684),m=r(81057),h=r(83794),v=r(80501),b=r(36713),y=r(27041),g=r(65002),A=r(64467),E=r(93682),w=r(76217),R=r(3487);function P(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,O()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}var C=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=P(this,t,[].concat(n)),(0,A.A)(e,"handlePublicButtonClick",function(){var t=e.props,r=t.formik,n=t.fieldPath;r.form.setFieldValue(n,"public"),r.form.setFieldValue("access.embargo",{active:!1})}),(0,A.A)(e,"handleRestrictionButtonClick",function(){var t=e.props,r=t.formik,n=t.fieldPath;r.form.setFieldValue(n,"restricted")}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.formik,r=e.disabled,n=e.fieldPath;r&&t.form.setFieldValue(n,"restricted")}},{key:"render",value:function(){var e=this.props,t=e.active,r=e.disabled,n=e.canRestrictRecord,i=t?"positive":"",a=t?"":"negative";return c.createElement(c.Fragment,null,!n&&c.createElement(E.A,{trigger:c.createElement(w.A,{className:"right-floated",name:"question circle outline"}),content:g.M.t("Record visibility can not be changed to restricted anymore. Please contact support if you still need to make these changes.")}),c.createElement(R.A.Group,{widths:"2"},c.createElement(R.A,{className:i,"data-testid":"protection-buttons-component-public",disabled:r,onClick:this.handlePublicButtonClick,active:t},g.M.t("Public")),c.createElement(R.A,{disabled:!n,className:a,"data-testid":"protection-buttons-component-restricted",active:!t,onClick:this.handleRestrictionButtonClick},g.M.t("Restricted"))))}}])}(c.Component);C.propTypes={canRestrictRecord:p().bool,fieldPath:p().string.isRequired,formik:p().object.isRequired,active:p().bool,disabled:p().bool},C.defaultProps={active:!0,disabled:!1,canRestrictRecord:!0};var S=function(e){function t(){return(0,i.A)(this,t),P(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return c.createElement(f.FastField,{name:t,component:function(t){return c.createElement(C,(0,n.A)({formik:t},e.props))}})}}])}(c.Component);S.defaultProps={canRestrictRecord:!0},S.propTypes={canRestrictRecord:p().bool,fieldPath:p().string.isRequired};var k=r(53196),D=r(91272),I=function(e){var t=e.recordAccess,r=e.communityAccess,i=e.record,a=e.recordRestrictionGracePeriod,o=e.allowRecordRestriction,l="public"===t,s="public"===r;return c.createElement(k.default,(0,n.A)({id:"ReactInvenioDeposit.MetadataAccess.layout"},e),c.createElement(c.Fragment,null,g.M.t("Full record"),c.createElement(S,{canRestrictRecord:function(){var e;return!(!o&&null!==i&&void 0!==i&&i.created&&"restricted"!==(null===i||void 0===i||null===(e=i.access)||void 0===e?void 0:e.record)&&i.is_published)||!(D.DateTime.fromISO(i.created).plus({days:a})<D.DateTime.now())}(),record:i,active:l&&s,disabled:!s,fieldPath:"access.record"})))};I.propTypes={recordAccess:p().string.isRequired,communityAccess:p().string.isRequired,record:p().object.isRequired,recordRestrictionGracePeriod:p().number.isRequired,allowRecordRestriction:p().bool.isRequired};var F=function(e){var t=e.access,r=e.accessCommunity,n=e.metadataOnly,i="public"===t.files,a="public"===t.record,o="public"===r,l=!o||!a,s=o&&!i&&a,u=!n&&o&&a;return n?c.createElement(h.A.Meta,{"data-testid":"access-files"},c.createElement("em",null,g.M.t("The record has no files."))):c.createElement("div",{"data-testid":"access-files"},u&&c.createElement(c.Fragment,null,g.M.t("Files only"),c.createElement(S,{active:i,disable:!o,fieldPath:"access.files"})),l&&c.createElement(h.A.Description,null,c.createElement("em",null,g.M.t("The full record is restricted."))),s&&c.createElement(h.A.Description,null,c.createElement("em",null,g.M.t("The files of this record are restricted."))))};F.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},F.defaultProps={metadataOnly:!1};var x=r(62193),M=r.n(x),j=r(27859),T=r(50363);function _(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,z()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(z=function(){return!!e})()}var q=function(e){function t(){return(0,i.A)(this,t),_(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.formik,n=e.checked,i=e.disabled;return c.createElement(T.A,{id:t,"data-testid":"embargo-checkbox-component",disabled:i,checked:n,onChange:function(){r.field.value?r.form.setFieldValue("access.embargo",{active:!1}):r.form.setFieldValue(t,!0)}})}}])}(c.Component);q.propTypes={fieldPath:p().string.isRequired,formik:p().object.isRequired,checked:p().bool,disabled:p().bool},q.defaultProps={checked:!1,disabled:!0};var L=function(e){function t(){return(0,i.A)(this,t),_(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.disabled,i=t.fieldPath,a=r?{change:!0}:{};return c.createElement(f.FastField,(0,n.A)({name:i,component:function(t){return c.createElement(q,(0,n.A)({formik:t},e.props))}},a))}}])}(c.Component);function N(e){var t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.placeholder,a=e.required,o=e.helpText;return c.createElement(m.TextField,{fieldPath:t,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),placeholder:i,required:a,helpText:o})}L.propTypes={disabled:p().bool,fieldPath:p().string.isRequired},L.defaultProps={disabled:!1},N.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string,placeholder:p().string,required:p().bool,helpText:p().string},N.defaultProps={required:!1,labelIcon:"calendar",placeholder:g.M.t("YYYY-MM-DD"),label:g.M.t("Embargo until"),helpText:"".concat(g.M.t("Format"),": ").concat(g.M.t("YYYY-MM-DD"))};var B=function(e){var t,r,n,i=e.access,a=e.accessCommunity,o=e.metadataOnly,l="public"===i.record,s="public"===i.files,u="public"===a,d=!o&&!s,p=(null===(t=i.embargo)||void 0===t?void 0:t.active)||!1,f=null===(r=i.embargo)||void 0===r?void 0:r.until,h=null===(n=i.embargo)||void 0===n?void 0:n.reason,v=!p&&!M()(f),y=u&&(!l||d),A=f?D.DateTime.fromISO(f).setLocale(g.M.language).toLocaleString(D.DateTime.DATE_FULL):"???";return c.createElement(j.A,null,c.createElement(j.A.Item,{disabled:!y,"data-testid":"option-list-embargo"},c.createElement(j.A.Icon,{"aria-hidden":"false"},c.createElement(L,{fieldPath:"access.embargo.active",checked:p,disabled:!y})),c.createElement(j.A.Content,null,c.createElement(j.A.Header,{as:"label",htmlFor:"access.embargo.active"},g.M.t("Apply an embargo")," ",c.createElement(w.A,{name:"clock outline"})),c.createElement(j.A.Description,null,c.createElement(c.Fragment,null,g.M.t("Record or files protection must be")," ",c.createElement("b",null,g.M.t("restricted"))," ",g.M.t("to apply an embargo."))),p&&c.createElement(c.Fragment,null,c.createElement(b.A,{hidden:!0,className:"rel-mb-1"}),c.createElement(N,{fieldPath:"access.embargo.until",required:!0}),c.createElement(m.TextAreaField,{label:g.M.t("Embargo reason"),fieldPath:"access.embargo.reason",placeholder:g.M.t("Optionally, describe the reason for the embargo."),optimized:"true"})),v&&c.createElement(c.Fragment,null,c.createElement(b.A,{hidden:!0}),c.createElement("p",null,g.M.t("Embargo was lifted on {{fmtDate}}.",{fmtDate:A})),h&&c.createElement("p",null,c.createElement("b",null,g.M.t("Reason")),": ",h,".")))))};B.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},B.defaultProps={metadataOnly:!1};var U=r(87395),V=function(e){var t,r,n=e.access,i=e.metadataOnly,a=e.accessCommunity,o="public"===n.record,l="public"===n.files,s="public"===a,u=(null===(t=n.embargo)||void 0===t?void 0:t.active)||!1,d=!s||!o&&!u,p=s&&o&&(i||l),f=u&&!l&&o,m=!u&&!l&&o,h=!o&&u,v=null!==(r=n.embargo)&&void 0!==r&&r.until?D.DateTime.fromISO(n.embargo.until).setLocale(g.M.language).toLocaleString(D.DateTime.DATE_FULL):"???";return p?c.createElement(U.A,{icon:!0,positive:!0,visible:!0,"data-testid":"access-message"},c.createElement(w.A,{name:"lock open"}),c.createElement(U.A.Content,null,c.createElement(U.A.Header,null,g.M.t("Public")),i?g.M.t("The record is publicly accessible."):g.M.t("The record and files are publicly accessible."))):h?c.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},c.createElement(w.A,{name:"lock"}),c.createElement(U.A.Content,null,c.createElement(U.A.Header,null,g.M.t("Embargoed (full record)")),c.createElement(c.Fragment,null,g.M.t("On")," ",c.createElement("b",null,v)," ",g.M.t("the record will automatically be made publicly accessible. Until then, the record can")," ",c.createElement("b",null,g.M.t("only"))," ",g.M.t("be accessed by")," ",c.createElement("b",null,g.M.t("users specified"))," ",g.M.t("in the permissions.")))):d?c.createElement(U.A,{icon:!0,negative:!0,visible:!0,"data-testid":"access-message"},c.createElement(w.A,{name:"lock"}),c.createElement(U.A.Content,null,c.createElement(U.A.Header,null,g.M.t("Restricted")),c.createElement(c.Fragment,null,g.M.t("The record can")," ",c.createElement("b",null,g.M.t("only"))," ",g.M.t("be accessed by")," ",c.createElement("b",null,g.M.t("users specified"))," ",g.M.t("in the permissions.")))):m?c.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},c.createElement(w.A,{name:"lock"}),c.createElement(U.A.Content,null,c.createElement(U.A.Header,null,g.M.t("Public with restricted files")),c.createElement(c.Fragment,null,g.M.t("The record is publicly accessible. The files can")," ",c.createElement("b",null,g.M.t("only"))," ",g.M.t("be accessed by")," ",c.createElement("b",null,g.M.t("users specified"))," ",g.M.t("in the permissions.")))):f?c.createElement(U.A,{icon:!0,warning:!0,visible:!0,"data-testid":"access-message"},c.createElement(w.A,{name:"lock"}),c.createElement(U.A.Content,null,c.createElement(U.A.Header,null,g.M.t("Embargoed (files-only)")),c.createElement(c.Fragment,null,g.M.t("The record is publicly accessible. On")," ",c.createElement("b",null,v)," ",g.M.t("the files will automatically be made publicly accessible. Until then, the files can")," ",c.createElement("b",null,g.M.t("only"))," ",g.M.t("be accessed by")," ",c.createElement("b",null,g.M.t("users specified"))," ",g.M.t("in the permissions.")))):void 0};function H(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,W()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(W=function(){return!!e})()}V.propTypes={access:p().object.isRequired,metadataOnly:p().bool,accessCommunity:p().string.isRequired},V.defaultProps={metadataOnly:!1};var Y=function(e){function t(){return(0,i.A)(this,t),H(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.id,r=e.fieldPath,n=e.formik,i=e.label,a=e.labelIcon,o=e.showMetadataAccess,l=e.community,s=e.record,u=e.recordRestrictionGracePeriod,d=e.allowRecordRestriction,p=!0===(null===l||void 0===l?void 0:l.is_ghost),f=l&&!p&&l.access.visibility||"public",A=!n.form.values.files.enabled;return c.createElement(h.A,{label:i,id:t,className:"access-right"},c.createElement(v.A.Field,{required:!0},c.createElement(h.A.Content,null,c.createElement(h.A.Header,null,c.createElement(m.FieldLabel,{htmlFor:r,icon:a,label:i}))),c.createElement(h.A.Content,null,o&&c.createElement(c.Fragment,null,c.createElement(I,{recordAccess:n.field.value.record,communityAccess:f,record:s,recordRestrictionGracePeriod:u,allowRecordRestriction:d}),c.createElement(b.A,{hidden:!0})),c.createElement(F,{access:n.field.value,accessCommunity:f,metadataOnly:A}),c.createElement(b.A,{hidden:!0}),c.createElement(V,{access:n.field.value,accessCommunity:f,metadataOnly:A}),c.createElement(b.A,{hidden:!0})),c.createElement(h.A.Content,null,c.createElement(h.A.Header,{as:y.A,size:"tiny"},g.M.t("Options"))),c.createElement(h.A.Content,{extra:!0},c.createElement(B,{access:n.field.value,accessCommunity:f,metadataOnly:A}))))}}])}(c.Component);Y.propTypes={id:p().string,fieldPath:p().string.isRequired,formik:p().object.isRequired,label:p().string.isRequired,labelIcon:p().string.isRequired,showMetadataAccess:p().bool,community:p().object,record:p().object.isRequired,recordRestrictionGracePeriod:p().number.isRequired,allowRecordRestriction:p().bool.isRequired},Y.defaultProps={showMetadataAccess:!0,community:void 0};var G=(0,u.connect)(function(e){return{community:e.deposit.editorState.selectedCommunity}},null)(Y),Q=function(e){function t(){return(0,i.A)(this,t),H(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return c.createElement(f.Field,{name:t},function(t){return c.createElement(G,(0,n.A)({formik:t},e.props))})}}])}(c.Component);Q.propTypes={fieldPath:p().string.isRequired,label:p().string.isRequired,labelIcon:p().string,isMetadataOnly:p().bool,record:p().object.isRequired,recordRestrictionGracePeriod:p().number.isRequired,allowRecordRestriction:p().bool.isRequired},Q.defaultProps={labelIcon:void 0,isMetadataOnly:void 0};var K=r(1489),X={lang:"",description:"",type:""},Z=r(80045),J=["fieldPath","label","labelIcon","multiple","placeholder","clearable","initialOptions","serializeSuggestions","required","disabled","helpText","noQueryMessage"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ee()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,i=e.labelIcon,a=e.multiple,o=e.placeholder,l=e.clearable,s=e.initialOptions,u=e.serializeSuggestions,d=e.required,p=e.disabled,f=e.helpText,h=e.noQueryMessage,v=(0,Z.A)(e,J),b=u||null;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.LanguagesField.Input",fieldPath:t,placeholder:o,required:d,disabled:p,clearable:l,multiple:a,initialSuggestions:s,labelIcon:i,label:r,helpText:f,noQueryMessage:h},c.createElement(m.RemoteSelectField,(0,n.A)({fieldPath:t,suggestionAPIUrl:"/api/vocabularies/languages",suggestionAPIHeaders:{Accept:"application/vnd.inveniordm.v1+json"},placeholder:o,helpText:f,required:d,disabled:p,clearable:l,multiple:a,initialSuggestions:s,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:i,label:r}),noQueryMessage:h},b&&{serializeSuggestions:b},v)))}}])}(c.Component);te.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({fieldPath:p().string.isRequired,multiple:p().bool,clearable:p().bool,placeholder:p().string,noQueryMessage:p().string,initialOptions:p().arrayOf(p().shape({key:p().string,value:p().string,text:p().string})),serializeSuggestions:p().func},m.fieldCommonProps),te.defaultProps={label:g.M.t("Languages"),labelIcon:"globe",multiple:!0,clearable:!0,placeholder:g.M.t('Search for a language by name (e.g "eng", "fr" or "Polish")'),noQueryMessage:g.M.t("Search for languages..."),required:!1,initialOptions:void 0,serializeSuggestions:void 0};var re=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.LanguagesField",te);function ne(e){return e.sort(function(e,t){return e.text.localeCompare(t.text)})}function ie(){window.scrollTo({top:0,left:0,behavior:"smooth"})}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ae=function(){return!!e})()}var oe=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ae()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.options,n=e.recordUI,i=e.editorConfig,a=e.optimized,o=ne(r.type);return c.createElement(m.ArrayField,{addButtonLabel:g.M.t("Add description"),defaultNewValue:X,fieldPath:t,className:"additional-descriptions"},function(e){var r,l=e.arrayHelpers,s=e.indexPath,u="".concat(t,".").concat(s);return c.createElement(K.A,{className:"description"},c.createElement(K.A.Row,null,c.createElement(K.A.Column,{mobile:16,tablet:10,computer:12},c.createElement(m.RichInputField,{fieldPath:"".concat(u,".description"),label:g.M.t("Additional Description"),editorConfig:i,optimized:a,required:!0})),c.createElement(K.A.Column,{mobile:16,tablet:6,computer:4},c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",floated:"right",icon:!0,onClick:function(){return l.remove(s)}},c.createElement(w.A,{name:"close"}))),c.createElement(m.SelectField,{fieldPath:"".concat(u,".type"),label:g.M.t("Type"),options:o,required:!0,optimized:a}),c.createElement(re,{serializeSuggestions:function(e){return e.map(function(e){return{text:e.title_l10n,value:e.id,fieldPathPrefix:e.id}})},initialOptions:(null===n||void 0===n?void 0:n.additional_descriptions)&&(null!==(r=n.additional_descriptions[s])&&void 0!==r&&r.lang?[n.additional_descriptions[s].lang]:[]),fieldPath:"".concat(u,".lang"),label:g.M.t("Language"),multiple:!1,placeholder:g.M.t("Select language"),labelIcon:"",clearable:!0,selectOnBlur:!1}))))})}}])}(c.Component);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ce=function(){return!!e})()}oe.propTypes={fieldPath:p().string.isRequired,options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,recordUI:p().object,editorConfig:p().object,optimized:p().bool},oe.defaultProps={recordUI:{},editorConfig:void 0,optimized:!0};var ue=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ce()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.options,a=e.editorConfig,o=e.recordUI,l=e.disabled,s=e.required,u=e.placeholder,d=e.optimized,p=e.helpText,f=se({placeholder:u},a);return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DescriptionsField.Container",fieldPath:t,editorConfig:f,htmlFor:t,icon:n,label:r,recordUI:o,options:i,disabled:l,required:s,optimized:d,helpText:p},c.createElement(c.Fragment,null,c.createElement(m.RichInputField,{className:"description-field rel-mb-1 rel-mt-2",fieldPath:t,editorConfig:f,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),optimized:d,disabled:l,required:s,helpText:p}),c.createElement(oe,{recordUI:o,options:i,editorConfig:f,optimized:d,fieldPath:"metadata.additional_descriptions"})))}}])}(c.Component);ue.propTypes=se({editorConfig:p().object,recordUI:p().object,options:p().object.isRequired,optimized:p().bool},m.fieldCommonProps),ue.defaultProps={label:g.M.t("Description"),labelIcon:"pencil",editorConfig:void 0,recordUI:void 0,optimized:!0};var de=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.DescriptionsField",ue),pe=(r(30319),r(82284)),fe=r(58156),me=r.n(fe),he=r(8909),ve=r(79551),be=r(80296),ye=r(7309),ge=r.n(ye),Ae=r(55378),Ee=r.n(Ae),we=r(48423),Re=r(15941);function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pe=function(){return!!e})()}var Oe=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Pe()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.selectRef;return c.createElement(f.Field,{name:t},function(e){var n=e.form.values;return c.createElement(m.RemoteSelectField,{fieldPath:t,suggestionAPIUrl:"/api/affiliations",suggestionAPIHeaders:{Accept:"application/vnd.inveniordm.v1+json"},initialSuggestions:(0,f.getIn)(n,t,[]),serializeSuggestions:function(e){return(0,m.AffiliationsSuggestions)(e,!0)},placeholder:g.M.t("Search or create affiliation"),label:c.createElement(m.FieldLabel,{htmlFor:"".concat(t,".name"),label:g.M.t("Affiliations")}),noQueryMessage:g.M.t("Search for affiliations.."),allowAdditions:!0,clearable:!0,multiple:!0,onValueChange:function(e,r){e.formikProps.form.setFieldValue(t,r)},value:(0,f.getIn)(n,t,[]).map(function(e){var t,r=e.id,n=e.name,i=e.text;return null!==(t=null!==r&&void 0!==r?r:n)&&void 0!==t?t:i}),ref:r,search:function(e){return e}})})}}])}(c.Component);Oe.propTypes={fieldPath:p().string.isRequired,selectRef:p().object},Oe.defaultProps={selectRef:void 0};var Ce=r(45458),Se=r(99786),ke=r.n(Se);function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(De=function(){return!!e})()}var Ie=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,De()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"handleIdentifierAddition",function(e,t){var n=t.value;r.setState(function(e){return{selectedOptions:ke()([{text:n,value:n,key:n}].concat((0,Ce.A)(e.selectedOptions)),"value")}})}),(0,A.A)(r,"valuesToOptions",function(e){return e.map(function(e){return{text:e,value:e,key:e}})}),(0,A.A)(r,"handleChange",function(e){var t=e.data,n=e.formikProps,i=r.props.fieldPath;r.setState({selectedOptions:r.valuesToOptions(t.value)}),n.form.setFieldValue(i,t.value)}),r.state={selectedOptions:e.initialOptions},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.placeholder,i=this.state.selectedOptions;return c.createElement(m.SelectField,{fieldPath:t,label:r,options:i,placeholder:n,noResultsMessage:g.M.t("Type the value of an identifier..."),search:!0,multiple:!0,selection:!0,allowAdditions:!0,onChange:this.handleChange,icon:null,onAddItem:this.handleIdentifierAddition,optimized:!0})}}])}(c.Component);Ie.propTypes={initialOptions:p().arrayOf(p().shape({key:p().string.isRequired,text:p().string.isRequired,value:p().string.isRequired})).isRequired,fieldPath:p().string.isRequired,label:p().string,placeholder:p().string},Ie.defaultProps={label:g.M.t("Identifiers"),placeholder:g.M.t("e.g. ORCID, ISNI or GND.")};var Fe="personal",xe="organizational";function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Te=function(){return!!e})()}var _e="add",ze="search_only",qe="off",Le=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Te()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"CreatorSchema",Re.Ik({person_or_org:Re.Ik({type:Re.Yj(),family_name:Re.Yj().when("type",function(e,t){if(e===Fe&&r.isCreator())return t.required(g.M.t("Family name is a required field."))}),name:Re.Yj().when("type",function(e,t){if(e===xe&&r.isCreator())return t.required(g.M.t("Name is a required field."))})}),role:Re.Yj().when("_",function(e,t){if(!r.isCreator())return t.required(g.M.t("Role is a required field."))})})),(0,A.A)(r,"openModal",function(){r.setState({open:!0,action:null},function(){var e=r.props.initialCreatibutor;M()(e)||(r.state.isOrganization?(e.person_or_org.family_name="",e.person_or_org.given_name=""):e.person_or_org.name="",r.initStatesFromInitialCreatibutor(e))})}),(0,A.A)(r,"closeModal",function(){r.setState({personAffiliations:[],personIdentifiers:[],organizationAffiliations:[],organizationIdentifiers:[],open:!1,action:null})}),(0,A.A)(r,"changeContent",function(){r.setState({saveAndContinueLabel:g.M.t("Added")}),setTimeout(function(){r.setState({saveAndContinueLabel:g.M.t("Save and add another")})},2e3)}),(0,A.A)(r,"displayActionLabel",function(){var e=r.props,t=e.action,n=e.addLabel,i=e.editLabel;return t===_e?n:i}),(0,A.A)(r,"serializeCreatibutor",function(e){var t=r.state.personIdentifiers,n=r.props,i=n.initialCreatibutor,a=n.serializeCreatibutor;if(a)return a(e,i);var o="person_or_org.identifiers",l=me()(i,o,[]),s=me()(e,o,[]).map(function(e){var r=ge()(t,{identifier:e});if(r)return r;var n=ge()(l,{identifier:e});return n||{identifier:e}}),c=me()(e,"affiliations",[]);return je(je({},e),{},{person_or_org:je(je({},e.person_or_org),{},{identifiers:s}),affiliations:c})}),(0,A.A)(r,"deserializeCreatibutor",function(e){var t=r.props.deserializeCreatibutor;if(t)return t(e);return{person_or_org:je(je({type:Fe},e.person_or_org),{},{identifiers:Ee()(me()(e,"person_or_org.identifiers",[]),"identifier")}),affiliations:me()(e,"affiliations",[]),role:me()(e,"role","")}}),(0,A.A)(r,"isCreator",function(){return"creators"===r.props.schema}),(0,A.A)(r,"onSubmit",function(e,t){var n=r.props.onCreatibutorChange,i=r.state.action;switch(n(r.serializeCreatibutor(e)),t.setSubmitting(!1),t.resetForm(),i){case"saveAndContinue":r.closeModal(),r.openModal(),r.changeContent();break;case"saveAndClose":r.closeModal()}}),(0,A.A)(r,"serializeSuggestions",function(e){var t=r.state.isOrganization;return(0,m.AffiliationsSuggestions)(e,t)}),(0,A.A)(r,"onOrganizationSearchChange",function(e,t){var n=e.formikProps,i=t[0].extra;r.setState({organizationIdentifiers:i.identifiers.filter(function(e){return"grid"!==e.scheme}).map(function(e){return e.identifier}),organizationAffiliations:[]},function(){var e=r.state,t=e.organizationIdentifiers,a=e.organizationAffiliations;n.form.setFieldValue("person_or_org.name",i.name),r.updateIdentifiersAndAffiliations(n,t,a,r.identifiersRef,r.affiliationsRef)})}),(0,A.A)(r,"onPersonSearchChange",function(e,t){var n=e.formikProps;if("manual-entry"===t[0].key)return r.namesAutocompleteRef.current.setState({suggestions:[],selectedSuggestions:[]}),void r.setState({showPersonForm:!0});var i=t[0].extra;r.setState({showPersonForm:!0,personIdentifiers:i.identifiers.map(function(e){return e}),personAffiliations:i.affiliations.map(function(e){return e})},function(){var e=r.state,t=e.personIdentifiers,a=e.personAffiliations,o="person_or_org",l="".concat(o,".family_name"),s="".concat(o,".given_name"),c=(0,A.A)((0,A.A)({},s,i.given_name),l,i.family_name);Object.entries(c).forEach(function(e){var t=(0,be.A)(e,2),r=t[0],i=t[1];n.form.setFieldValue(r,i)}),r.updateIdentifiersAndAffiliations(n,t.map(function(e){return e.identifier}),a,r.identifiersRef,r.affiliationsRef)})}),r.state={open:!1,saveAndContinueLabel:g.M.t("Save and add another"),action:null,showPersonForm:e.autocompleteNames!==ze||!M()(e.initialCreatibutor),isOrganization:!M()(e.initialCreatibutor)&&e.initialCreatibutor.person_or_org.type===xe,personIdentifiers:[],personAffiliations:[],organizationIdentifiers:[],organizationAffiliations:[]},r.inputRef=(0,c.createRef)(),r.identifiersRef=(0,c.createRef)(),r.affiliationsRef=(0,c.createRef)(),r.namesAutocompleteRef=(0,c.createRef)(),r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"initStatesFromInitialCreatibutor",value:function(e){var t,r=e.affiliations,n=void 0===r?[]:r,i=this.state.isOrganization,a=null===(t=e.person_or_org.identifiers)||void 0===t?void 0:t.map(function(e){return e.identifier});this.setState({personIdentifiers:i?[]:a,personAffiliations:i?[]:n,organizationIdentifiers:i?a:[],organizationAffiliations:i?n:[]})}},{key:"updateIdentifiersAndAffiliations",value:function(e,t,r,n,i){var a="".concat("person_or_org",".identifiers"),o=(0,A.A)((0,A.A)({},a,t),"affiliations",r);Object.entries(o).forEach(function(t){var r=(0,be.A)(t,2),n=r[0],i=r[1];e.form.setFieldValue(n,i)}),n.current.setState({selectedOptions:n.current.valuesToOptions(t)});var l=r.map(function(e){var t=e.id,r=e.name;return{text:r,value:null!==t&&void 0!==t?t:r,key:null!==t&&void 0!==t?t:r,name:r}});i.current.setState({suggestions:l,selectedSuggestions:l,searchQuery:null,error:!1,open:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.initialCreatibutor,i=t.autocompleteNames,a=t.roleOptions,o=t.trigger,l=t.action,s=t.serializeSuggestions,u=this.state,d=u.open,p=u.showPersonForm,h=u.personIdentifiers,b=u.personAffiliations,y=u.organizationIdentifiers,A=u.organizationAffiliations,E=u.saveAndContinueLabel,w=this.displayActionLabel();return c.createElement(f.Formik,{initialValues:this.deserializeCreatibutor(r),onSubmit:this.onSubmit,enableReinitialize:!0,validationSchema:this.CreatorSchema,validateOnChange:!1,validateOnBlur:!1},function(t){var u=t.values,f=t.resetForm,P=t.handleSubmit,O="person_or_org",C="".concat(O,".type"),S="".concat(O,".family_name"),D="".concat(O,".given_name"),I="".concat(O,".name"),F="".concat(O,".identifiers"),x="affiliations",j="role";return c.createElement(we.A,{centered:!1,onOpen:function(){return e.openModal()},open:d,trigger:o,onClose:function(){e.closeModal(),f()},closeIcon:!0,closeOnDimmerClick:!1},c.createElement(we.A.Header,{as:"h2",className:"pt-10 pb-10"},w),c.createElement(we.A.Content,null,c.createElement(v.A,null,c.createElement(v.A.Group,null,c.createElement(m.RadioField,{fieldPath:C,label:g.M.t("Person"),checked:me()(u,C)===Fe,value:Fe,onChange:function(t){var r=t.formikProps;e.setState({isOrganization:!1}),r.form.setFieldValue(C,Fe),r.form.setFieldValue(F,h),r.form.setFieldValue(x,b)},autoFocus:!0,optimized:!0}),c.createElement(m.RadioField,{fieldPath:C,label:g.M.t("Organization"),checked:me()(u,C)===xe,value:xe,onChange:function(t){var r=t.formikProps;e.setState({isOrganization:!0}),r.form.setFieldValue(C,xe),r.form.setFieldValue(x,A),r.form.setFieldValue(F,y)},optimized:!0})),me()(u,C,"")===Fe?c.createElement(c.Fragment,null,i!==qe&&c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.PersonRemoteSelectField",initialCreatibutor:r,serializeSuggestions:s||e.serializeSuggestions,onValueChange:e.onPersonSearchChange,ref:e.namesAutocompleteRef},c.createElement(m.RemoteSelectField,{selectOnBlur:!1,selectOnNavigation:!1,searchInput:{autoFocus:M()(r)},fieldPath:"creators",clearable:!0,multiple:!1,allowAdditions:!1,placeholder:g.M.t("Search for persons by name, identifier, or affiliation..."),noQueryMessage:g.M.t("Search for persons by name, identifier, or affiliation..."),required:!1,search:function(e){return e},suggestionAPIUrl:"/api/names",serializeSuggestions:s||e.serializeSuggestions,onValueChange:e.onPersonSearchChange,ref:e.namesAutocompleteRef})),p&&c.createElement(c.Fragment,null,c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.FullNameField",familyNameFieldPath:S,givenNameFieldPath:D,isCreator:e.isCreator()},c.createElement(v.A.Group,{widths:"equal"},c.createElement(m.TextField,{label:g.M.t("Family name"),placeholder:g.M.t("Family name"),fieldPath:S,required:e.isCreator()}),c.createElement(m.TextField,{label:g.M.t("Given names"),placeholder:g.M.t("Given names"),fieldPath:D}))),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.PersonIdentifiersField",ref:e.identifiersRef,fieldPath:F,values:u},c.createElement(Ie,{initialOptions:Ee()(me()(u,F,[]),function(e){return{text:e,value:e,key:e}}),fieldPath:F,ref:e.identifiersRef})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.PersonAffiliationsField",ref:e.affiliationsRef,fieldPath:x},c.createElement(Oe,{fieldPath:x,selectRef:e.affiliationsRef})))):c.createElement(c.Fragment,null,i!==qe&&c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.OrganizationRemoteSelectField",initialCreatibutor:r,serializeSuggestions:s||e.serializeSuggestions,onValueChange:e.onOrganizationSearchChange},c.createElement(m.RemoteSelectField,{selectOnBlur:!1,selectOnNavigation:!1,searchInput:{autoFocus:M()(r)},fieldPath:"creators",clearable:!0,multiple:!1,allowAdditions:!1,placeholder:g.M.t("Search for an organization by name, identifier, or affiliation..."),noQueryMessage:g.M.t("Search for organization by name, identifier, or affiliation..."),required:!1,search:function(e){return e},suggestionAPIUrl:"/api/affiliations",serializeSuggestions:s||e.serializeSuggestions,onValueChange:e.onOrganizationSearchChange})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.OrganizationNameField",fieldPath:I,ref:e.inputRef,isCreator:e.isCreator()},c.createElement(m.TextField,{label:g.M.t("Name"),placeholder:g.M.t("Organization name"),fieldPath:I,required:e.isCreator(),input:{ref:e.inputRef}})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.OrganizationIdentifiersField",ref:e.identifiersRef,values:u,fieldPath:F},c.createElement(Ie,{initialOptions:Ee()(me()(u,F,[]),function(e){return{text:e,value:e,key:e}}),fieldPath:F,ref:e.identifiersRef,placeholder:g.M.t("e.g. ROR, ISNI or GND.")})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.OrganizationAffiliationsField",fieldPath:x,ref:e.affiliationsRef},c.createElement(Oe,{fieldPath:x,selectRef:e.affiliationsRef}))),(me()(u,C)===xe||p&&me()(u,C)===Fe)&&c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsModal.RoleSelectField",fieldPath:j,roleOptions:a,isCreator:e.isCreator()},c.createElement(m.SelectField,(0,n.A)({fieldPath:j,label:g.M.t("Role"),options:a,placeholder:g.M.t("Select role")},e.isCreator()&&{clearable:!0},{required:!e.isCreator(),optimized:!0,scrolling:!0}))))),c.createElement(we.A.Actions,null,c.createElement(R.A,{name:"cancel",onClick:function(){f(),e.closeModal()},icon:"remove",content:g.M.t("Cancel"),floated:"left"}),l===_e&&c.createElement(R.A,{name:"submit",onClick:function(){e.setState({action:"saveAndContinue",showPersonForm:i!==ze},function(){P()})},primary:!0,icon:"checkmark",content:E}),c.createElement(R.A,{name:"submit",onClick:function(){e.setState({action:"saveAndClose",showPersonForm:i!==ze},function(){return P()})},primary:!0,icon:"checkmark",content:g.M.t("Save")})))})}}])}(c.Component);Le.propTypes={schema:p().oneOf(["creators","contributors"]).isRequired,action:p().oneOf(["add","edit"]).isRequired,addLabel:p().string.isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),editLabel:p().string.isRequired,initialCreatibutor:p().shape({id:p().string,person_or_org:p().shape({family_name:p().string,given_name:p().string,name:p().string,type:p().string,identifiers:p().arrayOf(p().shape({scheme:p().string,identifier:p().string}))}),affiliations:p().array,role:p().string}),trigger:p().object.isRequired,onCreatibutorChange:p().func.isRequired,roleOptions:p().array,serializeSuggestions:p().func,serializeCreatibutor:p().func,deserializeCreatibutor:p().func},Le.defaultProps={roleOptions:[],initialCreatibutor:{},autocompleteNames:"search",serializeSuggestions:void 0,serializeCreatibutor:void 0,deserializeCreatibutor:void 0};var Ne=r(97177),Be=r(65522),Ue=r(28085),Ve=r(16147),He=function(e){var t=e.compKey,r=e.creatibutorError,n=e.index,i=e.replaceCreatibutor,a=e.removeCreatibutor,o=e.moveCreatibutor,l=e.addLabel,s=e.editLabel,u=e.initialCreatibutor,d=e.displayName,p=e.roleOptions,f=e.schema,h=e.autocompleteNames,v=e.serializeSuggestions,b=e.serializeCreatibutor,y=e.deserializeCreatibutor,A=c.useRef(null),E=(0,Ne.i)({item:{index:n,type:"creatibutor"}}),w=(0,be.A)(E,3),P=(w[0],w[1]),O=w[2],C=(0,Be.H)({accept:"creatibutor",hover:function(e,t){if(A.current){var r=e.index,i=n;r!==i&&t.isOver({shallow:!0})&&(o(r,i),e.index=i)}},collect:function(e){return{hidden:e.isOver({shallow:!0})}}}),S=(0,be.A)(C,2),k=S[0].hidden;return(0,S[1])(A),c.createElement(Ve.o,{innerRef:A,key:t},c.createElement(j.A.Item,{key:t,className:k?"deposit-drag-listitem hidden":"deposit-drag-listitem"},c.createElement(j.A.Content,{floated:"right"},c.createElement(R.A,{size:"mini",type:"button",onClick:function(){return a(n)}},g.M.t("Remove")),c.createElement(Le,{addLabel:l,editLabel:s,onCreatibutorChange:function(e){i(n,e)},initialCreatibutor:u,roleOptions:p,schema:f,autocompleteNames:h,action:"edit",trigger:c.createElement(R.A,{size:"mini",primary:!0,type:"button"},g.M.t("Edit")),serializeSuggestions:v,serializeCreatibutor:b,deserializeCreatibutor:y})),c.createElement(Ve.o,{innerRef:P},c.createElement(j.A.Icon,{name:"bars",className:"drag-anchor"})),c.createElement(Ve.o,{innerRef:O},c.createElement(j.A.Content,null,c.createElement(j.A.Description,null,c.createElement("span",{className:"creatibutor"},me()(u,"person_or_org.identifiers",[]).some(function(e){return"orcid"===e.scheme})&&c.createElement("img",{alt:g.M.t("ORCID logo"),className:"inline-id-icon mr-5",src:"/static/images/orcid.svg",width:"16",height:"16"}),me()(u,"person_or_org.identifiers",[]).some(function(e){return"ror"===e.scheme})&&c.createElement("img",{alt:g.M.t("ROR logo"),className:"inline-id-icon mr-5",src:"/static/images/ror-icon.svg",width:"16",height:"16"}),me()(u,"person_or_org.identifiers",[]).some(function(e){return"gnd"===e.scheme})&&c.createElement("img",{alt:g.M.t("GND logo"),className:"inline-id-icon mr-5",src:"/static/images/gnd-icon.svg",width:"16",height:"16"}),d," ",function(e,t){if(e){var r,n,i=null!==(r=null===(n=t.find(function(t){return t.value===e}))||void 0===n?void 0:n.text)&&void 0!==r?r:e;return c.createElement(Ue.A,{size:"tiny"},i)}}(null===u||void 0===u?void 0:u.role,p))),r&&c.createElement(m.FeedbackLabel,{fieldPath:"".concat(t),hasSubfields:!0})))))};function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ge(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,Qe()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function Qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qe=function(){return!!e})()}He.propTypes={compKey:p().string.isRequired,creatibutorError:p().array,index:p().number.isRequired,replaceCreatibutor:p().func.isRequired,removeCreatibutor:p().func.isRequired,moveCreatibutor:p().func.isRequired,addLabel:p().node,editLabel:p().node,initialCreatibutor:p().object.isRequired,displayName:p().string,roleOptions:p().array.isRequired,schema:p().string.isRequired,autocompleteNames:p().oneOfType([p().bool,p().string]),serializeSuggestions:p().func,serializeCreatibutor:p().func,deserializeCreatibutor:p().func},He.defaultProps={creatibutorError:void 0,addLabel:void 0,editLabel:void 0,displayName:void 0,autocompleteNames:void 0,serializeSuggestions:void 0,serializeCreatibutor:void 0,deserializeCreatibutor:void 0};var Ke=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=Ge(this,t,[].concat(n)),(0,A.A)(e,"handleOnContributorChange",function(t){(0,e.props.push)(t)}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t=this.props,r=t.form,n=r.values,i=r.errors,a=r.initialErrors,o=r.initialValues,l=t.remove,s=t.replace,u=t.move,d=t.name,p=t.label,h=t.labelIcon,b=t.roleOptions,y=t.schema,g=t.modal,A=t.autocompleteNames,E=t.addButtonLabel,P=t.serializeSuggestions,O=t.serializeCreatibutor,C=t.deserializeCreatibutor,S=(0,f.getIn)(n,d,[]),D=(0,f.getIn)(o,d,[]),I=(0,f.getIn)(i,d,null),F=(0,f.getIn)(a,d,null),x=I||S===D&&F,M="";return x&&(M="string"!==typeof x?x.severity:"error"),"string"===typeof x?e=x:"object"===(0,pe.A)(x)&&null!==x&&(e={message:null===x||void 0===x?void 0:x.message,severity:null===x||void 0===x?void 0:x.severity,description:null===x||void 0===x?void 0:x.description}),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.CreatibutorsField.Container",labelIcon:h,label:p,roleOptions:b,schema:y,addLabel:g.addLabel,editLabel:g.editLabel,addButtonLabel:E,className:M},c.createElement(ve.Q,{backend:he.t2},c.createElement(v.A.Field,{required:"creators"===y,className:M},c.createElement(m.FieldLabel,{htmlFor:d,icon:h,label:p}),c.createElement(j.A,null,S.map(function(e,t){var r="".concat(d,".").concat(t),n=function(e){var t=me()(e,"person_or_org.type",Fe)===Fe,r=me()(e,"person_or_org.family_name",""),n=me()(e,"person_or_org.given_name",""),i=null===e||void 0===e?void 0:e.affiliations.map(function(e){return e.text||e.name}),a=me()(e,"person_or_org.name"),o=i.length?" (".concat(i.join(", "),")"):"";if(t){var l=n?", ".concat(n):"";return"".concat(r).concat(l).concat(o)}return"".concat(a).concat(o)}(e);return c.createElement(He,{key:r,creatibutorError:x&&"string"!==typeof x&&x[t],displayName:n,index:t,roleOptions:b,schema:y,compKey:r,initialCreatibutor:e,removeCreatibutor:l,replaceCreatibutor:s,moveCreatibutor:u,addLabel:g.addLabel,editLabel:g.editLabel,autocompleteNames:A,serializeSuggestions:P,serializeCreatibutor:O,deserializeCreatibutor:C})})),c.createElement(Le,{onCreatibutorChange:this.handleOnContributorChange,action:"add",addLabel:g.addLabel,editLabel:g.editLabel,roleOptions:ne(b),schema:y,autocompleteNames:A,trigger:c.createElement(R.A,{type:"button",icon:!0,labelPosition:"left",className:M},c.createElement(w.A,{name:"add"}),E)}),e&&c.createElement(m.FeedbackLabel,{fieldPath:d}))))}}])}(c.Component),Xe=function(e){function t(){return(0,i.A)(this,t),Ge(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return c.createElement(f.FieldArray,{name:t,component:function(t){return c.createElement(Ke,(0,n.A)({},t,e.props))}})}}])}(c.Component);Ke.propTypes=Ye({addButtonLabel:p().string,modal:p().shape({addLabel:p().string.isRequired,editLabel:p().string.isRequired}),schema:p().oneOf(["creators","contributors"]).isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),roleOptions:p().array.isRequired,form:p().object.isRequired,remove:p().func.isRequired,replace:p().func.isRequired,move:p().func.isRequired,push:p().func.isRequired,name:p().string.isRequired,serializeSuggestions:p().func,serializeCreatibutor:p().func,deserializeCreatibutor:p().func},m.mandatoryFieldCommonProps),Ke.defaultProps={autocompleteNames:"search",label:g.M.t("Creators"),labelIcon:"user",modal:{addLabel:g.M.t("Add creator"),editLabel:g.M.t("Edit creator")},addButtonLabel:g.M.t("Add creator"),serializeSuggestions:void 0,serializeCreatibutor:void 0,deserializeCreatibutor:void 0},Xe.propTypes=Ye({addButtonLabel:p().string,modal:p().shape({addLabel:p().string.isRequired,editLabel:p().string.isRequired}),schema:p().oneOf(["creators","contributors"]).isRequired,autocompleteNames:p().oneOf(["search","search_only","off"]),roleOptions:p().array,serializeSuggestions:p().func,serializeCreatibutor:p().func,deserializeCreatibutor:p().func},m.mandatoryFieldCommonProps),Xe.defaultProps={autocompleteNames:"search",label:void 0,labelIcon:void 0,roleOptions:void 0,modal:{addLabel:g.M.t("Add creator"),editLabel:g.M.t("Edit creator")},addButtonLabel:g.M.t("Add creator"),serializeSuggestions:void 0,serializeCreatibutor:void 0,deserializeCreatibutor:void 0};var Ze=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.CreatibutorsField",Xe),Je=r(61505),$e=r.n(Je),et=r(87612),tt=r.n(et),rt=r(2404),nt=r.n(rt),it=r(61448),at=r.n(it),ot={date:"",description:"",type:""};function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function st(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ut=function(){return!!e})()}var dt=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,ut()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"getRequiredOption",function(t,r){var n,i=st(e.props.requiredOptions);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=tt()(r,$e()(a))[0];if(nt()(o,t))return a}}catch(l){i.e(l)}finally{i.f()}return null}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.fieldPath,n=t.options,i=t.label,a=t.labelIcon,o=t.required,l=t.requiredOptions,s=t.showEmptyValue,u=t.placeholder,d=t.helpText,p=t.addButtonLabel,f=t.optimized;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DatesField.Container",fieldPath:r,defaultNewValue:ot,label:i,labelIcon:a,required:o,requiredOptions:l,showEmptyValue:s,placeholder:u,helpText:d,addButtonLabel:p,optimized:f},c.createElement(m.ArrayField,{addButtonLabel:p,defaultNewValue:ot,fieldPath:r,helpText:d,label:i,labelIcon:a,required:o,requiredOptions:l,showEmptyValue:s},function(t){var i=t.array,a=t.arrayHelpers,o=t.indexPath,l=t.value,s="".concat(r,".").concat(o),d=e.getRequiredOption(l,i),p=at()(d,"date"),h=at()(d,"type"),b=at()(d,"description");return c.createElement(m.GroupField,{fieldPath:r,optimized:f},c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DatesField.DateField",fieldPath:"".concat(s,".date")},c.createElement(m.TextField,{fieldPath:"".concat(s,".date"),label:g.M.t("Date"),placeholder:u,disabled:p,required:!0,width:5})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DatesField.TypeField",fieldPath:"".concat(s,".type")},c.createElement(m.SelectField,{fieldPath:"".concat(s,".type"),label:g.M.t("Type"),"aria-label":g.M.t("Type"),options:ne(n.type),disabled:h,required:!0,width:5,optimized:f})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DatesField.DescriptionField",disabled:b,width:5},c.createElement(m.TextField,{fieldPath:"".concat(s,".description"),label:g.M.t("Description"),disabled:b,width:5})),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.DatesField.RemoveButton"},c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",disabled:!M()(d),icon:"close",onClick:function(){return a.remove(o)},type:"button"}))))}))}}])}(c.Component);dt.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({options:p().shape({type:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,requiredOptions:p().array,showEmptyValue:p().bool,optimized:p().bool},m.fieldCommonProps),dt.defaultProps={label:g.M.t("Dates"),labelIcon:"calendar",placeholder:g.M.t("YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD"),helpText:g.M.t("Format: DATE or DATE/DATE where DATE is YYYY or YYYY-MM or YYYY-MM-DD."),addButtonLabel:g.M.t("Add date"),required:!1,requiredOptions:[],showEmptyValue:!1,optimized:!0};var pt=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.DatesField",dt),ft=r(10467),mt=r(54756),ht=r.n(mt),vt=r(2543),bt=r.n(vt),yt="DRAFT_FETCHED",gt="DRAFT_HAS_VALIDATION_ERRORS",At="DRAFT_LOADED_WITH_VALIDATION_ERRORS",Et="DRAFT_SAVE_STARTED",wt="DRAFT_SAVE_SUCCEEDED",Rt="DRAFT_SAVE_FAILED",Pt="DRAFT_PUBLISH_STARTED",Ot="DRAFT_PUBLISH_FAILED",Ct="DRAFT_PUBLISH_FAILED_WITH_VALIDATION_ERRORS",St="DRAFT_PREVIEW_STARTED",kt="DRAFT_PREVIEW_FAILED",Dt="DRAFT_DELETE_STARTED",It="DRAFT_DELETE_FAILED",Ft="DRAFT_SUBMIT_REVIEW_STARTED",xt="DRAFT_SUBMIT_REVIEW_FAILED",Mt="DRAFT_SUBMIT_REVIEW_FAILED_WITH_VALIDATION_ERRORS",jt="RESERVE_PID_STARTED",Tt="RESERVE_PID_SUCCEEDED",_t="RESERVE_PID_FAILED",zt="DISCARD_PID_STARTED",qt="DISCARD_PID_SUCCEEDED",Lt="DISCARD_PID_FAILED",Nt="SET_DOI_NEEDED",Bt="FILE_UPLOAD_ADDED",Ut="FILE_UPLOAD_IN_PROGRESS",Vt="FILE_UPLOAD_FINISHED",Ht="FILE_UPLOAD_FAILED",Wt="FILE_UPLOAD_SAVE_DRAFT_FAILED",Yt="FILE_IMPORT_STARTED",Gt="FILE_IMPORT_SUCCESS",Qt="FILE_IMPORT_FAILED",Kt="FILE_DELETED_SUCCESS",Xt="FILE_DELETE_FAILED",Zt="FILE_UPLOAD_SET_CANCEL_FUNCTION",Jt="FILE_UPLOAD_CANCELLED",$t="SET_COMMUNITY";function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.history.replaceState(void 0,"",t);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ir=function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n,i,a;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!!t.id,e.next=1,r.save(t);case 1:return i=e.sent,!M()(i.errors)&&(a={metadata:t.metadata,custom_fields:t.custom_fields},i.data=bt().merge(i.data,a)),n||rr(i.data.links.self_html),e.abrupt("return",i);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}();function ar(e){if("object"!==(0,pe.A)(e))return!0;if(Object.hasOwn(e,"message")&&Object.hasOwn(e,"severity")&&Object.hasOwn(e,"description")&&"error"===e.severity)return!0;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("message"!==n&&"severity"!==n&&"description"!==n)return ar(e[n])}}function or(e,t,r){return lr.apply(this,arguments)}function lr(){return(lr=(0,ft.A)(ht().mark(function e(t,r,n){var i,a,o,l,s,c,u,d,p,f,m,h,v,b,y,g;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.depositState,a=n.dispatchFn,o=n.failType,l=n.partialValidationActionType,s=n.showOnlyValidationErrorsWithSeverityError,e.prev=1,e.next=2,ir(t,r,o);case 2:c=e.sent,e.next=4;break;case 3:throw e.prev=3,g=e.catch(1),console.error("Error saving draft",g,t),a({type:o,payload:{errors:g.errors}}),g;case 4:if(u=s?ar(c.errors):!M()(c.errors),d=u?c:{},p=i.editorState,f=p.actions,m=f.communityStateMustBeChecked,h=f.shouldDeleteReview,v=f.shouldUpdateReview,b=p.selectedCommunity,!m){e.next=8;break}if(y=c.data,!h){e.next=5;break}return e.next=5,r.deleteReview(y.links);case 5:if(!v){e.next=6;break}return e.next=6,r.createOrUpdateReview(y.links,b.id);case 6:return e.next=7,r.read(y.links);case 7:c=e.sent,a({type:yt,payload:{data:c.data}}),d.data=tr(tr({},d.data),c.data),d.errors=tr(tr({},d.errors),c.errors);case 8:if(!u){e.next=9;break}throw a({type:l,payload:{data:d.data,errors:d.errors}}),d;case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}},e,null,[[1,3]])}))).apply(this,arguments)}var sr=function(e){return function(){var t=(0,ft.A)(ht().mark(function t(r){return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r({type:$t,payload:{community:e}});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},cr=["key","size","checksum","links"];function ur(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pr=function(e){return function(){var t=(0,ft.A)(ht().mark(function t(r,n,i){var a,o;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,ir(e,i.service.drafts);case 1:return a=t.sent,r({type:yt,payload:{data:a.data}}),t.abrupt("return",a.data);case 2:throw t.prev=2,o=t.catch(0),console.error("Error saving a draft record",o,e),r({type:Wt,payload:{errors:o.errors}}),o;case 3:case"end":return t.stop()}},t,null,[[0,2]])}));return function(e,r,n){return t.apply(this,arguments)}}()},fr=function(e,t,r){return function(){var n=(0,ft.A)(ht().mark(function n(i,a,o){var l;return ht().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,o.service.files.upload(r,t),n.next=2;break;case 1:throw n.prev=1,l=n.catch(0),console.error("Error uploading file",l,e,t),i({type:Ht,payload:{errors:l.errors,payload:{filename:t.name}}}),l;case 2:case"end":return n.stop()}},n,null,[[0,1]])}));return function(e,t,r){return n.apply(this,arguments)}}()},mr=function(e){return function(){var t=(0,ft.A)(ht().mark(function t(r,n,i){var a,o,l,s,c,u;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=(null===(a=e.meta)||void 0===a?void 0:a.links)||e.links,t.next=1,i.service.files.delete(o);case 1:r({type:Kt,payload:{filename:e.name}}),t.next=4;break;case 2:if(t.prev=2,u=t.catch(0),404!==(null===(l=u.response)||void 0===l?void 0:l.status)||!(null!==(s=e.uploadState)&&void 0!==s&&s.isPending||null===(c=e.progress)||void 0===c)&&c.uploadComplete){t.next=3;break}r({type:Kt,payload:{filename:e.name}}),t.next=4;break;case 3:throw console.error("Error deleting file",u,e),r({type:Xt}),u;case 4:case"end":return t.stop()}},t,null,[[0,2]])}));return function(e,r,n){return t.apply(this,arguments)}}()},hr=function(){return function(){var e=(0,ft.A)(ht().mark(function e(t,r,n){var i,a,o,l;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=r().deposit.record).id){e.next=1;break}return e.abrupt("return");case 1:return t({type:Yt}),e.prev=2,a=i.links,e.next=3,n.service.files.importParentRecordFiles(a);case 3:o=e.sent,t({type:Gt,payload:{files:o}}),e.next=5;break;case 4:throw e.prev=4,l=e.catch(2),console.error("Error importing parent record files",l),t({type:Qt}),l;case 5:case"end":return e.stop()}},e,null,[[2,4]])}));return function(t,r,n){return e.apply(this,arguments)}}()};function vr(e){var t=function(e,t){if("object"!=(0,pe.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=(0,pe.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,pe.A)(t)?t:t+""}function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gr={uploading:"uploading",failed:"error",completed:"finished",pending:"pending"},Ar={};const Er=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,i=arguments.length>1?arguments[1]:void 0,a=null!==(e=null===(t=i.payload)||void 0===t||null===(t=t.filename)||void 0===t?void 0:t.normalize())&&void 0!==e?e:"";switch(i.type){case Bt:return yr(yr({},n),{},{entries:yr(yr({},n.entries),{},(0,A.A)({},a,{progressPercentage:0,name:a,size:0,status:gr.pending,checksum:null,links:null,cancelUploadFn:null})),actionState:i.type});case Ut:return yr(yr({},n),{},{entries:yr(yr({},n.entries),{},(0,A.A)({},a,yr(yr({},n.entries[a]),{},{progressPercentage:i.payload.percent,status:gr.uploading}))),isFileUploadInProgress:!0,actionState:i.type});case Vt:return r=yr(yr({},n),{},{entries:yr(yr({},n.entries),{},(0,A.A)({},a,yr(yr(yr({},n.entries[a]),i.payload.extraData),{},{status:gr.completed,size:i.payload.size,progressPercentage:100,checksum:i.payload.checksum,links:i.payload.links,cancelUploadFn:null})))}),yr(yr({},r),{},{isFileUploadInProgress:Object.values(r.entries).some(function(e){return e.status===gr.uploading}),actionState:i.type});case Wt:return yr(yr({},n),{},{errors:yr({},i.payload.errors),actionState:i.type});case Ht:return r=yr(yr({},n),{},{entries:yr(yr({},n.entries),{},(0,A.A)({},a,yr(yr({},n.entries[a]),{},{status:gr.failed,cancelUploadFn:null})))}),yr(yr({},r),{},{isFileUploadInProgress:Object.values(r.entries).some(function(e){return e.status===gr.uploading}),actionState:i.type});case Zt:return yr(yr({},n),{},{entries:yr(yr({},n.entries),{},(0,A.A)({},a,yr(yr({},n.entries[a]),{},{cancelUploadFn:i.payload.cancelUploadFn}))),actionState:i.type});case Jt:var o=n.entries,l=(o[a],(0,Z.A)(o,[a].map(vr)));return yr(yr({},n),{},{entries:yr({},l),isFileUploadInProgress:Object.values(l).some(function(e){return e.status===gr.uploading}),actionState:i.type});case Kt:var s=n.entries,c=(s[a],(0,Z.A)(s,[a].map(vr)));return yr(yr({},n),{},{entries:yr({},c),isFileUploadInProgress:Object.values(c).some(function(e){return e.status===gr.uploading}),actionState:i.type});case Xt:return yr(yr({},n),{},{actionState:i.type});case Yt:return yr(yr({},n),{},{isFileImportInProgress:!0,actionState:i.type});case Gt:return yr(yr({},n),{},{entries:yr({},i.payload.files),isFileImportInProgress:!1,actionState:i.type});case Qt:return yr(yr({},n),{},{isFileImportInProgress:!1,actionState:i.type});default:return n}};var wr=["onError","record","disabled"],Rr=function(e){var t=e.onError,r=e.record,i=e.disabled,a=(0,Z.A)(e,wr),o=(0,c.useState)(!1),l=(0,be.A)(o,2),s=l[0],u=l[1],d=function(){var e=(0,ft.A)(ht().mark(function e(){var n,i;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=2,m.http.post(r.links.versions);case 2:n=e.sent,window.location=n.data.links.self_html,e.next=4;break;case 3:e.prev=3,i=e.catch(1),console.error(i),u(!1),t(i.response.data.message);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return c.createElement(E.A,{content:g.M.t("You don't have permissions to create a new version."),position:"top center",disabled:!i,trigger:c.createElement("span",null,c.createElement(R.A,(0,n.A)({type:"button",positive:!0,size:"mini",onClick:d,loading:s,icon:!0,labelPosition:"left",disabled:i},a),c.createElement(w.A,{name:"tag"}),g.M.t("New version")))})};Rr.propTypes={onError:p().func.isRequired,record:p().object.isRequired,disabled:p().bool},Rr.defaultProps={disabled:!1};var Pr=r(75497),Or=r(53959),Cr=r(73591),Sr=r(42755),kr=r(2685);function Dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Dr=function(){return!!e})()}var Ir=function(e){var t=e.filesLocked;return c.createElement(Or.A.Header,null,c.createElement(Or.A.Row,null,c.createElement(Or.A.HeaderCell,null,g.M.t("Preview")," ",c.createElement(E.A,{content:g.M.t("Choose which file to preview on the published record landing page"),trigger:c.createElement(w.A,{fitted:!0,name:"help circle",size:"small"})})),c.createElement(Or.A.HeaderCell,null,g.M.t("Filename")),c.createElement(Or.A.HeaderCell,null,g.M.t("Size")),!t&&c.createElement(Or.A.HeaderCell,{textAlign:"center"},g.M.t("Progress")),!t&&c.createElement(Or.A.HeaderCell,null)))};Ir.propTypes={filesLocked:p().bool},Ir.defaultProps={filesLocked:!1};var Fr=function(e){var t,r,n,i,a,o,l=e.filesLocked,s=e.file,u=e.deleteFile,d=e.defaultPreview,p=e.setDefaultPreview,f=e.decimalSizeDisplay,h=e.fileError,v=(0,c.useState)(!1),b=(0,be.A)(v,2),y=b[0],A=b[1],P=(0,c.useState)(!1),O=(0,be.A)(P,2),C=O[0],S=O[1],k=d===s.name,D=function(){var e=(0,ft.A)(ht().mark(function e(t){var r;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=2,u(t);case 2:k&&p(""),e.next=4;break;case 3:e.prev=3,r=e.catch(1),S(!1),console.error(r);case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}();return c.createElement(Or.A.Row,{key:s.name},c.createElement(Or.A.Cell,{"data-label":g.M.t("Default preview"),width:2},c.createElement(Cr.A,{checked:k,onChange:function(){return p(k?"":s.name)}})),c.createElement(Or.A.Cell,{"data-label":g.M.t("Filename"),width:10},c.createElement("div",null,h&&c.createElement(c.Fragment,null,c.createElement(m.FeedbackLabel,{fieldPath:"files.entries."+s.name,pointing:"below"}),c.createElement("br",null)),s.uploadState.isPending?c.createElement("div",null,s.name):c.createElement("a",{href:me()(s,"links.content",""),target:"_blank",rel:"noopener noreferrer",className:"mr-5 text-break"},s.name),c.createElement("br",null),s.checksum&&c.createElement("div",{className:"ui text-muted"},c.createElement("span",{style:{fontSize:"10px"}},s.checksum)," ",c.createElement(E.A,{content:g.M.t("This is the file fingerprint (MD5 checksum), which can be used to verify the file integrity."),trigger:c.createElement(w.A,{fitted:!0,name:"help circle",size:"small"}),position:"top center"}))||c.createElement("div",{className:"ui text-muted"},c.createElement("span",{style:{fontSize:"10px"}},g.M.t("Checksum not yet calculated."))," "))),c.createElement(Or.A.Cell,{"data-label":g.M.t("Size"),width:2},s.size?(0,m.humanReadableBytes)(s.size,f):g.M.t("N/A")),!l&&c.createElement(Or.A.Cell,{className:"file-upload-pending","data-label":g.M.t("Progress"),width:2},!(null!==(t=s.uploadState)&&void 0!==t&&t.isPending)&&c.createElement(Sr.A,{className:"file-upload-progress primary",percent:s.progressPercentage,error:s.uploadState.isFailed,size:"medium",progress:!0,autoSuccess:!0,active:!0}),(null===(r=s.uploadState)||void 0===r?void 0:r.isPending)&&c.createElement("span",null,g.M.t("Pending"))),!l&&c.createElement(Or.A.Cell,{textAlign:"right",width:2},((null===(n=s.uploadState)||void 0===n?void 0:n.isFinished)||(null===(i=s.uploadState)||void 0===i?void 0:i.isFailed)||(null===(a=s.uploadState)||void 0===a?void 0:a.isPending))&&(C?c.createElement(w.A,{loading:!0,name:"spinner"}):c.createElement(w.A,{link:!0,className:"action primary",name:"trash alternate outline",disabled:C,onClick:function(){return D(s)},"aria-label":g.M.t("Delete file"),title:g.M.t("Delete file")})),(null===(o=s.uploadState)||void 0===o?void 0:o.isUploading)&&c.createElement(R.A,{compact:!0,type:"button",negative:!0,size:"tiny",disabled:y,onClick:function(){return function(e){A(!0),e.cancelUploadFn()}(s)}},y?c.createElement(w.A,{loading:!0,name:"spinner"}):g.M.t("Cancel"))))};Fr.propTypes={filesLocked:p().bool,file:p().object,deleteFile:p().func.isRequired,defaultPreview:p().string,setDefaultPreview:p().func.isRequired,decimalSizeDisplay:p().bool,fileError:p().object},Fr.defaultProps={filesLocked:!1,file:void 0,defaultPreview:void 0,decimalSizeDisplay:!1,fileError:void 0};var xr=function(e){var t=e.filesLocked,r=e.filesList,n=e.dragText,i=e.hasError,a=e.uploadButtonIcon,o=e.uploadButtonText,l=e.openFileDialog;return!t&&c.createElement(kr.A,{basic:!0,padded:"very",className:r.length?"file-upload-area":"file-upload-area no-files"},c.createElement(K.A,{columns:3,textAlign:"center"},c.createElement(K.A.Row,{verticalAlign:"middle"},c.createElement(K.A.Column,{mobile:16,tablet:7,computer:7},c.createElement(y.A,{size:"small"},n)),c.createElement(K.A.Column,{className:"mt-10 mb-10",mobile:16,tablet:2,computer:2},"- ",g.M.t("or")," -"),c.createElement(K.A.Column,{mobile:16,tablet:7,computer:7},c.createElement(R.A,{type:"button",className:i?"error":"primary",labelPosition:"left",icon:a,content:o,onClick:function(){return l()},disabled:null===l})))))};xr.propTypes={filesLocked:p().bool.isRequired,filesList:p().array,hasError:p().bool,dragText:p().string,uploadButtonIcon:p().node,uploadButtonText:p().string,openFileDialog:p().func},xr.defaultProps={filesList:void 0,dragText:void 0,uploadButtonIcon:void 0,uploadButtonText:void 0,openFileDialog:null,hasError:!1};var Mr=function(e){var t=e.filesLocked,r=e.filesList,n=e.deleteFile,i=e.decimalSizeDisplay,a=(0,f.useFormikContext)(),o=a.errors,l=a.setFieldValue,s=a.values,u=me()(s,"files.default_preview","");return c.createElement(Or.A,null,c.createElement(Ir,{filesLocked:t}),c.createElement(Or.A.Body,null,r.map(function(e){return c.createElement(Fr,{key:e.name,filesLocked:t,file:e,deleteFile:n,defaultPreview:u,setDefaultPreview:function(e){return l("files.default_preview",e)},decimalSizeDisplay:i,fileError:(0,f.getIn)(o,"files.entries."+e.name,void 0)})})))};Mr.propTypes={filesLocked:p().bool,filesList:p().array,deleteFile:p().func,decimalSizeDisplay:p().bool},Mr.defaultProps={filesLocked:void 0,filesList:void 0,deleteFile:void 0,decimalSizeDisplay:void 0};var jr=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Dr()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.filesEnabled,i=t.dropzoneParams,a=t.filesList,o=t.filesLocked;return r?c.createElement(Pr.Ay,(0,n.A)({},i,{disabled:o}),function(t){var r=t.getRootProps,i=t.getInputProps,o=t.open;return c.createElement(K.A.Column,{width:16},c.createElement("span",r(),c.createElement("input",i()),0!==a.length&&c.createElement(K.A.Column,{verticalAlign:"middle"},c.createElement(Mr,e.props)),c.createElement(xr,(0,n.A)({},e.props,{openFileDialog:o}))))}):c.createElement(K.A.Column,{width:16},c.createElement(kr.A,{basic:!0,padded:"very",className:"file-upload-area no-files"},c.createElement(K.A,{textAlign:"center"},c.createElement(K.A.Row,{verticalAlign:"middle"},c.createElement(K.A.Column,null,c.createElement(y.A,{size:"medium"},g.M.t("This is a Metadata-only record.")))))))}}])}(c.Component);jr.propTypes={deleteFile:p().func,dragText:p().string,dropzoneParams:p().object,filesEnabled:p().bool.isRequired,filesList:p().array,filesLocked:p().bool,links:p().object,setDefaultPreviewFile:p().func,uploadButtonIcon:p().string,uploadButtonText:p().string,decimalSizeDisplay:p().bool},jr.defaultProps={deleteFile:void 0,dragText:void 0,dropzoneParams:void 0,filesList:void 0,filesLocked:!1,links:void 0,setDefaultPreviewFile:void 0,uploadButtonIcon:void 0,uploadButtonText:void 0,decimalSizeDisplay:void 0};var Tr=function(e){var t=e.filesList,r=e.filesSize,n=e.filesEnabled,i=e.showMetadataOnlyToggle,a=e.quota,o=e.decimalSizeDisplay,l=(0,f.useFormikContext)().setFieldValue,s=function(){l("files.enabled",!n),l("access.files","public")};return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.FileUploaderToolbar.Container",filesList:t,filesSize:r,filesEnabled:n,showMetadataOnlyToggle:i,quota:a,decimalSizeDisplay:o,handleOnChangeMetadataOnly:s},c.createElement(c.Fragment,null,c.createElement(K.A.Column,{verticalAlign:"middle",floated:"left",mobile:16,tablet:6,computer:6},c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.FileUploaderToolbar.MetadataOnlyToggle",filesList:t,filesEnabled:n,showMetadataOnlyToggle:i,handleOnChangeMetadataOnly:s},i&&c.createElement(j.A,{horizontal:!0},c.createElement(j.A.Item,null,c.createElement(T.A,{label:g.M.t("Metadata-only record"),onChange:s,disabled:t.length>0,checked:!n})),c.createElement(j.A.Item,null,c.createElement(E.A,{trigger:c.createElement(w.A,{name:"question circle outline",className:"neutral"}),content:g.M.t("Disable files for this record"),position:"top center"}))))),c.createElement(k.default,{id:"ReactInvenioDeposit.FileUploaderToolbar.FileList.container",filesList:t,filesSize:r,filesEnabled:n,quota:a,decimalSizeDisplay:o},n&&c.createElement(K.A.Column,{mobile:16,tablet:10,computer:10,className:"storage-col"},c.createElement(y.A,{size:"tiny",className:"mr-10"},g.M.t("Storage available")),c.createElement(j.A,{horizontal:!0,floated:"right"},c.createElement(j.A.Item,null,c.createElement(Ue.A,t.length===a.maxFiles?{color:"blue"}:{},g.M.t("{{length}} out of {{maxfiles}} files",{length:t.length,maxfiles:a.maxFiles}))),c.createElement(j.A.Item,null,c.createElement(Ue.A,(0,m.humanReadableBytes)(r,o)===(0,m.humanReadableBytes)(a.maxStorage,o)?{color:"blue"}:{},(0,m.humanReadableBytes)(r,o)," ",g.M.t("out of")," ",(0,m.humanReadableBytes)(a.maxStorage,o))))))))};Tr.propTypes={filesList:p().array,filesSize:p().oneOfType([p().number,p().string]),filesEnabled:p().bool.isRequired,quota:p().object,decimalSizeDisplay:p().bool,showMetadataOnlyToggle:p().bool},Tr.defaultProps={filesList:void 0,filesSize:void 0,quota:void 0,decimalSizeDisplay:!1,showMetadataOnlyToggle:!0};var _r=function(e){var t=Object.values(e).map(function(e){return{name:e.name,size:e.size,checksum:e.checksum,links:e.links,uploadState:{isFailed:e.status===gr.failed,isUploading:e.status===gr.uploading,isFinished:e.status===gr.completed,isPending:e.status===gr.pending},progressPercentage:e.progressPercentage,cancelUploadFn:e.cancelUploadFn}}),r=Ee()(t,"name"),n=new Set(r),i=t.reduce(function(e,t){return e+t.size},0);return{filesList:t,filesNamesSet:n,filesSize:i}},zr=["config","files","isDraftRecord","hasParentRecord","quota","permissions","record","uploadFiles","deleteFile","importParentFiles","importButtonIcon","importButtonText","isFileImportInProgress","decimalSizeDisplay","filesLocked","allowEmptyFiles"],qr=function(e){var t,r,i=e.config,a=e.files,o=e.isDraftRecord,l=e.hasParentRecord,s=e.quota,u=e.permissions,d=e.record,p=e.uploadFiles,h=e.deleteFile,v=e.importParentFiles,b=e.importButtonIcon,y=e.importButtonText,A=e.isFileImportInProgress,E=e.decimalSizeDisplay,P=e.filesLocked,O=e.allowEmptyFiles,C=(0,Z.A)(e,zr),S=(0,f.useFormikContext)(),D=S.values,I=S.errors,F=S.initialErrors,x=_r(a),j=x.filesList,T=x.filesNamesSet,_=x.filesSize,z=(I.files||(null===F||void 0===F?void 0:F.files))&&a,q=((null===(t=I.files)||void 0===t?void 0:t.enabled)||(null===F||void 0===F||null===(r=F.files)||void 0===r?void 0:r.enabled))&&a,L=me()(D,"files.enabled",!1),N=(0,c.useState)(),B=(0,be.A)(N,2),V=B[0],H=B[1],W=!o&&P,Y={preventDropOnDocument:!0,onDropAccepted:function(e){var t=j.length+e.length>s.maxFiles,r=e.reduce(function(e,t){return e+t.size},0),n=_+r>s.maxStorage,i=e.reduce(function(e,t){return T.has(t.name)?e.duplicateFiles.push(t):0===t.size?e.emptyFiles.push(t):e.nonEmptyFiles.push(t),e},{duplicateFiles:[],emptyFiles:[],nonEmptyFiles:[]}),a=i.duplicateFiles,o=i.emptyFiles,l=i.nonEmptyFiles,u=!M()(o),d=!M()(a);if(t)H(c.createElement("div",{className:"content"},c.createElement(U.A,{warning:!0,icon:"warning circle",header:g.M.t("Could not upload files."),content:g.M.t("Uploading the selected files would result in ".concat(j.length+e.length," files (max.").concat(s.maxFiles,")"))})));else if(n)H(c.createElement("div",{className:"content"},c.createElement(U.A,{warning:!0,icon:"warning circle",header:g.M.t("Could not upload files."),content:g.M.t("Uploading the selected files would result in {{total}} of storage use, exceeding the limit of {{limit}}.",{total:(0,m.humanReadableBytes)(_+r,E),limit:(0,m.humanReadableBytes)(s.maxStorage,E)})})));else{var f=[];d&&f.push(c.createElement(U.A,{warning:!0,icon:"warning circle",header:g.M.t("The following files already exist"),list:Ee()(a,"name")})),!O&&u&&f.push(c.createElement(U.A,{warning:!0,icon:"warning circle",header:g.M.t("Could not upload all files."),content:g.M.t("Empty files were skipped."),list:Ee()(o,"name")})),M()(f)||H(c.createElement("div",{className:"content"},f));var h=O?[].concat((0,Ce.A)(l),(0,Ce.A)(o)):l;M()(h)||p(D,h)}},multiple:!0,noClick:!0,noKeyboard:!0,disabled:!1};j.length<s.maxFiles||(Y.disabled=!0);var G=L&&o&&l&&!j.length;return c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.FileUploader.Container",config:i,files:a,isDraftRecord:o,hasParentRecord:l,quota:s,permissions:u,record:d,uploadFiles:p,deleteFile:h,importParentFiles:v,importButtonIcon:b,importButtonText:y,isFileImportInProgress:A,decimalSizeDisplay:E,filesEnabled:L,filesList:j,displayImportBtn:G,filesSize:_,dropzoneParams:Y,warningMsg:V,setWarningMsg:H,filesLocked:W,hasError:z},C),c.createElement(c.Fragment,null,c.createElement(K.A,{className:"file-uploader"},c.createElement(K.A.Row,{className:"pt-10 pb-5"},!W&&c.createElement(Tr,(0,n.A)({},C,{config:i,filesEnabled:L,filesList:j,filesSize:_,quota:s,decimalSizeDisplay:E}))),c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.FileUploader.ImportButton",importButtonIcon:b,importButtonText:y,importParentFiles:v,isFileImportInProgress:A,displayImportBtn:G},C),G&&c.createElement(K.A.Row,{className:"pb-5 pt-5"},c.createElement(K.A.Column,{width:16},c.createElement(U.A,{visible:!0,info:!0},c.createElement("div",{className:"right-floated display-inline-block"},c.createElement(R.A,{type:"button",size:"mini",primary:!0,icon:b,content:y,onClick:function(){return v()},disabled:A,loading:A})),c.createElement("p",{className:"display-inline-block mt-5"},c.createElement(w.A,{name:"info circle"}),g.M.t("You can import files from the previous version.")))))),c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.FileUploader.UploadArea",filesList:j,dropzoneParams:Y,filesLocked:W,hasError:q,filesEnabled:L,deleteFile:h,decimalSizeDisplay:E},C),L&&c.createElement(K.A.Row,{className:"pt-0 pb-0"},c.createElement(jr,(0,n.A)({},C,{filesList:j,dropzoneParams:Y,filesLocked:W,hasError:q,filesEnabled:L,deleteFile:h,decimalSizeDisplay:E})))),c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.FileUploader.NewVersionButton",isDraftRecord:o,draft:D,filesLocked:W,permissions:u,record:d},C),o?c.createElement(K.A.Row,{className:"file-upload-note pt-5"},c.createElement(K.A.Column,{width:16},c.createElement(U.A,{visible:!0,warning:!0},c.createElement("p",null,c.createElement(w.A,{name:"warning sign"}),g.M.t("File addition, removal or modification are not allowed after you have published your upload."))))):P&&c.createElement(K.A.Row,{className:"file-upload-note pt-5"},c.createElement(K.A.Column,{width:16},c.createElement(U.A,{info:!0},c.createElement(Rr,{record:d,onError:function(){},className:"right-floated",disabled:!u.can_new_version}),c.createElement("p",{className:"mt-5 display-inline-block"},c.createElement(w.A,{name:"info circle",size:"large"}),g.M.t("You must create a new version to add, modify or delete files."))))))),c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.FileUploader.Modal",warningMsg:V,setWarningMsg:H},C),c.createElement(we.A,{open:!!V,header:"Warning!",content:V,onClose:function(){return H()},closeIcon:!0}))))},Lr=p().objectOf(p().shape({name:p().string,size:p().number,progressPercentage:p().number,checksum:p().string,links:p().object,cancelUploadFn:p().func,state:p().oneOf(Object.values(gr)),enabled:p().bool}));qr.propTypes={config:p().object,dragText:p().string,files:Lr,isDraftRecord:p().bool,hasParentRecord:p().bool,quota:p().shape({maxStorage:p().number,maxFiles:p().number}),record:p().object,uploadButtonIcon:p().string,uploadButtonText:p().string,importButtonIcon:p().string,importButtonText:p().string,isFileImportInProgress:p().bool,importParentFiles:p().func.isRequired,uploadFiles:p().func.isRequired,deleteFile:p().func.isRequired,decimalSizeDisplay:p().bool,filesLocked:p().bool,permissions:p().object,allowEmptyFiles:p().bool},qr.defaultProps={permissions:void 0,config:void 0,files:void 0,record:void 0,isFileImportInProgress:!1,dragText:g.M.t("Drag and drop files"),isDraftRecord:!0,hasParentRecord:!1,quota:{maxFiles:5,maxStorage:Math.pow(10,10)},uploadButtonIcon:"upload",uploadButtonText:g.M.t("Upload files"),importButtonIcon:"sync",importButtonText:g.M.t("Import files"),decimalSizeDisplay:!0,filesLocked:!1,allowEmptyFiles:!0};var Nr=(0,u.connect)(function(e){var t,r,n=e.files,i=n.links;return{files:n.entries,links:i,record:e.deposit.record,config:e.deposit.config,permissions:e.deposit.permissions,isFileImportInProgress:e.files.isFileImportInProgress,hasParentRecord:Boolean((null===(t=e.deposit.record)||void 0===t||null===(t=t.versions)||void 0===t?void 0:t.index)&&(null===(r=e.deposit.record)||void 0===r||null===(r=r.versions)||void 0===r?void 0:r.index)>1)}},function(e){return{uploadFiles:function(t,r){return e(function(e,t){return function(){var r=(0,ft.A)(ht().mark(function r(n,i,a){var o,l,s,c,u,d;return ht().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,n(pr(e));case 1:o=r.sent,l=o.links.files,s=ur(t);try{for(s.s();!(c=s.n()).done;)u=c.value,n(fr(e,u,l))}catch(i){s.e(i)}finally{s.f()}r.next=3;break;case 2:throw r.prev=2,d=r.catch(0),console.error("Error uploading files",d,e,t),d;case 3:case"end":return r.stop()}},r,null,[[0,2]])}));return function(e,t,n){return r.apply(this,arguments)}}()}(t,r))},importParentFiles:function(){return e(hr())},deleteFile:function(t){return e(mr(t))}}})((0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.FileUploader",qr)),Br={scheme:"",identifier:""};function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Vr=function(){return!!e})()}var Hr=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Vr()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.required,a=e.disabled,o=e.schemeOptions,l=e.showEmptyValue,s=e.helpText,u=e.placeholder,d=e.optimized;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.IdentifiersField.Container",defaultNewValue:Br,labelIcon:n,label:r,required:i,disabled:a,showEmptyValue:l,options:o,placeholder:u,optimized:d},c.createElement(m.ArrayField,{addButtonLabel:g.M.t("Add identifier"),defaultNewValue:Br,fieldPath:t,label:r,labelIcon:n,helpText:s,required:i,disabled:a,showEmptyValue:l},function(e){var r=e.arrayHelpers,n=e.indexPath,i="".concat(t,".").concat(n);return c.createElement(m.GroupField,null,c.createElement(m.TextField,{fieldPath:"".concat(i,".identifier"),label:g.M.t("Identifier"),required:!0,width:11,placeholder:u}),o&&c.createElement(m.SelectField,{fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),options:o,optimized:d,required:!0,width:5}),!o&&c.createElement(m.TextField,{fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),required:!0,width:5}),c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:"close",onClick:function(){return r.remove(n)}})))}))}}])}(c.Component);Hr.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({schemeOptions:p().arrayOf(p().shape({text:p().string,value:p().string})),showEmptyValue:p().bool,optimized:p().bool},m.fieldCommonProps),Hr.defaultProps={label:g.M.t("Identifiers"),labelIcon:"barcode",required:!1,schemeOptions:void 0,showEmptyValue:!1,optimized:!0};var Wr=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.IdentifiersField",Hr),Yr=r(38221),Gr=r.n(Yr);function Qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qr=function(){return!!e})()}var Kr=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Qr()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.handleReservePID,n=e.label,i=e.loading,a=e.fieldError;return c.createElement(f.Field,null,function(e){var o=e.form;return c.createElement(v.A.Button,{className:"positive",size:"mini",loading:i,disabled:t||i,onClick:function(e){return r(e,o)},content:n,error:a})})}}])}(c.Component);function Xr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xr=function(){return!!e})()}Kr.propTypes={disabled:p().bool,handleReservePID:p().func.isRequired,fieldError:p().object,label:p().string.isRequired,loading:p().bool},Kr.defaultProps={disabled:!1,loading:!1,fieldError:null};var Zr=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Xr()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.handleDiscardPID,n=e.label,i=e.loading;return c.createElement(E.A,{content:n,trigger:c.createElement(f.Field,null,function(e){var n=e.form;return c.createElement(v.A.Button,{disabled:t||i,loading:i,icon:"close",onClick:function(e){return r(e,n)},size:"mini"})})})}}])}(c.Component);function Jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Jr=function(){return!!e})()}Zr.propTypes={disabled:p().bool,handleDiscardPID:p().func.isRequired,label:p().string.isRequired,loading:p().bool},Zr.defaultProps={disabled:!1,loading:!1};var $r=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Jr()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"handleChange",function(t,r){var n=r.value;(0,e.props.onManagedUnmanagedChange)("managed"===n)}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,r=e.isManagedSelected,n=e.pidLabel;return c.createElement(v.A.Group,{inline:!0},c.createElement(v.A.Field,null,g.M.t("Do you already have a {{pidLabel}} for this upload?",{pidLabel:n})),c.createElement(v.A.Field,{width:4},c.createElement(Cr.A,{label:g.M.t("Yes, I already have one"),"aria-label":g.M.t("Yes, I already have one"),name:"radioGroup",value:"unmanaged",disabled:t,checked:!r,onChange:this.handleChange})),c.createElement(v.A.Field,{width:3},c.createElement(Cr.A,{label:g.M.t("No, I need one"),"aria-label":g.M.t("No, I need one"),name:"radioGroup",value:"managed",disabled:t,checked:r,onChange:this.handleChange})))}}])}(c.Component);$r.propTypes={disabled:p().bool,isManagedSelected:p().bool.isRequired,onManagedUnmanagedChange:p().func.isRequired,pidLabel:p().string},$r.defaultProps={disabled:!1,pidLabel:void 0};var en="SAVE",tn="PUBLISH",rn="PUBLISH_WITHOUT_COMMUNITY",nn="PREVIEW",an="DELETE",on="RESERVE_PID",ln="DISCARD_PID",sn="SUBMIT_REVIEW",cn=c.createContext({setSubmitContext:void 0}),un=function(e,t){return(0,f.getIn)(e.errors,t,null)||(0,f.getIn)(e.initialErrors,t,null)};function dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dn=function(){return!!e})()}var pn=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,dn()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"handleReservePID",function(t,r){var n=e.props.pidType;(0,e.context.setSubmitContext)(on,{pidType:n}),r.handleSubmit(t)}),(0,A.A)(e,"handleDiscardPID",function(t,r){var n=e.props.pidType;(0,e.context.setSubmitContext)(ln,{pidType:n}),r.handleSubmit(t)}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.actionState,r=e.actionStateExtra,n=e.btnLabelDiscardPID,i=e.btnLabelGetPID,a=e.disabled,o=e.helpText,l=e.identifier,s=e.pidPlaceholder,u=e.pidType,d=e.form,p=e.fieldPath,f=""!==l,m=c.createElement(Kr,{disabled:a||f,label:i,loading:t===jt&&r.pidType===u,handleReservePID:this.handleReservePID,fieldError:un(d,p)}),h=c.createElement(Zr,{disabled:a,label:n,handleDiscardPID:this.handleDiscardPID,loading:t===zt&&r.pidType===u,pidType:u});return c.createElement(c.Fragment,null,c.createElement(v.A.Group,{inline:!0},f?c.createElement(v.A.Field,null,c.createElement("label",null,l)):c.createElement(v.A.Field,{width:4},c.createElement(v.A.Input,{disabled:!0,value:"",placeholder:s,width:16})),c.createElement(v.A.Field,null,l?h:m)),o&&c.createElement("label",{className:"helptext"},o))}}])}(c.Component);(0,A.A)(pn,"contextType",cn),pn.propTypes={btnLabelGetPID:p().string.isRequired,disabled:p().bool,helpText:p().string,identifier:p().string.isRequired,btnLabelDiscardPID:p().string.isRequired,pidPlaceholder:p().string.isRequired,pidType:p().string.isRequired,form:p().object.isRequired,fieldPath:p().string.isRequired,actionState:p().string,actionStateExtra:p().object},pn.defaultProps={disabled:!1,helpText:null,actionState:"",actionStateExtra:{}};var fn=(0,u.connect)(function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra}},null)(pn);function mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mn=function(){return!!e})()}var hn,vn=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,mn()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"handleIdentifierUpdate",function(e){r.setState({localIdentifier:e})}),(0,A.A)(r,"onChange",function(e){var t=r.props.onIdentifierChanged;r.setState({localIdentifier:e},function(){return t(e)})});var c=e.identifier;return r.state={localIdentifier:c},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.identifier;t!==e.identifier&&this.handleIdentifierUpdate(t)}},{key:"render",value:function(){var e=this,t=this.state.localIdentifier,r=this.props,n=r.form,i=r.fieldPath,a=r.helpText,o=r.pidPlaceholder,l=r.disabled,s=un(n,i);return c.createElement(c.Fragment,null,c.createElement(v.A.Field,{width:8,error:s},c.createElement(v.A.Input,{onChange:function(t,r){var n=r.value;return e.onChange(n)},value:t,placeholder:o,width:16,error:s,disabled:l})),a&&c.createElement("label",{className:"helptext"},a))}}])}(c.Component);function bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bn(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}vn.propTypes={form:p().object.isRequired,fieldPath:p().string.isRequired,helpText:p().string,identifier:p().string.isRequired,onIdentifierChanged:p().func.isRequired,pidPlaceholder:p().string.isRequired,disabled:p().bool},vn.defaultProps={helpText:null,disabled:!1};var gn=(0,a.A)(function e(){(0,i.A)(this,e)});function An(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).includes(e.status)}function En(e){var t,r,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=An(e,gn.allowsReviewDeletionStates),l=An(e,gn.allowsReviewUpdateStates),s=An(e,gn.disallowsSubmitForReviewStates),c=function(e,t){switch(t){case void 0:var r,n,i=null===(r=e.parent)||void 0===r||null===(r=r.review)||void 0===r||null===(r=r.receiver)||void 0===r?void 0:r.community,a=null===(n=e.parent)||void 0===n||null===(n=n.communities)||void 0===n?void 0:n.default;if(!i&&!a)return;return An(e,[gn.PUBLISHED,gn.NEW_VERSION_DRAFT])?e.expanded.parent.communities.default:e.expanded.parent.review.receiver;case null:return null;default:return t}}(e,a),u=!M()(c),d=null===e||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.review,p=An(e,[gn.DRAFT_WITH_REVIEW])&&(null===d||void 0===d||null===(r=d.receiver)||void 0===r?void 0:r.community)===(null===c||void 0===c?void 0:c.id),f=An(e,[gn.DECLINED,gn.EXPIRED])&&(null===d||void 0===d||null===(n=d.receiver)||void 0===n?void 0:n.community)===(null===c||void 0===c?void 0:c.id),m=!0===(null===c||void 0===c?void 0:c.is_ghost),h=u&&!m,v=An(e,[gn.PUBLISHED,gn.NEW_VERSION_DRAFT])&&(M()(null===(i=e.parent)||void 0===i?void 0:i.communities)||!h),b=u&&!An(e,[gn.PUBLISHED,gn.NEW_VERSION_DRAFT])&&c.ui.permissions.can_include_directly,y=u&&!f&&!An(e,[gn.PUBLISHED,gn.NEW_VERSION_DRAFT]),g=!An(e,[gn.PUBLISHED,gn.NEW_VERSION_DRAFT]),A=u&&l&&!p&&!f,E=!u&&o;return{selectedCommunity:c,ui:{showSubmitForReviewButton:y,showDirectPublishButton:b,disableSubmitForReviewButton:y&&s,showChangeCommunityButton:f,showCommunitySelectionButton:g,showCommunityHeader:!v,disableCommunitySelectionButton:g&&(f||s&&!v)},actions:{shouldUpdateReview:A,shouldDeleteReview:E,communityStateMustBeChecked:A||E}}}hn=gn,(0,A.A)(gn,"DRAFT","draft"),(0,A.A)(gn,"NEW_VERSION_DRAFT","new_version_draft"),(0,A.A)(gn,"DRAFT_WITH_REVIEW","draft_with_review"),(0,A.A)(gn,"IN_REVIEW","in_review"),(0,A.A)(gn,"DECLINED","declined"),(0,A.A)(gn,"EXPIRED","expired"),(0,A.A)(gn,"PUBLISHED","published"),(0,A.A)(gn,"allowsReviewDeletionStates",[hn.DRAFT_WITH_REVIEW,hn.DECLINED,hn.EXPIRED]),(0,A.A)(gn,"allowsReviewUpdateStates",[hn.DRAFT_WITH_REVIEW,hn.DECLINED,hn.EXPIRED,hn.DRAFT]),(0,A.A)(gn,"disallowsSubmitForReviewStates",[hn.PUBLISHED,hn.IN_REVIEW,hn.NEW_VERSION_DRAFT]);const wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:case Pt:case Dt:case St:return yn(yn({},e),{},{actionState:t.type});case Ft:return yn(yn({},e),{},{actionState:t.type,actionStateExtra:{reviewComment:t.payload.reviewComment,directPublish:t.payload.directPublish}});case jt:case zt:return yn(yn({},e),{},{actionState:t.type,actionStateExtra:{pidType:t.payload.pidType}});case Tt:case qt:return yn(yn({},e),{},{record:yn(yn({},e.record),t.payload.data),editorState:En(t.payload.data,e.editorState.selectedCommunity),errors:{},actionState:t.type,actionStateExtra:{}});case yt:case wt:return yn(yn({},e),{},{record:yn({},t.payload.data),editorState:En(t.payload.data,e.editorState.selectedCommunity),errors:{},actionState:t.type,actionStateExtra:{}});case gt:case Ct:case Mt:return yn(yn({},e),{},{record:yn(yn({},e.record),t.payload.data),editorState:En(t.payload.data,e.editorState.selectedCommunity),errors:yn({},t.payload.errors),actionState:t.type});case Rt:case Ot:case It:case kt:case _t:case Lt:case xt:return yn(yn({},e),{},{errors:yn({},t.payload.errors),actionState:t.type,actionStateExtra:{}});case $t:var r,n=yn({},e.record),i="restricted"===(null===(r=t.payload)||void 0===r||null===(r=r.community)||void 0===r||null===(r=r.access)||void 0===r?void 0:r.visibility);return"public"===n.access.record&&i&&(n=yn(yn({},e.record),{},{access:{files:"restricted",record:"restricted"}})),yn(yn({},e),{},{record:n,editorState:En(n,t.payload.community)});case Nt:return yn(yn({},e),{},{noINeedDOI:t.payload.noINeedDOI});default:return e}};function Rn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rn=function(){return!!e})()}var Pn=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return r=this,n=t,a=[].concat(u),n=(0,l.A)(n),e=(0,o.A)(r,Rn()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"handleChange",function(t,r){var n=r.value;(0,e.props.onManagedUnmanagedChange)("managed"===n,"notneeded"===n)}),(0,A.A)(e,"_render",function(e,t,r){return t&&r?c.createElement(E.A,{content:r,trigger:e}):e}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t,r,n=this.props,i=n.isManagedSelected,a=n.isNoNeedSelected,o=n.pidLabel,l=n.optionalDOItransitions,s=n.record,u=(null===s||void 0===s||null===(e=s.pids)||void 0===e||null===(e=e.doi)||void 0===e?void 0:e.identifier)||"",d=[gn.PUBLISHED,gn.NEW_VERSION_DRAFT].includes(s.status),p=""!==u,f=p&&"external"!==(null===s||void 0===s||null===(t=s.pids)||void 0===t||null===(t=t.doi)||void 0===t?void 0:t.provider)&&i;function m(e){var t;return f||d&&!(null!==l&&void 0!==l&&null!==(t=l.allowed_providers)&&void 0!==t&&t.includes(e))}var h=m("external"),b=m("not_needed"),y=null===l||void 0===l||null===(r=l.allowed_providers)||void 0===r?void 0:r.some(function(e){return!["external","not_needed"].includes(e)}),A=d?!y:p&&i,E=c.createElement(v.A.Field,{width:4},c.createElement(Cr.A,{label:g.M.t("Yes, I already have one"),"aria-label":g.M.t("Yes, I already have one"),name:"radioGroup",value:"unmanaged",disabled:h,checked:!i&&!a,onChange:this.handleChange})),w=c.createElement(v.A.Field,{width:3},c.createElement(Cr.A,{label:g.M.t("No, I need one"),"aria-label":g.M.t("No, I need one"),name:"radioGroup",value:"managed",disabled:A,checked:i&&!a,onChange:this.handleChange})),R=c.createElement(v.A.Field,{width:4},c.createElement(Cr.A,{label:g.M.t("No, I don't need one"),"aria-label":g.M.t("No, I don't need one"),name:"radioGroup",value:"notneeded",disabled:b,checked:a,onChange:this.handleChange}));return c.createElement(v.A.Group,{inline:!0},c.createElement(v.A.Field,null,g.M.t("Do you already have a {{pidLabel}} for this upload?",{pidLabel:o})),this._render(E,h,null===l||void 0===l?void 0:l.message),this._render(w,A,null===l||void 0===l?void 0:l.message),this._render(R,b,null===l||void 0===l?void 0:l.message))}}])}(c.Component);Pn.propTypes={isManagedSelected:p().bool.isRequired,isNoNeedSelected:p().bool.isRequired,onManagedUnmanagedChange:p().func.isRequired,pidLabel:p().string,optionalDOItransitions:p().object.isRequired,record:p().object.isRequired},Pn.defaultProps={pidLabel:void 0};var On=(0,u.connect)(function(e){return{record:e.deposit.record}},null)(Pn);function Cn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Cn=function(){return!!e})()}var Sn="external",kn=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Cn()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"onExternalIdentifierChanged",function(e){var t=r.props,n=t.form,i=t.fieldPath,a={identifier:e,provider:Sn};r.debounced&&r.debounced.cancel(),r.debounced=Gr()(function(){n.setFieldValue(i,a)},200),r.debounced()});var c=r.props,u=c.canBeManaged,d=c.canBeUnmanaged,p=c.record,f=c.field;r.canBeManagedAndUnmanaged=u&&d;var m=null===f||void 0===f?void 0:f.value,h=(null===m||void 0===m?void 0:m.provider)!==Sn,v=!0===(null===p||void 0===p?void 0:p.is_draft),b=null===m||void 0===m?void 0:m.identifier,y=!!(v&&b&&h)||void 0;return r.state={isManagedSelected:y},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t,r=this,n=this.state.isManagedSelected,i=this.props,a=i.btnLabelDiscardPID,o=i.btnLabelGetPID,l=i.canBeManaged,s=i.canBeUnmanaged,u=i.form,d=i.fieldPath,p=i.fieldLabel,f=i.isEditingPublishedRecord,h=i.managedHelpText,b=i.pidLabel,y=i.pidIcon,g=i.pidPlaceholder,A=i.required,E=i.unmanagedHelpText,w=i.pidType,R=i.field,P=i.record,O=this.props.doiDefaultSelection,C=R.value||{},S=C.identifier||"",k=C.provider||"",D="",I="";if(""!==S){var F=k===Sn;D=F?"":S,I=F?S:""}var x=""!==D,M=""!==((null===P||void 0===P||null===(e=P.pids)||void 0===e||null===(e=e.doi)||void 0===e?void 0:e.identifier)||""),j=""!==((null===(t=P.parent)||void 0===t||null===(t=t.pids)||void 0===t||null===(t=t.doi)||void 0===t?void 0:t.identifier)||""),T=""!==S,_=void 0===n?x||""===S&&"no"===O:n,z=un(u,d);return c.createElement(c.Fragment,null,c.createElement(v.A.Field,{required:A||j,error:!!z},c.createElement(m.FieldLabel,{htmlFor:d,icon:y,label:p})),this.canBeManagedAndUnmanaged&&c.createElement($r,{disabled:(f||x)&&(M||T),isManagedSelected:_,onManagedUnmanagedChange:function(e){e?u.setFieldValue("pids",{}):r.onExternalIdentifierChanged(""),u.setFieldError(d,!1),r.setState({isManagedSelected:e})},pidLabel:b}),l&&_&&c.createElement(fn,{disabled:M&&f,btnLabelDiscardPID:a,btnLabelGetPID:o,form:u,fieldPath:d,identifier:D,helpText:h,pidPlaceholder:g,pidType:w,pidLabel:b}),s&&!_&&c.createElement(vn,{identifier:I,onIdentifierChanged:function(e){r.onExternalIdentifierChanged(e)},form:u,fieldPath:d,pidPlaceholder:g,helpText:E}))}}])}(c.Component);function Dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Dn=function(){return!!e})()}kn.propTypes={field:p().object,form:p().object.isRequired,btnLabelDiscardPID:p().string.isRequired,btnLabelGetPID:p().string.isRequired,canBeManaged:p().bool.isRequired,canBeUnmanaged:p().bool.isRequired,fieldPath:p().string.isRequired,fieldLabel:p().string.isRequired,isEditingPublishedRecord:p().bool.isRequired,managedHelpText:p().string,pidIcon:p().string.isRequired,pidLabel:p().string.isRequired,pidPlaceholder:p().string.isRequired,pidType:p().string.isRequired,required:p().bool.isRequired,unmanagedHelpText:p().string,record:p().object.isRequired,doiDefaultSelection:p().object.isRequired},kn.defaultProps={managedHelpText:null,unmanagedHelpText:null,field:void 0};var In="external",Fn=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Dn()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"onExternalIdentifierChanged",function(e){var t=r.props,n=t.form,i=t.fieldPath,a={identifier:e,provider:In};r.debounced&&r.debounced.cancel(),r.debounced=Gr()(function(){n.setFieldValue(i,a)},200),r.debounced()}),(0,A.A)(r,"computeManagedUnmanaged",function(){var e,t,n=r.state,i=n.isManagedSelected,a=n.isNoNeedSelected,o=r.props,l=o.field,s=o.record,c=o.doiDefaultSelection,u=l.value||{},d=u.identifier||"",p=u.provider||"",f="",m="";if(""!==d){var h=p===In;f=h?"":d,m=h?d:""}var v=""!==f,b=""!==m,y=""!==((null===s||void 0===s||null===(e=s.pids)||void 0===e||null===(e=e.doi)||void 0===e?void 0:e.identifier)||""),g=""!==((null===(t=s.parent)||void 0===t||null===(t=t.pids)||void 0===t||null===(t=t.doi)||void 0===t?void 0:t.identifier)||""),A=s.is_draft,E=void 0===i?b||""===d&&"yes"===c:!i,w=void 0===i?v||""===d&&"no"===c:i;return{managedIdentifier:f,unmanagedIdentifier:m,hasDoi:y,hasParentDoi:g,_isManagedSelected:w,_isUnmanagedSelected:E,_isNoNeedSelected:void 0===a?!w&&!E||!0!==A&&""===d&&"not_needed"===c:a}}),(0,A.A)(r,"handleManagedUnmanagedChange",function(e,t){var n=r.props,i=n.form,a=n.fieldPath,o=n.required,l=n.setNoINeedDOI;e?(i.setFieldValue("pids",{}),o||l(!0)):t?(i.setFieldValue("pids",{}),l(!1)):(r.onExternalIdentifierChanged(""),l(!1)),i.setFieldError(a,!1),r.setState({isManagedSelected:e,isNoNeedSelected:t})});var c=r.props,u=c.canBeManaged,d=c.canBeUnmanaged,p=c.record,f=c.field;r.canBeManagedAndUnmanaged=u&&d;var m=null===f||void 0===f?void 0:f.value,h=!0===(null===p||void 0===p?void 0:p.is_draft),v=(null===m||void 0===m?void 0:m.identifier)&&(null===m||void 0===m?void 0:m.provider)!==In,b=!(!h||!v)||void 0;return r.state={isManagedSelected:b,isNoNeedSelected:void 0},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.required,r=e.setNoINeedDOI;this.computeManagedUnmanaged()._isManagedSelected?t||r(!0):r(!1)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.btnLabelDiscardPID,i=r.btnLabelGetPID,a=r.canBeManaged,o=r.canBeUnmanaged,l=r.form,s=r.fieldPath,u=r.fieldLabel,d=r.managedHelpText,p=r.pidLabel,f=r.pidIcon,h=r.pidPlaceholder,b=r.required,y=r.unmanagedHelpText,g=r.pidType,A=r.optionalDOItransitions,E=r.publishedDOI,w=this.computeManagedUnmanaged(),R=w.managedIdentifier,P=w.unmanagedIdentifier,O=w.hasParentDoi,C=w._isManagedSelected,S=w._isNoNeedSelected,k=un(l,s),D=(null===E||void 0===E?void 0:E.identifier)&&(null===E||void 0===E?void 0:E.provider)!==In,I=!!M()(A)||(null===A||void 0===A||null===(e=A.allowed_providers)||void 0===e?void 0:e.some(function(e){return!["external","not_needed"].includes(e)}));return c.createElement(c.Fragment,null,c.createElement(v.A.Field,{required:b||O,error:!!k},c.createElement(K.A,null,c.createElement(K.A.Column,{width:5},c.createElement(m.FieldLabel,{htmlFor:s,icon:f,label:u})),k&&c.createElement(K.A.Column,{width:11},c.createElement(m.FeedbackLabel,{fieldPath:s})))),this.canBeManagedAndUnmanaged&&c.createElement(On,{optionalDOItransitions:A,isManagedSelected:C,isNoNeedSelected:S,onManagedUnmanagedChange:this.handleManagedUnmanagedChange,pidLabel:p,required:b}),a&&C&&c.createElement(fn,{disabled:D||!I,btnLabelDiscardPID:n,btnLabelGetPID:i,form:l,fieldPath:s,identifier:R,helpText:d,pidPlaceholder:h,pidType:g,pidLabel:p}),o&&(!C||S)&&c.createElement(vn,{identifier:P,onIdentifierChanged:function(e){t.onExternalIdentifierChanged(e)},form:l,fieldPath:s,pidPlaceholder:h,helpText:y,disabled:S}))}}])}(c.Component);Fn.propTypes={field:p().object,form:p().object.isRequired,btnLabelDiscardPID:p().string.isRequired,btnLabelGetPID:p().string.isRequired,canBeManaged:p().bool.isRequired,canBeUnmanaged:p().bool.isRequired,fieldPath:p().string.isRequired,fieldLabel:p().string.isRequired,managedHelpText:p().string,pidIcon:p().string.isRequired,pidLabel:p().string.isRequired,pidPlaceholder:p().string.isRequired,pidType:p().string.isRequired,required:p().bool.isRequired,unmanagedHelpText:p().string,record:p().object.isRequired,doiDefaultSelection:p().object.isRequired,optionalDOItransitions:p().object.isRequired,publishedDOI:p().object,setNoINeedDOI:p().func.isRequired},Fn.defaultProps={managedHelpText:null,unmanagedHelpText:null,field:void 0,publishedDOI:{}};var xn=(0,u.connect)(function(e){var t;return{publishedDOI:null===(t=e.deposit.config)||void 0===t||null===(t=t.published_record)||void 0===t||null===(t=t.pids)||void 0===t?void 0:t.doi}},function(e){return{setNoINeedDOI:function(t){return e({type:Nt,payload:{noINeedDOI:t}})}}})(Fn);function Mn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mn=function(){return!!e})()}var jn=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Mn()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"validatePropValues",function(){var e=r.props,t=e.canBeManaged,n=e.canBeUnmanaged,i=e.fieldPath;if(!t&&!n)throw Error("".concat(i," must be managed, unmanaged or both."))}),r.validatePropValues(),r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.required?kn:xn;return c.createElement(f.FastField,(0,n.A)({name:t,component:r},this.props))}}])}(c.Component);jn.propTypes={btnLabelDiscardPID:p().string,btnLabelGetPID:p().string,canBeManaged:p().bool,canBeUnmanaged:p().bool,fieldPath:p().string.isRequired,fieldLabel:p().string.isRequired,isEditingPublishedRecord:p().bool.isRequired,managedHelpText:p().string,pidIcon:p().string,pidLabel:p().string.isRequired,pidPlaceholder:p().string,pidType:p().string.isRequired,required:p().bool,unmanagedHelpText:p().string,record:p().object.isRequired,doiDefaultSelection:p().object.isRequired,optionalDOItransitions:p().object.isRequired},jn.defaultProps={btnLabelDiscardPID:"Discard",btnLabelGetPID:"Reserve",canBeManaged:!0,canBeUnmanaged:!0,managedHelpText:null,pidIcon:"barcode",pidPlaceholder:"",required:!1,unmanagedHelpText:null};var Tn=r(98871),_n=r(73083),zn=r(27089),qn=function(e){var t=e.updateQueryFilters,r=e.userSelectionFilters,n=e.filterValue,i=e.label,a=e.title,o=function(){t(r.concat([n]))},l=function(e){var t=e.filter(function(e){return e[1]===n[1]}).length>0;return t}(r);return l?c.createElement(_n.A.Item,{name:i,active:!0,as:R.A,primary:!0,onClick:o},a):c.createElement(_n.A.Item,{name:i,onClick:o},a)};qn.propTypes={updateQueryFilters:p().func.isRequired,userSelectionFilters:p().array.isRequired,filterValue:p().array.isRequired,label:p().string.isRequired,title:p().string.isRequired};var Ln=r(23848),Nn=(0,Tn.Q2)(function(e){var t=e.currentResultsState,r=e.serializeLicenses,i=r||function(e){return{title:e.title_l10n,description:e.description_l10n,id:e.id}};return c.createElement(f.FastField,{name:"selectedLicense"},function(e){var r=e.form,a=r.values,o=r.setFieldValue;return c.createElement(Ln.A.Group,null,t.data.hits.map(function(e){var t=e.title_l10n,r=e.description_l10n;return c.createElement(Ln.A,{key:t,onClick:function(){return o("selectedLicense",i(e))},className:"license-item mb-15"},c.createElement(Cr.A,(0,n.A)({checked:me()(a,"selectedLicense.title")===t,onChange:function(){return o("selectedLicense",i(e))}},!r&&{className:"mt-0"})),c.createElement(Ln.A.Content,{className:"license-item-content"},c.createElement(y.A,{size:"small",className:"mt-0"},t),r&&c.createElement(Ln.A.Description,{className:"license-item-description"},r)))}))})}),Bn=r(92257);function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Hn=function(){return!!e})()}var Wn=function(e){var t=e.updateQueryState,r=e.currentQueryState,n=e.autofocus,i=e.actionProps,a=e.placeholder,o=(0,c.useState)(""),l=(0,be.A)(o,2),s=l[0],u=l[1],d=function(){r.filters[0]=["tags","all"],r.queryString=s,t(r)};return c.createElement(Yn,{actionProps:i,autofocus:n,executeSearch:d,onBtnSearchClick:d,onInputChange:function(e){u(e)},onKeyPress:function(e){"Enter"===e.key&&d()},placeholder:a,queryString:s})};Wn.propTypes={actionProps:p().object,autofocus:p().bool,currentQueryState:p().object,updateQueryState:p().func,placeholder:p().string},Wn.defaultProps={actionProps:null,autofocus:!1,placeholder:"",currentQueryState:null,updateQueryState:null};var Yn=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Hn()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.props.autofocus&&this.focusInput&&this.focusInput.focus()}},{key:"render",value:function(){var e=this,t=this.props,r=t.actionProps,n=t.onBtnSearchClick,i=t.onInputChange,a=t.onKeyPress,o=t.placeholder,l=t.queryString;return c.createElement(Bn.A,{action:Vn({content:"Search",onClick:n},r),fluid:!0,placeholder:o||"Type something",onChange:function(e,t){var r=t.value;i(r)},value:l,onKeyPress:a,ref:function(t){e.focusInput=t}})}}])}(c.Component);Yn.propTypes={actionProps:p().object,autofocus:p().bool,onBtnSearchClick:p().func,onInputChange:p().func,onKeyPress:p().func,placeholder:p().string,queryString:p().string},Yn.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,placeholder:"",queryString:""};var Gn=(0,Tn.Q2)(Wn);function Qn(e){var t=e.switchToCustom;return c.createElement(kr.A,{basic:!0,content:c.createElement("p",null,g.M.t("Did not find your license? "),c.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),t()}},g.M.t("Add a custom license.")))})}function Kn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kn=function(){return!!e})()}Qn.propTypes={switchToCustom:p().func.isRequired};var Xn={"SearchFilters.Toggle":qn},Zn="standard",Jn="custom",$n="add",ei=Re.Ik().shape({selectedLicense:Re.Ik().shape({title:Re.Yj().required(g.M.t("Title is a required field.")),link:Re.Yj().url(g.M.t("Link must be a valid URL"))})}),ti=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Kn()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"state",{open:!1,mode:Zn}),(0,A.A)(e,"openModal",function(){e.setState({open:!0})}),(0,A.A)(e,"closeModal",function(){e.setState({open:!1})}),(0,A.A)(e,"setMode",function(t){e.setState({mode:t})}),(0,A.A)(e,"onSubmit",function(t,r){var n=e.props.onLicenseChange;e.closeModal(),e.setMode(e.mode),n(t.selectedLicense),r.resetForm()}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.mode,n=t.trigger,i=t.action,a=t.searchConfig,o=t.serializeLicenses,l=t.initialLicense,s=this.state,u=s.open,d=s.mode,p=l||{title:"",description:"",id:null,link:""},h=new Tn.HZ(a.searchApi);return c.createElement(f.Formik,{initialValues:{selectedLicense:p},onSubmit:this.onSubmit,validationSchema:ei,validateOnChange:!1,validateOnBlur:!1},function(t){var l=t.handleSubmit,s=t.resetForm;return c.createElement(we.A,{role:"dialog",centered:!1,onOpen:function(){e.openModal(),e.setMode(r)},open:u,trigger:c.cloneElement(n,{"aria-expanded":u,"aria-haspopup":"dialog"}),onClose:function(){s(),e.setMode(Zn),e.closeModal()},closeIcon:!0,closeOnDimmerClick:!1},c.createElement(we.A.Header,{as:"h2",className:"pt-10 pb-10"},i===$n?g.M.t("Add {{mode}} license",{mode:d}):g.M.t("Change {{mode}} license",{mode:d})),c.createElement(we.A.Content,null,d===Zn&&c.createElement(k.OverridableContext.Provider,{value:Xn},c.createElement(Tn.gz,{searchApi:h,appName:"licenses",urlHandlerApi:{enabled:!1},initialQueryState:a.initialQueryState},c.createElement(K.A,null,c.createElement(K.A.Row,null,c.createElement(K.A.Column,{width:8,floated:"left",verticalAlign:"middle"},c.createElement(Gn,{placeholder:g.M.t("Search for licenses"),autofocus:!0,actionProps:{icon:"search",content:null,className:"search"}})),c.createElement(K.A.Column,{width:8,textAlign:"right",floated:"right"},c.createElement(_n.A,{compact:!0},c.createElement(Tn.lM,{title:g.M.t("Recommended"),label:g.M.t("recommended"),filterValue:["tags","recommended"]}),c.createElement(Tn.lM,{title:g.M.t("All"),label:g.M.t("all"),filterValue:["tags","all"]}),c.createElement(Tn.lM,{title:g.M.t("Data"),label:g.M.t("data"),filterValue:["tags","data"]}),c.createElement(Tn.lM,{title:g.M.t("Software"),label:g.M.t("software"),filterValue:["tags","software"]})))),c.createElement(K.A.Row,{verticalAlign:"middle"},c.createElement(K.A.Column,{width:16,className:"pb-0"},c.createElement(Tn.oK,null,c.createElement(Tn.i6,null),c.createElement(Tn.$D,null),c.createElement(Nn,o&&{serializeLicenses:o})),c.createElement(zn.A,{textAlign:"center",className:"rel-mb-1"},c.createElement(Tn.dK,null))),c.createElement(K.A.Column,{width:16,textAlign:"center",className:"pt-0 pb-0"},c.createElement(Qn,{switchToCustom:function(){s(),e.setMode(Jn)}})))))),d===Jn&&c.createElement(v.A,null,c.createElement(m.TextField,{label:g.M.t("Title"),fieldPath:"selectedLicense.title",required:!0,autoFocus:!0}),c.createElement(m.TextAreaField,{fieldPath:"selectedLicense.description",label:g.M.t("Description")}),c.createElement(m.TextField,{label:g.M.t("Link"),fieldPath:"selectedLicense.link"}))),c.createElement(we.A.Actions,null,c.createElement(R.A,{name:"cancel",onClick:function(){s(),e.setMode(r),e.closeModal()},icon:"remove",content:g.M.t("Cancel"),floated:"left"}),c.createElement(R.A,{name:"submit",onClick:function(e){return l(e)},primary:!0,icon:"checkmark",content:i===$n?g.M.t("Add license"):g.M.t("Change license")})))})}}])}(c.Component);ti.propTypes={mode:p().oneOf(["standard","custom"]).isRequired,action:p().oneOf(["add","edit"]).isRequired,initialLicense:p().shape({id:p().string,title:p().string,description:p().string}),trigger:p().object.isRequired,onLicenseChange:p().func.isRequired,searchConfig:p().shape({searchApi:p().shape({axios:p().shape({headers:p().object})}).isRequired,initialQueryState:p().shape({filters:p().arrayOf(p().array)}).isRequired}).isRequired,serializeLicenses:p().func},ti.defaultProps={initialLicense:void 0,serializeLicenses:void 0};var ri=r(92516),ni=r.n(ri),ii=function(e){var t=e.license,r=e.moveLicense,n=e.replaceLicense,i=e.removeLicense,a=e.searchConfig,o=e.serializeLicenses,l=c.useRef(null),s=(0,Ne.i)({item:{index:t.index,type:"license"}}),u=(0,be.A)(s,3),d=u[1],p=u[2],f=(0,Be.H)({accept:"license",hover:function(e,n){if(l.current){var i=e.index,a=t.index;i!==a&&n.isOver({shallow:!0})&&(r(i,a),e.index=a)}},collect:function(e){return{hidden:e.isOver({shallow:!0})}}}),m=(0,be.A)(f,2),h=m[0].hidden;return(0,m[1])(l),c.createElement(Ve.o,{innerRef:l,key:t.key},c.createElement(j.A.Item,{key:t.key,className:h?"deposit-drag-listitem hidden":"deposit-drag-listitem"},c.createElement(j.A.Content,{floated:"right"},c.createElement(R.A,{size:"mini",type:"button",onClick:function(){i(t.index)}},g.M.t("Remove")),c.createElement(ti,{searchConfig:a,onLicenseChange:function(e){n(t.index,e)},mode:t.type,initialLicense:t.initial,action:"edit",trigger:c.createElement(R.A,{size:"mini",primary:!0,type:"button"},g.M.t("Edit")),serializeLicenses:o})),c.createElement(Ve.o,{innerRef:d},c.createElement(j.A.Icon,{name:"bars",className:"drag-anchor"})),c.createElement(Ve.o,{innerRef:p},c.createElement(j.A.Content,null,c.createElement(j.A.Header,null,t.title),t.description&&c.createElement(j.A.Description,null,ni()(t.description,{length:300})),t.link&&c.createElement("span",null,c.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},t.description&&c.createElement("span",null,"\xa0"),g.M.t("Read more")))))))};function ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ai(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function li(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,si()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function si(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(si=function(){return!!e})()}ii.propTypes={license:p().object.isRequired,moveLicense:p().func.isRequired,replaceLicense:p().func.isRequired,removeLicense:p().func.isRequired,searchConfig:p().object.isRequired,serializeLicenses:p().func},ii.defaultProps={serializeLicenses:void 0};var ci=(0,a.A)(function e(t,r,n){(0,i.A)(this,e),this.index=n,this.type=r.id?"standard":"custom",this.key=r.id||r.title,this.initial="custom"===this.type?r:null;var a=ge()(t,r.id?function(e){return e.id===r.id}:function(e){return e.title===r.title})||{};this.description=a.description_l10n||r.description||"",this.title=a.title_l10n||r.title||"",this.link=a.props&&a.props.url||a.link||r.props&&r.props.url||r.link||""}),ui=function(e){function t(){return(0,i.A)(this,t),li(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.label,r=e.labelIcon,n=e.fieldPath,i=e.uiFieldPath,a=e.form,o=a.values,l=a.errors,s=a.initialErrors,u=a.initialValues,d=e.move,p=e.push,h=e.remove,b=e.replace,y=e.required,A=e.searchConfig,E=e.serializeLicenses,P=e.disabled,O=(0,f.getIn)(o,i,[]),C=(0,f.getIn)(o,n,[]),S=(0,f.getIn)(u,n,[]),D=(0,f.getIn)(l,n,null),I=(0,f.getIn)(s,n,null),F=D||C===S&&I,x="";return F&&(x="string"!==typeof F?F.severity:"error"),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.LicenseField.Container",className:x,labelIcon:r,label:t,required:y},c.createElement(ve.Q,{backend:he.t2},c.createElement(v.A.Field,{required:y,disabled:P,className:x},c.createElement(m.FieldLabel,{htmlFor:n,icon:r,label:t}),c.createElement(j.A,null,(0,f.getIn)(o,n,[]).map(function(e,t){var r=new ci(O,e,t);return c.createElement(ii,{key:r.key,license:r,moveLicense:d,replaceLicense:b,removeLicense:h,searchConfig:A,serializeLicenses:E})})),c.createElement(ti,{searchConfig:A,trigger:c.createElement(R.A,{type:"button",key:"standard",icon:!0,labelPosition:"left",className:x,disabled:P},c.createElement(w.A,{name:"add"}),g.M.t("Add standard")),onLicenseChange:function(e){p(e)},mode:"standard",action:"add",serializeLicenses:E}),c.createElement(ti,{searchConfig:A,trigger:c.createElement(R.A,{type:"button",key:"custom",icon:!0,labelPosition:"left",className:x,disabled:P},c.createElement(w.A,{name:"add"}),g.M.t("Add custom")),onLicenseChange:function(e){p(e)},mode:"custom",action:"add"}),F&&c.createElement(m.FeedbackLabel,{fieldPath:n}))))}}])}(c.Component);ui.propTypes=oi({uiFieldPath:p().string,form:p().object.isRequired,move:p().func.isRequired,push:p().func.isRequired,remove:p().func.isRequired,replace:p().func.isRequired,required:p().bool.isRequired,searchConfig:p().object.isRequired,serializeLicenses:p().func},m.fieldCommonProps),ui.defaultProps={labelIcon:void 0,uiFieldPath:void 0,serializeLicenses:void 0};var di=function(e){function t(){return(0,i.A)(this,t),li(this,t,arguments)}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props.fieldPath;return c.createElement(f.FieldArray,{name:t,component:function(t){return c.createElement(ui,(0,n.A)({},t,e.props))}})}}])}(c.Component);di.propTypes=oi({searchConfig:p().object.isRequired,required:p().bool,serializeLicenses:p().func,uiFieldPath:p().string},m.fieldCommonProps),di.defaultProps={label:g.M.t("Licenses"),uiFieldPath:"ui.rights",labelIcon:"drivers license",required:!1,serializeLicenses:void 0};var pi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.LicenseField",di);function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mi=function(){return!!e})()}var hi=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,mi()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.helpText,n=e.label,i=e.labelIcon,a=e.placeholder;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.PublicationDateField.Container",fieldPath:t,helpText:r,placeholder:a,icon:i,label:n},c.createElement(m.TextField,{fieldPath:t,helpText:r,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:i,label:n}),placeholder:a}))}}])}(c.Component);hi.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({helpText:p().string,placeholder:p().string},m.mandatoryFieldCommonProps),hi.defaultProps={helpText:g.M.t("In case your upload was already published elsewhere, please use the date of the first publication. Format: YYYY-MM-DD, YYYY-MM, or YYYY. For intervals use DATE/DATE, e.g. 1939/1945."),label:g.M.t("Publication date"),labelIcon:"calendar",placeholder:g.M.t("YYYY-MM-DD or YYYY-MM-DD/YYYY-MM-DD for intervals. MM and DD are optional.")};var vi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.PublicationDateField",hi);function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(yi=function(){return!!e})()}var gi=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,yi()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.placeholder,a=e.disabled,o=e.required,l=e.helpText;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.PublisherField.Container",fieldPath:t,icon:n,label:r,placeholder:i,disabled:a,required:o,helpText:l},c.createElement(m.TextField,{fieldPath:t,helpText:l,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),placeholder:i,disabled:a,required:o}))}}])}(c.Component);gi.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({fieldPath:p().string.isRequired,placeholder:p().string},m.fieldCommonProps),gi.defaultProps={label:g.M.t("Publisher"),labelIcon:"building outline",placeholder:g.M.t("Publisher"),helpText:g.M.t("The publisher is used to formulate the citation, so consider the prominence of the role.")};var Ai=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.PublisherField",gi),Ei={reference:""};function wi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ri=function(){return!!e})()}var Pi=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Ri()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.required,a=e.disabled,o=e.showEmptyValue,l=e.helpText,s=e.addButtonLabel,u=e.optimized;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.ReferencesField.Container",defaultNewValue:Ei,required:i,disabled:a,showEmptyValue:o,helpText:l,addButtonLabel:s,optimized:u},c.createElement(m.ArrayField,{addButtonLabel:s,defaultNewValue:Ei,fieldPath:t,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),required:i,disabled:a,showEmptyValue:o,helpText:l},function(e){var r=e.arrayHelpers,n=e.indexPath,i="".concat(t,".").concat(n);return c.createElement(m.GroupField,{optimized:u},c.createElement(m.TextField,{fieldPath:"".concat(i,".reference"),label:g.M.t("Reference string"),required:!0,width:16,optimized:u}),c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:"close",onClick:function(){return r.remove(n)}})))}))}}])}(c.Component);Pi.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({showEmptyValue:p().bool,addButtonLabel:p().string,optimized:p().bool},m.fieldCommonProps),Pi.defaultProps={label:g.M.t("References"),labelIcon:"bookmark",required:!1,showEmptyValue:!1,addButtonLabel:g.M.t("Add reference"),optimized:!0};var Oi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.ReferencesField",Pi),Ci={scheme:"",identifier:"",resource_type:"",relation_type:""},Si=["fieldPath","label","labelIcon","options","placeholder","helpText","schema","optimized"];function ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ki(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ii(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ii=function(){return!!e})()}var Fi=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Ii()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"groupErrors",function(e,t){var r=me()(e,t);return r?{content:r}:null}),(0,A.A)(e,"_label",function(e){return e.type_name+(e.subtype_name?" / "+e.subtype_name:"")}),(0,A.A)(e,"createOptions",function(t){return t.map(function(t){return Di(Di({},t),{},{label:e._label(t)})}).sort(function(e,t){return e.label.localeCompare(t.label)}).map(function(e){return{value:e.id,icon:e.icon,text:e.label}})}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,i=e.labelIcon,a=e.options,o=e.placeholder,l=e.helpText,s=e.schema,u=e.optimized,d=(0,Z.A)(e,Si),p=this.createOptions(a),f="record"===s?l:void 0,h="record"===s?i:void 0;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.ResourceTypeField.Container",fieldPath:t,labelIcon:h,label:r,"aria-label":r,options:p,placeholder:o,helpText:f,optimized:u},c.createElement(m.SelectField,(0,n.A)({fieldPath:t,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:h,label:r}),optimized:u,"aria-label":r,options:p,selectOnBlur:!1,helpText:f,placeholder:o,required:!0},d)))}}])}(c.Component);Fi.propTypes=Di({labelclassname:p().string,options:p().arrayOf(p().shape({icon:p().string,type_name:p().string,subtype_name:p().string,id:p().string})).isRequired,schema:p().oneOf(["record","relatedWork"]).isRequired,optimized:p().bool},m.mandatoryFieldCommonProps),Fi.defaultProps={label:g.M.t("Resource type"),labelIcon:"tag",labelclassname:"field-label-class",schema:"record",optimized:!0};var xi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.ResourceTypeField",Fi);function Mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ji=function(){return!!e})()}var Ti=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ji()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.required,a=e.disabled,o=e.options,l=e.showEmptyValue,s=e.helpText,u=e.addButtonLabel,d=e.optimized;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.RelatedWorksField.Container",required:i,disabled:a,showEmptyValue:l,defaultNewValue:Ci,labelIcon:n,label:r,helpText:s,addButtonLabel:u,optimized:d},c.createElement(m.ArrayField,{addButtonLabel:u,defaultNewValue:Ci,fieldPath:t,helpText:s,label:r,labelIcon:n,required:i,disabled:a,showEmptyValue:l},function(e){var r=e.arrayHelpers,n=e.indexPath,i="".concat(t,".").concat(n);return c.createElement(m.GroupField,{optimized:d},c.createElement(m.SelectField,{clearable:!0,fieldPath:"".concat(i,".relation_type"),label:g.M.t("Relation"),"aria-label":g.M.t("Relation"),optimized:d,options:o.relations,placeholder:{role:"option",content:"Select relation..."},required:!0,width:3}),c.createElement(m.TextField,{fieldPath:"".concat(i,".identifier"),label:g.M.t("Identifier"),required:!0,width:4}),c.createElement(m.SelectField,{clearable:!0,fieldPath:"".concat(i,".scheme"),label:g.M.t("Scheme"),"aria-label":g.M.t("Scheme"),optimized:d,options:o.scheme,required:!0,width:2}),c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.RelatedWorksField.ResourceType",clearable:!0,options:o.resource_type,width:7,optimized:d},c.createElement(xi,{optimized:d,clearable:!0,fieldPath:"".concat(i,".resource_type"),options:o.resource_type,width:7,labelclassname:"small field-label-class",schema:"relatedWork"})),c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:"close",onClick:function(){return r.remove(n)}})))}))}}])}(c.Component);Ti.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({options:p().object.isRequired,showEmptyValue:p().bool,addButtonLabel:p().string,optimized:p().bool},m.fieldCommonProps),Ti.defaultProps={label:g.M.t("Related works"),labelIcon:"barcode",required:void 0,showEmptyValue:!1,helpText:g.M.t("Specify identifiers of related works. Supported identifiers include DOI, Handle, ARK, PURL, ISSN, ISBN, PubMed ID, PubMed Central ID, ADS Bibliographic Code, arXiv, Life Science Identifiers (LSID), EAN-13, ISTC, URNs, and URLs."),addButtonLabel:g.M.t("Add related work"),optimized:!0};var _i=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.RelatedWorksField",Ti),zi=["fieldPath","label","labelIcon","limitToOptions","required","disabled","helpText","placeholder","noQueryMessage"];function qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Li(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Li=function(){return!!e})()}var Ni=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Li()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"state",{limitTo:"all"}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.fieldPath,i=t.label,a=t.labelIcon,o=t.limitToOptions,l=t.required,s=t.disabled,u=t.helpText,d=t.placeholder,p=t.noQueryMessage,f=(0,Z.A)(t,zi),h=this.state.limitTo,b=o.length>2,y=b?11:16,A=c.createElement(m.FieldLabel,{htmlFor:r,icon:a,label:i});return c.createElement(k.default,(0,n.A)({id:"InvenioRdmRecords.DepositForm.SubjectsField.Container",fieldPath:r,label:i,labelIcon:a,limitToOptions:o,required:l,disabled:s,noQueryMessage:p,helpText:u,placeholder:d},f),c.createElement(m.GroupField,{className:"main-group-field"},b&&c.createElement(v.A.Field,{width:5,className:"subjects-field"},A,c.createElement(m.GroupField,null,c.createElement(v.A.Field,{width:8,style:{marginBottom:"auto",marginTop:"auto"},className:"p-0"},g.M.t("Suggest from")),c.createElement(v.A.Dropdown,{className:"p-0",defaultValue:o[0].value,fluid:!0,"aria-label":g.M.t("Suggest from"),onChange:function(t,r){return e.setState({limitTo:r.value})},options:o,selection:!0,width:8}))),c.createElement(m.SubjectAutocompleteDropdown,(0,n.A)({},f,{noQueryMessage:p,fieldPath:r,label:!b&&A,limitTo:h,width:y,required:l,disabled:s,helpText:u,placeholder:d}))))}}])}(c.Component);Ni.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({limitToOptions:p().array.isRequired,fieldPath:p().string.isRequired,placeholder:p().string,noQueryMessage:p().string},m.fieldCommonProps),Ni.defaultProps={label:g.M.t("Keywords and subjects"),labelIcon:"tag",placeholder:g.M.t("Search for a subject by name"),noQueryMessage:g.M.t("Search for subjects...")};var Bi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.SubjectsField",Ni),Ui={lang:"",title:"",type:"alternative-title"};function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Hi=function(){return!!e})()}var Wi=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Hi()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.options,n=e.recordUI,i=e.helpText,a=e.addButtonLabel,o=e.optimized;return c.createElement(m.ArrayField,{addButtonLabel:a,helpText:i,defaultNewValue:Ui,fieldPath:t,className:"additional-titles"},function(e){var i,a=e.arrayHelpers,l=e.indexPath,s="".concat(t,".").concat(l),u=null!==n&&void 0!==n&&n.additional_titles&&null!==(i=n.additional_titles[l])&&void 0!==i&&i.lang?[n.additional_titles[l].lang]:[];return c.createElement(m.GroupField,{fieldPath:t,optimized:o},c.createElement(m.TextField,{fieldPath:"".concat(s,".title"),label:g.M.t("Additional title"),required:!0,width:5}),c.createElement(m.SelectField,{fieldPath:"".concat(s,".type"),label:g.M.t("Type"),optimized:o,options:r.type,required:!0,width:5}),c.createElement(re,{serializeSuggestions:function(e){return e.map(function(e){return{text:e.title_l10n,value:e.id,fieldPathPrefix:e.id}})},initialOptions:u,fieldPath:"".concat(s,".lang"),label:g.M.t("Language"),multiple:!1,placeholder:g.M.t("Select language"),labelIcon:null,clearable:!0,selectOnBlur:!1,width:5}),c.createElement(v.A.Field,null,c.createElement(R.A,{"aria-label":g.M.t("Remove field"),className:"close-btn",icon:"close",onClick:function(){return a.remove(l)}})))})}}])}(c.Component);Wi.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}),recordUI:p().object,addButtonLabel:p().string,optimized:p().bool},m.fieldCommonProps),Wi.defaultProps={options:void 0,recordUI:void 0,addButtonLabel:g.M.t("Add titles"),optimized:!0};var Yi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.AdditionalTitlesField",Wi);function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qi=function(){return!!e})()}var Ki=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Qi()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.options,n=e.label,i=e.labelIcon,a=e.recordUI,o=e.helpText,l=e.placeholder,s=e.optimized;return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.TitlesField.Container",options:r,recordUI:a,helpText:o,placeholder:l,optimized:s},c.createElement(c.Fragment,null,c.createElement(m.TextField,{fieldPath:t,helpText:o,placeholder:l,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:i,label:n}),required:!0,className:"title-field",optimized:s}),c.createElement(Yi,{options:r,recordUI:a,fieldPath:"metadata.additional_titles",optimized:s})))}}])}(c.Component);Ki.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({options:p().shape({type:p().arrayOf(p().shape({icon:p().string,text:p().string,value:p().string})),lang:p().arrayOf(p().shape({text:p().string,value:p().string}))}).isRequired,recordUI:p().object},m.mandatoryFieldCommonProps),Ki.defaultProps={label:g.M.t("Title"),labelIcon:"book",required:!1,recordUI:void 0,optimized:!0};var Xi=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.TitlesField",Ki);function Zi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ji=function(){return!!e})()}var $i=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,Ji()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon,i=e.placeholder,a=e.disabled,o=e.required,l=c.createElement("span",null,g.M.t("Mostly relevant for software and dataset uploads. A semantic version string is preferred see"),c.createElement("a",{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}," ","semver.org"),g.M.t(", but any version string is accepted."));return c.createElement(k.default,{id:"InvenioRdmRecords.DepositForm.VersionField.Container",fieldPath:t,helpText:l,labelIcon:n,label:r,placeholder:i,disabled:a,required:o},c.createElement(m.TextField,{fieldPath:t,helpText:l,label:c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),placeholder:i,disabled:a,required:o}))}}])}(c.Component);$i.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({fieldPath:p().string.isRequired,placeholder:p().string},m.fieldCommonProps),$i.defaultProps={label:g.M.t("Version"),labelIcon:"code branch",placeholder:""};var ea=(0,m.showHideOverridable)("InvenioRdmRecords.DepositForm.VersionField",$i);function ta(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ta=function(){return!!e})()}var ra=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ta()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.label,n=e.labelIcon;return c.createElement(v.A.Field,{id:t,name:t},c.createElement(m.FieldLabel,{htmlFor:t,icon:n,label:r}),c.createElement(kr.A,{size:"massive",tertiary:!0,textAlign:"center"},g.M.t("Coming soon")))}}])}(c.Component);ra.propTypes={fieldPath:p().string.isRequired,label:p().string,labelIcon:p().string},ra.defaultProps={label:void 0,labelIcon:void 0};var na=r(825),ia=r(25738),aa=r(6020),oa=r(90991),la=r(964),sa=r(86731),ca=r(37552),ua=r(28614);function da(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,pa()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function pa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pa=function(){return!!e})()}var fa=function(e){function t(e,r){var n,a;return(0,i.A)(this,t),a=da(this,t,[e]),(0,A.A)(a,"isUserFacing",void 0),(0,A.A)(a,"file",void 0),(0,A.A)(a,"isRestriction",!0),a.isUserFacing=null===(n=null===r||void 0===r?void 0:r.isUserFacing)||void 0===n||n,null!==r&&void 0!==r&&r.file&&(a.file=r.file),a}return(0,s.A)(t,e),(0,a.A)(t)}((0,ua.A)(Error)),ma=function(e){function t(e,r){var n,a;return(0,i.A)(this,t),a=da(this,t,[e]),(0,A.A)(a,"file",void 0),(0,A.A)(a,"partNumber",void 0),(0,A.A)(a,"isUserFacing",void 0),a.isUserFacing=null!==(n=null===r||void 0===r?void 0:r.isUserFacing)&&void 0!==n&&n,null!==r&&void 0!==r&&r.file&&(a.file=r.file),null!==r&&void 0!==r&&r.partNumber&&(a.partNumber=r.partNumber),a}return(0,s.A)(t,e),(0,a.A)(t)}((0,ua.A)(Error)),ha=function(e){function t(e,r){var n,a;return(0,i.A)(this,t),a=da(this,t,[e]),(0,A.A)(a,"file",void 0),(0,A.A)(a,"partNumber",void 0),(0,A.A)(a,"isUserFacing",void 0),a.isUserFacing=null!==(n=null===r||void 0===r?void 0:r.isUserFacing)&&void 0!==n&&n,null!==r&&void 0!==r&&r.file&&(a.file=r.file),null!==r&&void 0!==r&&r.partNumber&&(a.partNumber=r.partNumber),a}return(0,s.A)(t,e),(0,a.A)(t)}((0,ua.A)(Error));function va(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ba(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ba(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Aa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Aa=function(){return!!e})()}function Ea(e,t,r){wa(e,t),t.set(e,r)}function wa(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ra(e,t){return e.get(Pa(e,t))}function Pa(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Oa={allowedMetaFields:null,limit:3,getTemporarySecurityCredentials:!1,getUploadParameters:null,shouldUseMultipart:null,uploadPartBytes:null,retryDelays:[0,1e3,3e3,5e3],companionHeaders:{},checkPartIntegrity:!1},Ca=new WeakMap,Sa=new WeakMap,ka=new WeakMap,Da=new WeakMap,Ia=new WeakMap,Fa=new WeakMap,xa=new WeakMap,Ma=new WeakMap,ja=new WeakSet;function Ta(e){return _a.apply(this,arguments)}function _a(){return(_a=(0,ft.A)(ht().mark(function e(t){var r,n,i;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.arrayBuffer();case 1:return r=e.sent,e.next=2,(0,la.Fx)(new Uint8Array(r));case 2:return n=e.sent,i=n.match(/.{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16))}).join(""),e.abrupt("return",btoa(i));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}const za=function(e){function t(e,r){var n,a,s,c;return(0,i.A)(this,t),a=this,s=t,c=[e,ga(ga({},Oa),{},{fieldName:r.bundle?"files[]":"file"},r)],s=(0,l.A)(s),function(e,t){wa(e,t),t.add(e)}(n=(0,o.A)(a,Aa()?Reflect.construct(s,c||[],(0,l.A)(a).constructor):s.apply(a,c)),ja),Ea(n,Ca,1e4),Ea(n,Sa,function(e,t){var r=t.bytesTotal>0?Math.floor(t.bytesUploaded/t.bytesTotal*100):0;n.opts.setUploadProgress(e,r)}),Ea(n,ka,function(e){e.progress.uploadComplete||(e.links=e.meta.links,n.opts.abortUpload(e))}),Ea(n,Da,function(e){n.uppy.cancelAll()}),Ea(n,Ia,function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.opts.saveAndFetchDraft(n.draftRecord);case 1:n.draftRecord=e.sent;case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Ea(n,Fa,function(e,t){if(t.uploadURL)return n.completeMultipartUpload(e)}),Ea(n,xa,function(){var e=n.uppy.getState().capabilities;n.uppy.setState({capabilities:ga(ga({},e),{},{resumableUploads:!1})})}),Ea(n,Ma,function(e){return function(){var t=(0,ft.A)(ht().mark(function t(r,i){var a,o,l,s;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,(0,ca.G)(r,ga(ga({},i),{},{shouldRetry:n.opts.shouldRetry,onTimeout:function(t){var r=Math.ceil(t/1e3),i=new Error(n.i18n("uploadStalled",{seconds:r}));n.uppy.emit("upload-stalled",i,[e])}}));case 1:return a=t.sent,o=JSON.parse(a.responseText),t.abrupt("return",o);case 2:if(t.prev=2,"AbortError"!==(s=t.catch(0)).name){t.next=3;break}return t.abrupt("return",void 0);case 3:throw l=s.request,n.uppy.emit("upload-error",n.uppy.getFile(e.id),s,l),s;case 4:case"end":return t.stop()}},t,null,[[0,2]])}));return function(e,r){return t.apply(this,arguments)}}()}),n.type="uploader",n.draftRecord=n.opts.draftRecord,n.id=n.opts.id||"RDMUppyUploaderPlugin",n.getChunkSize=n.opts.getChunkSize||n.getChunkSize,n.shouldUseMultipart=n.opts.shouldUseMultipart||n.shouldUseMultipart,n.isTransferSupported=n.opts.isTransferSupported,n.transferType=n.opts.transferType,n.i18nInit(),function(e,t,r,n){var i=(0,oa.A)((0,l.A)(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof i?function(e){return i.apply(r,e)}:i}(t,"setOptions",n,3)([{getChunkSize:n.getChunkSize.bind(n),shouldUseMultipart:n.shouldUseMultipart.bind(n),uploadPartBytes:n.uploadPartBytes.bind(n)}]),n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"install",value:function(){sa.A.prototype.install.apply(this),this.uppy.on("upload-success",Ra(Fa,this)),this.uppy.on("upload-progress",Ra(Sa,this)),this.uppy.on("file-removed",Ra(ka,this)),this.uppy.on("complete",Ra(Da,this)),this.uppy.addPreProcessor(Ra(Ia,this)),this.uppy.addPreProcessor(Ra(xa,this))}},{key:"uninstall",value:function(){sa.A.prototype.uninstall.apply(this),this.uppy.off("upload-success",Ra(Fa,this)),this.uppy.off("upload-progress",Ra(Sa,this)),this.uppy.off("file-removed",Ra(ka,this)),this.uppy.off("complete",Ra(Da,this)),this.uppy.removePreProcessor(Ra(Ia,this)),this.uppy.removePreProcessor(Ra(xa,this))}},{key:"uploadPartBytes",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r,n,i,a,o,l,s,c;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.signature,n=t.body,i=t.onProgress,a=t.onComplete,o=t.signal,l=r.headers,s=void 0===l?{}:l,!this.opts.checkPartIntegrity){e.next=2;break}return e.next=1,Pa(ja,this,Ta).call(this,n);case 1:s["Content-MD5"]=e.sent;case 2:return e.next=3,this.opts.uploadPart({signature:ga(ga({},r),{},{headers:s}),body:n,onProgress:i,onComplete:a,signal:o});case 3:return c=e.sent,null===i||void 0===i||i({loaded:n.size,lengthComputable:!0}),null===a||void 0===a||a(c.etag),e.abrupt("return",ga(ga({},c),{},{ETag:c.etag}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"shouldUseMultipart",value:function(e){if(!this.isTransferSupported(this.transferType.MULTIPART))return!1;var t=this.getChunkSize(e);return Math.ceil(e.size/t)>1}},{key:"getUploadParameters",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r,n){var i,a,o=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.transferOptions={fileSize:t.size,type:this.transferType.LOCAL,cancelFn:function(){return o.uppy.removeFile(t.id)}},e.prev=1,e.next=2,this.opts.initializeFileUpload(this.draftRecord,t);case 2:return i=e.sent,this.uppy.setFileMeta(t.id,{file_id:i.file_id,links:i.links}),e.abrupt("return",{headers:{"Content-Type":"application/octet-stream"},url:i.links.content,method:"PUT",signal:n});case 3:throw e.prev=3,a=e.catch(1),this.uppy.info(a.message,"error"),a;case 4:case"end":return e.stop()}},e,this,[[1,3]])}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getChunkSize",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5497558138880,i=Ra(Ca,this),a=Math.min(5368709120,Math.ceil(n/i)),o=Math.log(5242880),l=(Math.log(a)-o)/4,s=va(Array.from({length:5},function(e,t){return Math.round(Math.exp(o+t*l))}).reverse());try{for(s.s();!(r=s.n()).done;){var c=r.value;if(!(c>e.size))if(Math.ceil(e.size/c)<=i)return c}}catch(u){s.e(u)}finally{s.f()}if(e.size<=a*i)return e.size;throw new fa(this.i18n("exceedsSize",{size:(0,m.humanReadableBytes)(a*i),file:null!==(t=e.name)&&void 0!==t?t:this.getI18n()("unnamed")}),{file:e})}},{key:"createMultipartUpload",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r,n,i=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getChunkSize(t),t.transferOptions={fileSize:t.size,parts:Math.ceil(t.size/r),part_size:r,type:this.transferType.MULTIPART,cancelFn:function(){return i.uppy.removeFile(t.id)}},e.next=1,this.opts.initializeFileUpload(this.draftRecord,t);case 1:return n=e.sent,this.uppy.setFileMeta(t.id,{file_id:n.file_id,links:n.links}),e.abrupt("return",{uploadId:t.file_id,key:n.key});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signPart",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n,i,a,o,l,s,c,u,d,p,f,m;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.partNumber,i=r.signal,a=t.meta.links.parts,o={},!(n<1||n>a.length)){e.next=1;break}throw new ma(this.i18n("invalidPartNumber",{partNumber:n,file:null!==(l=t.name)&&void 0!==l?l:this.getI18n()("unnamed")}),{file:t,partNumber:n});case 1:if(s=a.find(function(e){return e.part===n}),c=s.expiration,u=s.url,d=new Date(c),!(new Date>d)){e.next=3;break}return f=Ra(Ma,this).call(this,t,{signal:i}),e.next=2,f(t.meta.links.self);case 2:throw m=e.sent,t.meta.links=m.links,this.uppy.setFileMeta(t.id,{links:m.links}),new ha(this.i18n("signedUrlExpired",{partNumber:n,file:null!==(p=t.name)&&void 0!==p?p:this.getI18n()("unnamed")}),{file:t,partNumber:n});case 3:return e.abrupt("return",{url:u,headers:o});case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"completeMultipartUpload",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,this.opts.finalizeUpload(t);case 1:return r=e.sent,e.abrupt("return",r.links.content);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"abortMultipartUpload",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(sa.A);var qa=function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,r(91496)("./".concat(t,".js"));case 1:case 3:return e.abrupt("return",e.sent);case 2:return e.prev=2,e.catch(0),console.warn("No Uppy locale found for ".concat(t,", falling back to en_US")),e.next=3,r.e(4986).then(r.bind(r,54986));case 4:case"end":return e.stop()}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}();function La(){var e=c.useState(null),t=(0,be.A)(e,2),r=t[0],n=t[1],i=g.M.language;return c.useEffect(function(){var e,t=2===(e=i).length?{ar:"ar_SA",bg:"bg_BG",ca:"ca_ES",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",gl:"gl_ES",he:"he_IL",hi:"hi_IN",hr:"hr_HR",hu:"hu_HU",id:"id_ID",is:"is_IS",it:"it_IT",ja:"ja_JP",ko:"ko_KR",nb:"nb_NO",nl:"nl_NL",pl:"pl_PL",pt:"pt_BR",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sr:"sr_RS_Latin",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",uz:"uz_UZ",vi:"vi_VN",zh:"zh_CN"}[e]:e.replace("-","_");qa(t).then(function(e){var t,r=null!==(t=e.default)&&void 0!==t?t:e;n(r)})},[i]),r}var Na=["config","files","isDraftRecord","hasParentRecord","quota","permissions","record","initializeFileUpload","finalizeUpload","deleteFile","uploadPart","saveAndFetchDraft","setUploadProgress","importParentFiles","importButtonIcon","importButtonText","isFileImportInProgress","fileUploadConcurrency","decimalSizeDisplay","filesLocked","allowEmptyFiles"],Ba={showRemoveButtonAfterComplete:!1,showLinkToFileUploadResult:!0,proudlyDisplayPoweredByUppy:!1,hideProgressAfterFinish:!0,hidePauseResumeButton:!0,disableLocalFiles:!1,fileManagerSelectionType:"both",height:"100%",width:"100%",autoOpen:null,autoOpenFileEditor:!1},Ua=function(e){var t=e.config,r=e.files,i=e.isDraftRecord,a=e.hasParentRecord,o=e.quota,l=e.permissions,s=e.record,u=e.initializeFileUpload,d=e.finalizeUpload,p=e.deleteFile,m=e.uploadPart,h=e.saveAndFetchDraft,v=e.setUploadProgress,b=e.importParentFiles,y=e.importButtonIcon,A=e.importButtonText,E=e.isFileImportInProgress,P=e.fileUploadConcurrency,O=e.decimalSizeDisplay,C=e.filesLocked,S=e.allowEmptyFiles,D=(0,Z.A)(e,Na),I=(0,f.useFormikContext)(),F=I.values,x=I.errors,M=I.initialErrors,j=_r(r).filesList,T=(x.files||(null===M||void 0===M?void 0:M.files))&&r,_=La(),z=me()(F,"files.enabled",!1),q=j.reduce(function(e,t){return e+t.size},0),L=!i&&C,N=j.length<o.maxFiles,B=z&&i&&a&&!j.length,V=c.useMemo(function(){return{transferType:t.transfer_types,enabledTypes:t.enabled_transfer_types,defaultType:t.default_transfer_type}},[t]),H=c.useMemo(function(){return{minFileSize:S?0:1,maxNumberOfFiles:o.maxFiles-j.length,maxTotalFileSize:o.maxStorage-q}},[S,o,j,q]),W=c.useCallback(function(e){return V.enabledTypes.includes(e)},[V]),Y=(0,c.useState)(function(){return new na.A({debug:!1,autoProceed:!1,restrictions:H,locale:_}).use(za,{limit:P,transferType:V.transferType,isTransferSupported:W,quota:o,initializeFileUpload:u,finalizeUpload:d,saveAndFetchDraft:h,setUploadProgress:v,uploadPart:m,abortUpload:function(e){return p(e)},checkPartIntegrity:!0}).use(aa.A)}),G=(0,be.A)(Y,1)[0];return c.useEffect(function(){var e=G.getPlugin("RDMUppyUploaderPlugin");e&&(e.draftRecord=F)},[G,F]),c.useEffect(function(){G.setOptions({locale:_})},[G,_]),c.useEffect(function(){G.setOptions({restrictions:H})},[G,H]),c.useEffect(function(){var e=G.getPlugin("uppy-uploader-dashboard");e&&e.setOptions({disabled:!N})},[G,N]),c.createElement(k.default,(0,n.A)({id:"ReactInvenioDeposit.FileUploader.layout",config:t,files:r,isDraftRecord:i,hasParentRecord:a,quota:o,permissions:l,record:s,initializeFileUpload:u,finalizeUpload:d,uploadPart:m,saveAndFetchDraft:h,setUploadProgress:v,deleteFile:p,importParentFiles:b,importButtonIcon:y,importButtonText:A,isFileImportInProgress:E,decimalSizeDisplay:O,filesEnabled:z,filesList:j,displayImportBtn:B,filesSize:q,filesLocked:L,hasError:T,uppy:G},D),c.createElement(K.A,{className:"file-uploader"},c.createElement(K.A.Row,{className:"pt-10 pb-5"},!L&&c.createElement(Tr,(0,n.A)({},D,{config:t,filesEnabled:z,filesList:j,filesSize:q,quota:o,decimalSizeDisplay:O}))),c.createElement(k.default,(0,n.A)({id:"ReactInvenioDeposit.FileUploader.ImportButton.container",importButtonIcon:y,importButtonText:A,importParentFiles:b,isFileImportInProgress:E,displayImportBtn:B},D),B&&c.createElement(K.A.Row,{className:"pb-5 pt-5"},c.createElement(K.A.Column,{width:16},c.createElement(U.A,{visible:!0,info:!0},c.createElement("div",{className:"right-floated display-inline-block"},c.createElement(R.A,{type:"button",size:"mini",primary:!0,icon:y,content:A,onClick:function(){return b()},disabled:E,loading:E})),c.createElement("p",{className:"display-inline-block mt-5"},c.createElement(w.A,{name:"info circle"}),g.M.t("You can import files from the previous version.")))))),c.createElement(k.default,(0,n.A)({id:"ReactInvenioDeposit.FileUploader.FileUploaderArea.container",filesList:j,filesLocked:L,filesEnabled:z,deleteFile:p,decimalSizeDisplay:O,uppy:G},D),z&&c.createElement(K.A.Row,{stretched:!0,className:"pt-0 pb-0"},c.createElement(K.A.Column,{width:16},0!==j.length&&c.createElement(K.A.Column,{verticalAlign:"middle"},c.createElement(Mr,{filesList:j,filesEnabled:z,filesLocked:L,deleteFile:p,decimalSizeDislay:O})),!(!i&&C)&&c.createElement(ia.xh,(0,n.A)({style:{width:"100%"},uppy:G,id:"uppy-uploader-dashboard",disabled:!N||L,doneButtonHandler:null,note:g.M.t("File addition, removal or modification are not allowed after you have published your upload.")},Ba,D))))),c.createElement(k.default,(0,n.A)({id:"ReactInvenioDeposit.FileUploader.NewVersionButton.container",isDraftRecord:i,draft:F,filesLocked:L,permissions:l,record:s},D),!i&&C&&c.createElement(K.A.Row,{className:"file-upload-note pt-5"},c.createElement(K.A.Column,{width:16},c.createElement(U.A,{info:!0},c.createElement(Rr,{record:s,onError:function(){},className:"right-floated",disabled:!l.can_new_version}),c.createElement("p",{className:"mt-5 display-inline-block"},c.createElement(w.A,{name:"info circle",size:"large"}),g.M.t("You must create a new version to add, modify or delete files."))))))))},Va=p().objectOf(p().shape({name:p().string,size:p().number,progressPercentage:p().number,checksum:p().string,links:p().object,cancelUploadFn:p().func,state:p().oneOf(Object.values(gr)),enabled:p().bool}));Ua.propTypes={config:p().object,files:Va,fileUploadConcurrency:p().number,isDraftRecord:p().bool,hasParentRecord:p().bool,quota:p().shape({maxStorage:p().number,maxFiles:p().number}),record:p().object,importButtonIcon:p().string,importButtonText:p().string,isFileImportInProgress:p().bool,importParentFiles:p().func.isRequired,initializeFileUpload:p().func.isRequired,finalizeUpload:p().func.isRequired,uploadPart:p().func.isRequired,setUploadProgress:p().func.isRequired,saveAndFetchDraft:p().func.isRequired,deleteFile:p().func.isRequired,decimalSizeDisplay:p().bool,filesLocked:p().bool,permissions:p().object,allowEmptyFiles:p().bool},Ua.defaultProps={permissions:void 0,config:void 0,files:void 0,fileUploadConcurrency:3,record:void 0,isFileImportInProgress:!1,isDraftRecord:!0,hasParentRecord:!1,quota:{maxFiles:5,maxStorage:Math.pow(10,10)},importButtonIcon:"sync",importButtonText:g.M.t("Import files"),decimalSizeDisplay:!0,filesLocked:!1,allowEmptyFiles:!0};var Ha=(0,u.connect)(function(e){var t,r,n=e.files,i=n.links;return{files:n.entries,links:i,record:e.deposit.record,config:e.deposit.config,permissions:e.deposit.permissions,isFileImportInProgress:e.files.isFileImportInProgress,hasParentRecord:Boolean((null===(t=e.deposit.record)||void 0===t||null===(t=t.versions)||void 0===t?void 0:t.index)&&(null===(r=e.deposit.record)||void 0===r||null===(r=r.versions)||void 0===r?void 0:r.index)>1)}},function(e){return{initializeFileUpload:function(t,r){return e(function(e,t){return function(){var r=(0,ft.A)(ht().mark(function r(n,i,a){var o,l,s,c;return ht().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:Bt,payload:{filename:t.name}}),r.next=1,a.service.files.initializeUpload(e.links.files,t);case 1:return r.abrupt("return",r.sent);case 2:throw r.prev=2,c=r.catch(0),l=null!==c&&void 0!==c&&c.t0&&c.t0.isAxiosError?c.t0:c,console.error("Error uploading file",l,e,t),n({type:Ht,payload:{filename:t.name}}),s=(null===l||void 0===l||null===(o=l.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||(null===l||void 0===l?void 0:l.message)||"Upload failed",new Error(s);case 3:case"end":return r.stop()}},r,null,[[0,2]])}));return function(e,t,n){return r.apply(this,arguments)}}()}(t,r))},finalizeUpload:function(t){return e(function(e,t){return function(){var r=(0,ft.A)(ht().mark(function r(n,i,a){var o,l,s,c,u,d,p;return ht().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=1,a.service.files.finalizeUpload(e,t);case 1:return o=r.sent,l=o.key,s=o.size,c=o.checksum,u=o.links,d=(0,Z.A)(o,cr),n({type:Vt,payload:{filename:l,size:s,checksum:c,links:u,extraData:d}}),r.abrupt("return",o);case 2:throw r.prev=2,p=r.catch(0),console.error("Error uploading file",p,t),n({type:Ht,payload:{filename:t.name}}),p;case 3:case"end":return r.stop()}},r,null,[[0,2]])}));return function(e,t,n){return r.apply(this,arguments)}}()}(t.meta.links.commit,t))},importParentFiles:function(){return e(hr())},setUploadProgress:function(t,r){return e(function(e,t){return function(){var r=(0,ft.A)(ht().mark(function r(n,i,a){return ht().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=1,a.service.files.progressNotifier.onUploadProgress(e.name,t);case 1:case"end":return r.stop()}},r)}));return function(e,t,n){return r.apply(this,arguments)}}()}(t,r))},deleteFile:function(t){return e(mr(t))},uploadPart:function(t){return e(function(e){return function(){var t=(0,ft.A)(ht().mark(function t(r,n,i){return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.service.files.uploadPart(e));case 1:case"end":return t.stop()}},t)}));return function(e,r,n){return t.apply(this,arguments)}}()}(t))},saveAndFetchDraft:function(t){return e(pr(t))}}})(Ua),Wa=r(90179),Ya=r.n(Wa),Ga=r(92411),Qa=r.n(Ga),Ka=["draftExists","isPublished","isVersion","actionState","formik"];function Xa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Xa=function(){return!!e})()}var Za=g.M.t("discard changes"),Ja=g.M.t("discard version"),$a=g.M.t("delete"),eo=g.M.t("Are you sure you want to discard the changes to this draft?"),to=g.M.t("Are you sure you want to delete this new version?"),ro=g.M.t("Are you sure you want to delete this draft?"),no=function(e){var t="";switch(e.actionLbl){case Za:t=eo;break;case Ja:t=to;break;case $a:t=ro}return t},io=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Xa()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"state",{modalOpen:!1}),(0,A.A)(e,"openConfirmModal",function(){return e.setState({modalOpen:!0})}),(0,A.A)(e,"closeConfirmModal",function(){return e.setState({modalOpen:!1})}),(0,A.A)(e,"handleDelete",function(){var t=(0,ft.A)(ht().mark(function t(r){var n,i,a,o,l;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,i=n.isPublished,a=n.isVersion,o=n.formik,l=o.handleSubmit,(0,e.context.setSubmitContext)(an,{isDiscardingVersion:i||a}),l(r),e.closeConfirmModal();case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.draftExists,r=e.isPublished,i=e.isVersion,a=e.actionState,o=e.formik,l=(0,Z.A)(e,Ka),s=this.state.modalOpen,u=o.isSubmitting,d=Ya()(l,["dispatch"]),p="";p=r?Za:i?Ja:$a;var f=r?"warning":"negative",m=r?"close":"trash alternate outline",h=Qa()(p);return c.createElement(c.Fragment,null,c.createElement(R.A,(0,n.A)({disabled:!t||u,onClick:this.openConfirmModal,className:f,icon:m,loading:u&&a===Dt,labelPosition:"left"},d,{content:h})),c.createElement(we.A,{open:s,onClose:this.closeConfirmModal,size:"tiny"},c.createElement(we.A.Content,null,c.createElement(no,{actionLbl:p})),c.createElement(we.A.Actions,null,c.createElement(R.A,{onClick:this.closeConfirmModal,floated:"left"},g.M.t("Cancel")),c.createElement(R.A,{className:f,onClick:this.handleDelete,loading:u&&a===Dt,icon:"trash alternate outline",content:h}))))}}])}(c.Component);(0,A.A)(io,"contextType",cn),io.propTypes={draftExists:p().bool,isPublished:p().bool,isVersion:p().bool,actionState:p().string,formik:p().object.isRequired},io.defaultProps={draftExists:!1,isPublished:!1,isVersion:!1,actionState:void 0};var ao=(0,u.connect)(function(e){var t;return{draftExists:Boolean(e.deposit.record.id),isPublished:e.deposit.record.is_published,isVersion:(null===(t=e.deposit.record.versions)||void 0===t?void 0:t.index)>1,actionState:e.deposit.actionState}},null)((0,f.connect)(io)),oo=["actionState","formik"];function lo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(lo=function(){return!!e})()}var so=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,lo()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"handlePreview",function(t,r){(0,e.context.setSubmitContext)(nn),r(t)}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.actionState,i=t.formik,a=(0,Z.A)(t,oo),o=i.handleSubmit,l=i.isSubmitting,s=Ya()(a,["dispatch"]);return c.createElement(R.A,(0,n.A)({name:"preview",disabled:l,onClick:function(t){return e.handlePreview(t,o)},loading:l&&r===St,icon:"eye",labelPosition:"left",content:g.M.t("Preview")},s))}}])}(c.Component);(0,A.A)(so,"contextType",cn),so.propTypes={actionState:p().string,formik:p().object.isRequired},so.defaultProps={actionState:void 0};var co=(0,u.connect)(function(e){return{actionState:e.deposit.actionState,record:e.deposit.record}},null)((0,f.connect)(so)),uo=c.createContext({}),po=r(78585),fo=function(e){var t,r=e.result,n=e.record,i=e.isInitialSubmission,a=(0,c.useContext)(uo),o=a.setLocalCommunity,l=a.getChosenCommunity,s=a.userCommunitiesMemberships,u=a.displaySelected,d=r.metadata,p=(null===(t=l())||void 0===t?void 0:t.id)===r.id,f=s[r.id],h="public"===n.access.record&&"restricted"===r.access.visibility,v=r.ui.permissions.can_submit_record,b=(0,vt.get)(r,"theme.enabled"),y=i&&b,A=h||y||!v,E=c.createElement(c.Fragment,null,h&&c.createElement(m.InvenioPopup,{popupId:"community-inclusion-info-popup",size:"small",trigger:c.createElement(w.A,{className:"mb-5",color:"grey",name:"question circle outline"}),ariaLabel:g.M.t("Community inclusion information"),content:g.M.t("Submission to this community is only allowed if the record is restricted.")}),!v&&c.createElement(m.InvenioPopup,{popupId:"community-inclusion-info-popup",size:"small",trigger:c.createElement(w.A,{className:"mb-5",color:"grey",name:"question circle outline"}),ariaLabel:g.M.t("Submission to this community is only allowed to community members."),content:g.M.t("Submission to this community is only allowed to community members.")}),y&&c.createElement(c.Fragment,null,c.createElement(m.InvenioPopup,{popupId:"community-inclusion-info-popup",size:"small",trigger:c.createElement(w.A,{className:"mb-5",color:"grey",name:"question circle outline"}),ariaLabel:g.M.t("Community submission conditions information"),content:g.M.t("Submission to this community is only allowed by dedicated upload form. Use the button to jump to the form.")}),c.createElement(R.A,{size:"tiny",as:"a",href:"/communities/".concat(r.slug)},g.M.t("Go to the community"))),!y&&c.createElement(R.A,{content:u&&p?g.M.t("Selected"):g.M.t("Select"),size:"tiny",positive:u&&p,onClick:function(){return o(r)},disabled:A,"aria-label":g.M.t("Select {{title}}",{title:d.title})})),P=c.createElement(c.Fragment,null,f&&c.createElement(Ue.A,{size:"small",horizontal:!0,color:"teal"},c.createElement(w.A,{name:"key"}),Qa()(f)),b&&c.createElement(Ue.A,{color:"green",horizontal:!0,size:"small"},c.createElement(w.A,{name:"check circle"}),g.M.t("Verified")));return c.createElement(po.mG,{result:r,actions:E,extraLabels:P,showPermissionLabel:!0})};function mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mo=function(){return!!e})()}fo.propTypes={result:p().object.isRequired,record:p().object.isRequired,isInitialSubmission:p().bool},fo.defaultProps={isInitialSubmission:!0};var ho=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a);var c=(r=(0,o.A)(n,mo()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s))).props.apiConfigs.allCommunities;return r.state={selectedConfig:c},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.state.selectedConfig,r=t.searchApi,n=t.appId,i=t.initialQueryState,a=t.toggleText,o=this.props,l=o.apiConfigs,s=l.allCommunities,u=l.myCommunities,d=o.record,p=o.isInitialSubmission,f=o.CommunityListItem,m=o.pagination,h=o.myCommunitiesEnabled,v=o.autofocus,b=new Tn.HZ(r),y=(0,A.A)({},"".concat(n,".ResultsList.item"),(0,k.parametrize)(f,{record:d,isInitialSubmission:p}));return c.createElement(k.OverridableContext.Provider,{value:y},c.createElement(Tn.gz,{appName:n,urlHandlerApi:{enabled:!1},searchApi:b,key:n,initialQueryState:i,defaultSortingOnEmptyQueryString:{sortBy:"bestmatch"}},c.createElement(c.Fragment,null,c.createElement(we.A.Content,{as:K.A,className:"m-0 pb-0 centered"},h&&c.createElement(K.A.Column,{mobile:16,tablet:8,computer:8,textAlign:"left",floated:"left",className:"pt-0 pl-0"},c.createElement(_n.A,{role:"tablist",className:"theme-primary-menu",compact:!0},c.createElement(_n.A.Item,{as:"button",role:"tab",id:"all-communities-tab","aria-selected":n===s.appId,"aria-controls":s.appId,name:"All",active:n===s.appId,onClick:function(){return e.setState({selectedConfig:s})}},g.M.t("All")),c.createElement(_n.A.Item,{as:"button",role:"tab",id:"my-communities-tab","aria-selected":n===u.appId,"aria-controls":u.appId,name:"My communities",active:n===u.appId,onClick:function(){return e.setState({selectedConfig:u})}},g.M.t("My communities")))),c.createElement(K.A.Column,{mobile:16,tablet:8,computer:8,floated:h?"right":"null",verticalAlign:"middle",className:"pt-0 pr-0 pl-0"},c.createElement(Tn.IW,{placeholder:a,autofocus:v,actionProps:{icon:"search",content:null,className:"search","aria-label":g.M.t("Search")}}))),c.createElement(we.A.Content,{role:"tabpanel",id:n,scrolling:!0,className:"community-list-results"},c.createElement(Tn.oK,null,c.createElement(Tn.i6,null),c.createElement(Tn.$D,null),c.createElement(Tn.dy,null))),m&&c.createElement(we.A.Content,{className:"text-align-center"},c.createElement(Tn.dK,null)))))}}])}(c.Component);function vo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vo=function(){return!!e})()}ho.propTypes={apiConfigs:p().shape({allCommunities:p().shape({appId:p().string.isRequired,initialQueryState:p().object.isRequired,searchApi:p().object.isRequired}),myCommunities:p().shape({appId:p().string.isRequired,initialQueryState:p().object.isRequired,searchApi:p().object.isRequired})}),record:p().object.isRequired,isInitialSubmission:p().bool,CommunityListItem:p().elementType,pagination:p().bool,myCommunitiesEnabled:p().bool,autofocus:p().bool},ho.defaultProps={isInitialSubmission:!0,pagination:!0,myCommunitiesEnabled:!0,autofocus:!0,CommunityListItem:fo,apiConfigs:{allCommunities:{initialQueryState:{size:5,page:1,sortBy:"bestmatch"},searchApi:{axios:{url:"/api/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.AllCommunities",toggleText:"Search in all communities"},myCommunities:{initialQueryState:{size:5,page:1,sortBy:"bestmatch"},searchApi:{axios:{url:"/api/user/communities",headers:{Accept:"application/vnd.inveniordm.v1+json"}}},appId:"ReactInvenioDeposit.CommunitySelectionSearch.MyCommunities",toggleText:"Search in my communities"}}};var bo=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,vo()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"getChosenCommunity",function(){return r.state.localChosenCommunity}),(0,A.A)(r,"setCommunity",function(e){(0,r.props.onCommunityChange)(e),r.setState({localChosenCommunity:e})}),(0,A.A)(r,"modalTrigger",function(){var e=r.props,t=e.trigger,n=e.modalOpen;if(!M()(t))return c.cloneElement(t,{"aria-haspopup":"dialog","aria-expanded":n})}),(0,A.A)(r,"handleModalOpen",function(){var e=r.props,t=e.chosenCommunity,n=e.onModalChange;r.setState({localChosenCommunity:t}),n&&n(!0)});var u=e.chosenCommunity,d=e.userCommunitiesMemberships,p=e.displaySelected;return r.state={localChosenCommunity:u},r.contextValue={setLocalCommunity:r.setCommunity,getChosenCommunity:r.getChosenCommunity,userCommunitiesMemberships:d,displaySelected:p},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.extraContentComponents,r=e.modalHeader,n=e.onModalChange,i=e.modalOpen,a=e.apiConfigs,o=e.handleClose,l=e.record,s=e.isInitialSubmission;return c.createElement(uo.Provider,{value:this.contextValue},c.createElement(we.A,{role:"dialog","aria-labelledby":"community-modal-header",id:"community-selection-modal",className:"m-0",closeIcon:!0,closeOnDimmerClick:!1,open:i,onClose:function(){n&&n(!1)},onOpen:this.handleModalOpen,trigger:this.modalTrigger()},c.createElement(we.A.Header,null,c.createElement(y.A,{as:"h2",size:"small",id:"community-modal-header",className:"mt-5"},r)),c.createElement(ho,{apiConfigs:a,record:l,isInitialSubmission:s}),t&&c.createElement(we.A.Content,null,t),c.createElement(we.A.Actions,null,c.createElement(R.A,{onClick:o},g.M.t("Close")))))}}])}(c.Component);bo.propTypes={chosenCommunity:p().object,onCommunityChange:p().func.isRequired,trigger:p().object,userCommunitiesMemberships:p().object.isRequired,extraContentComponents:p().node,modalHeader:p().string,onModalChange:p().func,displaySelected:p().bool,modalOpen:p().bool,apiConfigs:p().object,handleClose:p().func.isRequired,record:p().object.isRequired,isInitialSubmission:p().bool},bo.defaultProps={chosenCommunity:void 0,extraContentComponents:void 0,modalHeader:g.M.t("Select a community"),onModalChange:void 0,displaySelected:!1,modalOpen:!1,trigger:void 0,apiConfigs:void 0,isInitialSubmission:!0};var yo=(0,u.connect)(function(e){return{userCommunitiesMemberships:e.deposit.config.user_communities_memberships}},null)(bo);function go(e,t){var r=e.filter(function(e,t,r){return r.indexOf(e)!==t});if(r.length>0)throw new Error('Extra checkboxes must have unique "'.concat(t,'". Duplicates found: ').concat(r,"."))}var Ao=function(e){var t=e.id,r=e.fieldPath,n=e.text,i=(0,f.useFormikContext)().values;return c.createElement(v.A.Field,{id:t},c.createElement(m.RadioField,{control:T.A,fieldPath:r,label:n,checked:!0===me()(i,r),onChange:function(e){var t=e.data;e.formikProps.form.setFieldValue(r,t.checked)},optimized:!0}),c.createElement(m.ErrorLabel,{role:"alert",fieldPath:r,className:"mt-0 mb-5"}))};function Eo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Eo=function(){return!!e})()}Ao.propTypes={id:p().string.isRequired,fieldPath:p().string.isRequired,text:p().string.isRequired};var wo=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Eo()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s));var c=e.extraCheckboxes;(r.validationSchema=Re.Ik().shape({}).noUnknown(),r.initialValues={},c.length>0)&&(go(c.map(function(e){return e.fieldPath}),"fieldPath"),go(c.map(function(e){return e.id}),"id"),c.forEach(function(e){r.validationSchema=r.validationSchema.concat(Re.Ik((0,A.A)({},e.fieldPath,Re.lc().oneOf([!0],g.M.t("You must accept this."))))),r.initialValues[e.fieldPath]=!1}));return r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.isConfirmModalOpen,r=e.onClose,n=e.onSubmit,i=e.publishModalExtraContent,a=e.buttonLabel,o=e.extraCheckboxes,l=e.beforeContent,s=e.afterContent;return c.createElement(f.Formik,{initialValues:this.initialValues,onSubmit:n,validationSchema:this.validationSchema,validateOnChange:!1,validateOnBlur:!1},function(e){e.values;var n=e.handleSubmit;return c.createElement(we.A,{open:t,onClose:r,size:"small",closeIcon:!0,closeOnDimmerClick:!1},c.createElement(we.A.Header,null,g.M.t("Are you sure you want to publish this record?")),c.createElement(we.A.Content,null,c.createElement(U.A,{visible:!0,warning:!0},c.createElement("p",null,c.createElement(w.A,{name:"warning sign"})," ",g.M.t("Once the record is published you will no longer be able to change the files in the upload! However, you will still be able to update the record's metadata later."))),c.createElement(v.A,null,l&&c.createElement("div",null,l()),o.length>0&&o.map(function(e){return c.createElement(Ao,{id:"".concat(e.fieldPath,"-checkbox"),key:e.fieldPath,fieldPath:e.fieldPath,text:e.text})}),s&&c.createElement("div",null,s())),i&&c.createElement("div",{dangerouslySetInnerHTML:{__html:i}})),c.createElement(we.A.Actions,null,c.createElement(R.A,{onClick:r,floated:"left"},g.M.t("Cancel")),c.createElement(R.A,{name:"publish",onClick:function(e){n(e)},positive:!0,content:a})))})}}])}(c.Component);wo.propTypes={isConfirmModalOpen:p().bool.isRequired,onClose:p().func.isRequired,onSubmit:p().func.isRequired,publishModalExtraContent:p().string,buttonLabel:p().string,extraCheckboxes:p().arrayOf(p().shape({fieldPath:p().string,text:p().string})),beforeContent:p().func,afterContent:p().func},wo.defaultProps={publishModalExtraContent:"",buttonLabel:g.M.t("Publish"),extraCheckboxes:[],beforeContent:function(){},afterContent:function(){}};var Ro=k.default.component("InvenioRdmRecords.PublishModal.container",wo),Po=["actionState","filesState","buttonLabel","formik","publishModalExtraContent","noINeedDOI","isDOIRequired"];function Oo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Oo=function(){return!!e})()}var Co=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,Oo()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"state",{isConfirmModalOpen:!1}),(0,A.A)(e,"openConfirmModal",function(){return e.setState({isConfirmModalOpen:!0})}),(0,A.A)(e,"closeConfirmModal",function(){return e.setState({isConfirmModalOpen:!1})}),(0,A.A)(e,"handlePublish",function(){var t=e.context.setSubmitContext,r=e.props,n=r.formik,i=r.isDOIRequired,a=r.noINeedDOI,o=r.doiReservationCheck,l=r.publishWithoutCommunity,s=n.handleSubmit;o(i,a,n,"DOI is needed. You need to reserve a DOI before publishing.",Ct)||(t(l?rn:tn),s()),e.closeConfirmModal(),ie()}),(0,A.A)(e,"isDisabled",function(e,t,r){var n;if(t)return!0;var i=me()(e,"files.enabled",!1),a=Object.values(null!==(n=r.entries)&&void 0!==n?n:{});return!(!i||0!==a.length)||!a.every(function(e){return"finished"===e.status})}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.actionState,r=e.filesState,i=e.buttonLabel,a=e.formik,o=e.publishModalExtraContent,l=(e.noINeedDOI,e.isDOIRequired,(0,Z.A)(e,Po)),s=this.state.isConfirmModalOpen,u=a.values,d=a.isSubmitting,p=Ya()(l,["dispatch"]);return c.createElement(c.Fragment,null,c.createElement(R.A,(0,n.A)({disabled:this.isDisabled(u,d,r),name:"publish",onClick:this.openConfirmModal,positive:!0,icon:"upload",loading:d&&t===Pt,labelPosition:"left",content:i},p,{type:"button"})),s&&c.createElement(Ro,{isConfirmModalOpen:s,onClose:this.closeConfirmModal,onSubmit:this.handlePublish,publishModalExtraContent:o,buttonLabel:i}))}}])}(c.Component);(0,A.A)(Co,"contextType",cn),Co.propTypes={buttonLabel:p().string,publishWithoutCommunity:p().bool,actionState:p().string,formik:p().object.isRequired,publishModalExtraContent:p().string,filesState:p().object,doiReservationCheck:p().func.isRequired,isDOIRequired:p().bool,noINeedDOI:p().bool},Co.defaultProps={buttonLabel:g.M.t("Publish"),publishWithoutCommunity:!1,actionState:void 0,publishModalExtraContent:void 0,filesState:void 0,isDOIRequired:void 0,noINeedDOI:void 0};var So=(0,u.connect)(function(e){return{actionState:e.deposit.actionState,publishModalExtraContent:e.deposit.config.publish_modal_extra,filesState:e.files,isDOIRequired:e.deposit.config.is_doi_required,noINeedDOI:e.deposit.noINeedDOI}},null)((0,f.connect)(Co));function ko(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ko=function(){return!!e})()}var Do=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,ko()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"getValidationSchema",function(e){var t=Re.Ik({acceptAccessToRecord:Re.lc().oneOf([!0],g.M.t("You must accept this.")),reviewComment:Re.Yj()});return e||(t=t.concat(Re.Ik({acceptAfterPublishRecord:Re.lc().oneOf([!0],g.M.t("You must accept this."))}))),t}),(0,A.A)(r,"getModalContent",function(e,t,r){var n={headerTitle:g.M.t("Submit for review"),msgWarningTitle:g.M.t("Before requesting review, please read and check the following:"),submitBtnLbl:g.M.t("Submit record for review"),acceptAccessToRecordText:c.createElement(c.Fragment,null,g.M.t("The '{{communityTitle}}' curators will have access to",{communityTitle:r})," ",c.createElement("b",null,g.M.t("view and edit"))," ",g.M.t("your upload's metadata and files.")),acceptAfterPublishRecordText:c.createElement(c.Fragment,null,g.M.t("If your upload is accepted by the community curators, it will be")," ",c.createElement("b",null,g.M.t("immediately published")),"."," ",g.M.t("Before that, you will still be able to modify metadata and files of this upload."))};return null!==e&&void 0!==e&&e.is_published?(n.headerTitle=g.M.t("Submit to community"),n.msgWarningTitle=g.M.t("Before submitting to community, please read and check the following:"),n.submitBtnLbl=g.M.t("Submit to community")):t&&(n.headerTitle=g.M.t("Publish to community"),n.msgWarningTitle=g.M.t("Before publishing to the community, please read and check the following:"),n.acceptAfterPublishRecordText=c.createElement(c.Fragment,null,g.M.t("Your upload will be")," ",c.createElement("b",null,g.M.t("immediately published"))," ",g.M.t("in '{{communityTitle}}'. You will no longer be able to change the files in the upload!",{communityTitle:r})," ",g.M.t("However, you will still be able to update the record's metadata later.")),n.submitBtnLbl=g.M.t("Publish record to community")),n}),(0,A.A)(r,"getInitialValues",function(e,t){return{reviewComment:e||"",acceptAccessToRecord:!1,acceptAfterPublishRecord:!!t&&void 0}});var u=e.initialReviewComment,d=e.extraCheckboxes,p=e.record;if(r.validationSchema=r.getValidationSchema(p),r.initialValues=r.getInitialValues(u,p),d.length>0){var f=d.map(function(e){return e.fieldPath});f.push("acceptAccessToRecord","acceptAfterPublishRecord"),go(f,"fieldPath");var m=d.map(function(e){return e.id});m.push("accept-access-checkbox","accept-after-publish-checkbox"),go(m,"id"),d.forEach(function(e){r.validationSchema=r.validationSchema.concat(Re.Ik((0,A.A)({},e.fieldPath,Re.lc().oneOf([!0],g.M.t("You must accept this."))))),r.initialValues[e.fieldPath]=!1})}return r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("accept-access-checkbox").querySelector("input");null===e||void 0===e||e.focus()}},{key:"render",value:function(){var e=this.props,t=e.isConfirmModalOpen,r=e.community,n=e.onClose,i=e.onSubmit,a=e.publishModalExtraContent,o=e.directPublish,l=e.errors,s=e.loading,u=e.record,d=e.extraCheckboxes,p=e.beforeContent,h=e.afterContent,b=r.metadata.title,y=this.getModalContent(u,o,b);return c.createElement(f.Formik,{initialValues:this.initialValues,onSubmit:i,validationSchema:this.validationSchema,validateOnChange:!1,validateOnBlur:!1},function(e){e.values;var r=e.handleSubmit;return c.createElement(we.A,{open:t,onClose:n,size:"small",closeIcon:!0,closeOnDimmerClick:!1},c.createElement(we.A.Header,null,y.headerTitle),c.createElement(we.A.Content,null,l&&c.createElement(m.ErrorMessage,{header:g.M.t("Unable to submit request."),content:l,icon:"exclamation",negative:!0}),c.createElement(U.A,{visible:!0,warning:!0},c.createElement("p",null,c.createElement(w.A,{name:"warning sign"}),y.msgWarningTitle)),c.createElement(v.A,null,p&&c.createElement("div",null,p()),c.createElement(Ao,{id:"accept-access-checkbox",fieldPath:"acceptAccessToRecord",text:y.acceptAccessToRecordText}),!u&&c.createElement(Ao,{id:"accept-after-publish-checkbox",fieldPath:"acceptAfterPublishRecord",text:y.acceptAfterPublishRecordText}),d.length>0&&d.map(function(e){return c.createElement(Ao,{id:"".concat(e.fieldPath,"-checkbox"),key:e.fieldPath,fieldPath:e.fieldPath,text:e.text})}),!o&&c.createElement(m.TextAreaField,{fieldPath:"reviewComment",label:g.M.t("Message to curators (optional)")}),a&&c.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),h&&c.createElement("div",null,h()))),c.createElement(we.A.Actions,null,c.createElement(R.A,{onClick:n,floated:"left",loading:s,disabled:s},g.M.t("Cancel")),c.createElement(R.A,{name:"submitReview",onClick:function(e){r(e)},loading:s,disabled:s,positive:o,primary:!o,content:y.submitBtnLbl})))})}}])}(c.Component);Do.propTypes={isConfirmModalOpen:p().bool.isRequired,community:p().object.isRequired,onClose:p().func.isRequired,onSubmit:p().func.isRequired,initialReviewComment:p().string,publishModalExtraContent:p().string,directPublish:p().bool,errors:p().string,loading:p().bool,record:p().object.isRequired,extraCheckboxes:p().arrayOf(p().shape({fieldPath:p().string,text:p().string})),beforeContent:p().func,afterContent:p().func},Do.defaultProps={initialReviewComment:"",publishModalExtraContent:void 0,directPublish:!1,errors:"",loading:!1,extraCheckboxes:[],beforeContent:function(){},afterContent:function(){}};var Io=k.default.component("InvenioRdmRecords.SubmitReviewModal.container",Do),Fo=["actionState","actionStateExtra","community","disableSubmitForReviewButton","directPublish","formik","isRecordSubmittedForReview","publishModalExtraContent","filesState"];function xo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xo=function(){return!!e})()}var Mo=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,xo()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"state",{isConfirmModalOpen:!1}),(0,A.A)(e,"openConfirmModal",function(){return e.setState({isConfirmModalOpen:!0})}),(0,A.A)(e,"closeConfirmModal",function(){return e.setState({isConfirmModalOpen:!1})}),(0,A.A)(e,"handleSubmitReview",function(t){var r=t.reviewComment,n=e.props,i=n.formik,a=n.directPublish,o=n.isDOIRequired,l=n.noINeedDOI,s=n.doiReservationCheck,c=i.handleSubmit,u=e.context.setSubmitContext;s(o,l,i,"DOI is needed. You need to reserve a DOI before submitting for review.",Mt)||(u(sn,{reviewComment:r,directPublish:a}),c()),e.closeConfirmModal(),ie()}),(0,A.A)(e,"isDisabled",function(t,r){var n,i=e.props,a=i.formik,o=i.userCanManageRecord,l=i.record,s=a.values,c=a.isSubmitting;if(!!l.id&&!o||t||c)return!0;var u=me()(s,"files.enabled",!1),d=Object.values(null!==(n=r.entries)&&void 0!==n?n:{});return!(!u||0!==d.length)||!d.every(function(e){return"finished"===e.status})}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.actionState,r=e.actionStateExtra,i=e.community,a=e.disableSubmitForReviewButton,o=e.directPublish,l=e.formik,s=e.isRecordSubmittedForReview,u=e.publishModalExtraContent,d=e.filesState,p=(0,Z.A)(e,Fo),f=l.isSubmitting,m=Ya()(p,["dispatch"]),h=this.state.isConfirmModalOpen,v=s?g.M.t("Submitted for review"):g.M.t("Submit for review"),b=o?g.M.t("Publish to community"):v;return c.createElement(c.Fragment,null,c.createElement(R.A,(0,n.A)({disabled:this.isDisabled(a,d),name:"SubmitReview",onClick:this.openConfirmModal,positive:o,primary:!o,icon:"upload",loading:f&&"DRAFT_SUBMIT_REVIEW_STARTED"===t,labelPosition:"left",content:b},m,{type:"button"})),h&&c.createElement(Io,{isConfirmModalOpen:h,initialReviewComment:r.reviewComment,onSubmit:this.handleSubmitReview,community:i,onClose:this.closeConfirmModal,publishModalExtraContent:u,directPublish:o}))}}])}(c.Component);(0,A.A)(Mo,"contextType",cn),Mo.propTypes={actionState:p().string,actionStateExtra:p().object.isRequired,community:p().object.isRequired,disableSubmitForReviewButton:p().bool,isRecordSubmittedForReview:p().bool.isRequired,directPublish:p().bool,formik:p().object.isRequired,publishModalExtraContent:p().string,filesState:p().object,userCanManageRecord:p().bool.isRequired,record:p().object.isRequired,doiReservationCheck:p().func.isRequired,isDOIRequired:p().bool,noINeedDOI:p().bool},Mo.defaultProps={actionState:void 0,disableSubmitForReviewButton:void 0,publishModalExtraContent:void 0,directPublish:!1,filesState:void 0,isDOIRequired:void 0,noINeedDOI:void 0};var jo=(0,u.connect)(function(e){return{actionState:e.deposit.actionState,actionStateExtra:e.deposit.actionStateExtra,community:e.deposit.editorState.selectedCommunity,isRecordSubmittedForReview:e.deposit.record.status===gn.IN_REVIEW,disableSubmitForReviewButton:e.deposit.editorState.ui.disableSubmitForReviewButton,publishModalExtraContent:e.deposit.config.publish_modal_extra,filesState:e.files,userCanManageRecord:e.deposit.permissions.can_manage,isDOIRequired:e.deposit.config.is_doi_required,noINeedDOI:e.deposit.noINeedDOI}},null)((0,f.connect)(Mo)),To=["community","changeSelectedCommunityFn","showChangeCommunityButton","showDirectPublishButton","showSubmitForReviewButton","record"];function _o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_o=function(){return!!e})()}var zo=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,_o()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"doiReservationCheck",function(e,t,n,i,a){var o,l=void 0!==e&&!e&&t&&0===Object.keys((null===n||void 0===n||null===(o=n.values)||void 0===o||null===(o=o.pids)||void 0===o?void 0:o.doi)||{}).length;if(l){var s={pids:{doi:g.M.t(i)}};n.setErrors(s),(0,r.props.raiseDOINeededButNotReserved)(null===n||void 0===n?void 0:n.values,s,a)}return l}),r.state={modalOpen:!1},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.community,i=t.changeSelectedCommunityFn,a=t.showChangeCommunityButton,o=t.showDirectPublishButton,l=t.showSubmitForReviewButton,s=t.record,u=(0,Z.A)(t,To),d=this.state.modalOpen;return l?c.createElement(jo,(0,n.A)({directPublish:o},u,{fluid:!0,className:"mb-10",record:s,doiReservationCheck:this.doiReservationCheck})):a?c.createElement(c.Fragment,null,c.createElement(yo,{onCommunityChange:function(e){i(e)},onModalChange:function(t){return e.setState({modalOpen:t})},modalOpen:d,displaySelected:!0,record:s,chosenCommunity:r,trigger:c.createElement(R.A,{content:g.M.t("Change community"),fluid:!0,className:"mb-10"})}),c.createElement(So,(0,n.A)({buttonLabel:g.M.t("Publish without community"),doiReservationCheck:this.doiReservationCheck,publishWithoutCommunity:!0},u))):c.createElement(So,(0,n.A)({doiReservationCheck:this.doiReservationCheck},u))}}])}(c.Component);zo.propTypes={community:p().object,changeSelectedCommunityFn:p().func.isRequired,showChangeCommunityButton:p().bool.isRequired,showDirectPublishButton:p().bool.isRequired,showSubmitForReviewButton:p().bool.isRequired,record:p().object.isRequired,raiseDOINeededButNotReserved:p().func.isRequired},zo.defaultProps={community:void 0};var qo=(0,u.connect)(function(e){return{community:e.deposit.editorState.selectedCommunity,showDirectPublishButton:e.deposit.editorState.ui.showDirectPublishButton,showChangeCommunityButton:e.deposit.editorState.ui.showChangeCommunityButton,showSubmitForReviewButton:e.deposit.editorState.ui.showSubmitForReviewButton}},function(e){return{changeSelectedCommunityFn:function(t){return e(sr(t))},raiseDOINeededButNotReserved:function(t,r,n){return e({type:n,payload:{data:t,errors:r}})}}})(zo),Lo=["actionState","formik"];function No(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(No=function(){return!!e})()}var Bo=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,No()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"handleSave",function(t){var r=e.props.formik,n=e.context.setSubmitContext,i=r.handleSubmit;n(en),i(t),ie()}),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.actionState,i=t.formik,a=(0,Z.A)(t,Lo),o=i.isSubmitting,l=Ya()(a,["dispatch"]);return c.createElement(R.A,(0,n.A)({name:"save",disabled:o,onClick:function(t){return e.handleSave(t)},icon:"save",loading:o&&r===Et,labelPosition:"left",content:g.M.t("Save draft")},l))}}])}(c.Component);(0,A.A)(Bo,"contextType",cn),Bo.propTypes={formik:p().object.isRequired,actionState:p().string},Bo.defaultProps={actionState:void 0};var Uo=(0,u.connect)(function(e){return{actionState:e.deposit.actionState}},null)((0,f.connect)(Bo));function Vo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ho(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ho=function(){return!!e})()}var Wo,Yo=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,Ho()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s)),(0,A.A)(r,"getAllErrPaths",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];for(var i in e){var a=t+(t?".":"")+i;"string"==typeof e[i]||void 0!==e[i].severity?n.push(a):"object"==(0,pe.A)(e[i])&&n.push.apply(n,(0,Ce.A)(r.getAllErrPaths(e[i],a)))}return n}),r.sections=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.sectionsConfig),r.state={domReady:!1},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({domReady:!0})},0)}},{key:"getErrorSections",value:function(e){var t=this,r=new Map;this.getAllErrPaths(e).forEach(function(e){for(var n=void 0,i=0,a=Object.entries(t.sections);i<a.length;i++){var o=(0,be.A)(a[i],2),l=o[0];if(o[1].some(function(t){return e.startsWith(t)})){var s,c=document.getElementById(l),u=(null===c||void 0===c?void 0:c.getAttribute("label"))||"Unknown section";return void r.set(l,{label:u,count:((null===(s=r.get(l))||void 0===s?void 0:s.count)||0)+1})}}var d=document.querySelectorAll(".invenio-accordion-field");if(n=Array.from(d).find(function(t){return t.querySelector('[name="'.concat(e,'"]'))}),n){var p,f=n.id,m=n.getAttribute("label")||"Unknown section";r.set(f,{label:m,count:((null===(p=r.get(f))||void 0===p?void 0:p.count)||0)+1})}});var n=Array.from(document.querySelectorAll(".accordion")).map(function(e){return e.id});return{orderedSections:[].concat((0,Ce.A)(n.filter(function(e){return r.has(e)})),(0,Ce.A)((0,Ce.A)(r.keys()).filter(function(e){return!n.includes(e)}))),errorSections:r}}},{key:"render",value:function(){var e=this.props.errors,t=this.state.domReady?this.getErrorSections(e):[],r=t.orderedSections,n=t.errorSections;return M()(r)?null:r.map(function(e,t){var r=n.get(e),i=r.label,a=r.count;return c.createElement("a",{key:e,className:"pl-5 comma-separated",href:"#".concat(e)},i," ",c.createElement(Ue.A,{circular:!0,size:"tiny"},a))})}}])}(c.Component);function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qo=function(){return!!e})()}Yo.propTypes={sectionsConfig:p().object.isRequired,errors:p().object.isRequired};var Ko=(Wo={},(0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)(Wo,wt,{feedback:"positive",message:g.M.t("Record successfully saved.")}),gt,{feedback:"warning",message:g.M.t("Record saved with validation feedback in")}),At,{feedback:"warning",message:g.M.t("Draft has validation feedback in")}),Rt,{feedback:"negative",message:g.M.t("The draft was not saved. Please try again. If the problem persists, contact user support.")}),Ot,{feedback:"negative",message:g.M.t("The draft was not published. Please try again. If the problem persists, contact user support.")}),Ct,{feedback:"negative",message:g.M.t("The draft was not published. Record saved with validation feedback in")}),xt,{feedback:"negative",message:g.M.t("The draft was not submitted for review. Please try again. If the problem persists, contact user support.")}),Mt,{feedback:"negative",message:g.M.t("The draft was not submitted for review. Record saved with validation feedback in")}),It,{feedback:"negative",message:g.M.t("Draft deletion failed. Please try again. If the problem persists, contact user support.")}),kt,{feedback:"negative",message:g.M.t("Draft preview failed. Please try again. If the problem persists, contact user support.")}),(0,A.A)((0,A.A)((0,A.A)((0,A.A)(Wo,_t,{feedback:"negative",message:g.M.t("Identifier reservation failed. Please try again. If the problem persists, contact user support.")}),Lt,{feedback:"negative",message:g.M.t("Identifier could not be discarded. Please try again. If the problem persists, contact user support.")}),Wt,{feedback:"negative",message:g.M.t("Draft save failed before file upload. Please try again. If the problem persists, contact user support.")}),Qt,{feedback:"negative",message:g.M.t("Files import from the previous version failed. Please try again. If the problem persists, contact user support.")})),Xo={positive:{icon:"check",type:"positive"},suggestive:{icon:"info circle",type:"info"},negative:{icon:"times circle",type:"negative"},warning:{icon:"exclamation triangle",type:"warning"}},Zo=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),(r=(0,o.A)(n,Qo()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s))).labels=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.labels),r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props,t=e.errors,r=e.actionState,i=e.sectionsConfig,a=t||{},o=me()(Ko,r,{feedback:void 0,message:void 0}),l=o.feedback,s=o.message;if(!s)return null;var u=Object.values(a).every(function(e){return"error"!==e.severity}),d=M()(a)&&u?"suggestive":l,p=a.message||a._schema,f=Xo[d]||Xo.warning,m=f.icon,h=f.type;return c.createElement(U.A,(0,n.A)({visible:!0},(0,A.A)({},h,!0),{className:"flashed top attached",id:h+"-feedback-div"}),c.createElement(K.A,{container:!0},c.createElement(K.A.Column,{width:15,textAlign:"left"},c.createElement("strong",null,c.createElement(w.A,{name:m,middle:!0,aligned:!0})," ",p||s,c.createElement(Yo,{sectionsConfig:i,errors:a})))))}}])}(c.Component);Zo.propTypes={errors:p().object,actionState:p().string,labels:p().object,sectionsConfig:p().object},Zo.defaultProps={errors:void 0,actionState:void 0,labels:void 0,sectionsConfig:void 0};var Jo=(0,u.connect)(function(e){return{actionState:e.deposit.actionState,errors:e.deposit.errors}},null)(Zo),$o=r(71083),el=["fileSize","type"];function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nl(e,t,r){return t=(0,l.A)(t),(0,o.A)(e,il()?Reflect.construct(t,r||[],(0,l.A)(e).constructor):t.apply(e,r))}function il(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(il=function(){return!!e})()}var al={json:{"Content-Type":"application/json"},"vnd+json":{"Content-Type":"application/json",Accept:"application/vnd.inveniordm.v1+json"},"octet-stream":{"Content-Type":"application/octet-stream"}},ol=function(e){function t(e,r){var n,a;return(0,i.A)(this,t),a=nl(this,t,[e]),(0,A.A)(a,"filename",void 0),(0,A.A)(a,"transferType",void 0),(0,A.A)(a,"isUserFacing",void 0),a.isUserFacing=null!==(n=null===r||void 0===r?void 0:r.isUserFacing)&&void 0!==n&&n,null!==r&&void 0!==r&&r.filename&&(a.filename=r.filename),null!==r&&void 0!==r&&r.transferType&&(a.transferType=r.transferType),a}return(0,s.A)(t,e),(0,a.A)(t)}((0,ua.A)(Error)),ll=(0,a.A)(function e(t,r){(0,i.A)(this,e),this.data=t,this.errors=r}),sl=function(){return(0,a.A)(function e(t,r,n){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract");var a=me()(t,"headers");this.apiHeaders=Object.assign({},al,a),this.apiConfig={withCredentials:!0,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",headers:this.apiHeaders["vnd+json"]},this.axiosWithConfig=$o.A.create(this.apiConfig),this.cancelToken=$o.A.CancelToken},[{key:"createDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"publishDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(),cl=function(e){function t(e,r,n){var a;return(0,i.A)(this,t),(a=nl(this,t,[e])).createDraftURL=r,a.recordSerializer=n,a}return(0,s.A)(t,e),(0,a.A)(t,[{key:"_createResponse",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r,n,i,a,o,l;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,t();case 1:return r=e.sent,n=this.recordSerializer.deserialize(r.data||{}),i=this.recordSerializer.deserializeErrors(r.data.errors||[]),e.abrupt("return",new ll(n,i));case 2:throw e.prev=2,l=e.catch(0),a=l.response.data,o=this.recordSerializer.deserializeErrors(l.response.data.errors||[]),M()(o)||(a=o),new ll({},a);case 3:case"end":return e.stop()}},e,this,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()},{key:"createDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r,n=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.recordSerializer.serialize(t),e.abrupt("return",this._createResponse(function(){return n.axiosWithConfig.post(n.createDraftURL,r,{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"readDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){return r.axiosWithConfig.get(t.self,{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n,i=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.recordSerializer.serialize(t),e.abrupt("return",this._createResponse(function(){return i.axiosWithConfig.put(r.self,n,{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"publishDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){return r.axiosWithConfig.post(t.publish,{},{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDraft",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){return r.axiosWithConfig.delete(t.self,{})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){var e="reserve_".concat(r),i=t[e];return n.axiosWithConfig.post(i,{},{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){var e="reserve_".concat(r),i=t[e];return n.axiosWithConfig.delete(i,{params:{expand:1}})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){return n.axiosWithConfig.put(t.review,{receiver:{community:r},type:"community-submission"})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){return r.axiosWithConfig.delete(t.review,{})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){var n=this;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._createResponse(function(){var e=r?{payload:{content:r,format:"html"}}:{};return n.axiosWithConfig.post(t["submit-review"],e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.axiosWithConfig.post(t.actions.cancel,r?{payload:{content:r,format:"html"}}:{}));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}])}(sl),ul=function(){return(0,a.A)(function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract");var r=me()(t,"headers",{});this.apiHeaders=Object.assign({},al,r);var n={withCredentials:!0,xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",headers:this.apiHeaders["vnd+json"]};this.axiosWithConfig=$o.A.create(n)},[{key:"isCancelled",value:function(e){return $o.A.isCancel(e)}},{key:"initializeFileUpload",value:function(e,t,r){throw new Error("Not implemented.")}},{key:"uploadFile",value:function(e,t,r,n){throw new Error("Not implemented.")}},{key:"uploadPart",value:function(e){throw new Error("Not implemented.")}},{key:"finalizeFileUpload",value:function(e){throw new Error("Not implemented.")}},{key:"deleteFile",value:function(e){throw new Error("Not implemented.")}}])}(),dl=function(e){function t(e,r,n){var a;return(0,i.A)(this,t),(a=nl(this,t,[e])).defaultTransferType=r||"L",a.enabledTransferTypes=n||["L"],a}return(0,s.A)(t,e),(0,a.A)(t,[{key:"initializeFileUpload",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.fileSize,i=void 0===n?0:n,a=r.type,o=void 0===a?this.defaultTransferType:a,l=(0,Z.A)(r,el);if(!this.enabledTransferTypes.includes(o))throw new ol('Unsupported upload TransferType "'.concat(o,'".'),{file:t,transferType:o});var s=[{key:t,size:i,transfer:rl({type:o},l)}];return this.axiosWithConfig.post(e,s,{})}},{key:"uploadFile",value:function(e,t,r,n){return this.axiosWithConfig.put(e,t,{headers:this.apiHeaders["octet-stream"],onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);r&&r(t)},cancelToken:new $o.A.CancelToken(n)})}},{key:"finalizeFileUpload",value:function(e){return this.axiosWithConfig.post(e,{})}},{key:"importParentRecordFiles",value:function(e){var t="".concat(e.self,"/actions/files-import");return this.axiosWithConfig.post(t,{})}},{key:"deleteFile",value:function(e){return this.axiosWithConfig.delete(e.self)}},{key:"uploadPart",value:function(){var e=(0,ft.A)(ht().mark(function e(t){var r,n,i,a,o,l,s,c,u,d,p;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signature,n=r.url,i=r.expires,a=r.headers,o=r.method,l=void 0===o?"PUT":o,s=t.body,c=t.onProgress,u=t.signal,d=URL.parse(n),p=d.origin===window.location.origin?this.axiosWithConfig:$o.A,e.abrupt("return",p.request({url:n,method:l,timeout:1e3*i,data:s,headers:rl(rl({},this.apiHeaders["octet-stream"]),a),onUploadProgress:c,signal:u}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}])}(ul),pl=r(52230),fl=["isFileUploadInProgress"];function ml(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ml(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ml(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vl=function(){return!!e})()}var bl=function(e){function t(){var e,r,n,a;(0,i.A)(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,n=t,a=[].concat(c),n=(0,l.A)(n),e=(0,o.A)(r,vl()?Reflect.construct(n,a||[],(0,l.A)(r).constructor):n.apply(r,a)),(0,A.A)(e,"submitContext",void 0),(0,A.A)(e,"setSubmitContext",function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.submitContext={actionName:t,extra:r}}),(0,A.A)(e,"onFormSubmit",function(){var t=(0,ft.A)(ht().mark(function t(r,n){var i,a,o,l,s,c,u,d,p,f,m,h,v,b,y;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.props,a=i.saveAction,o=i.publishAction,l=i.submitReview,s=i.previewAction,c=i.deleteAction,u=i.reservePIDAction,d=i.discardPIDAction,p=e.submitContext,f=p.actionName,m=p.extra,h=void 0,v={},b=f,t.next=b===en?1:b===tn?2:b===rn?3:b===sn?4:b===nn?5:b===an?6:b===on?7:b===ln?8:9;break;case 1:return h=a,t.abrupt("continue",10);case 2:return h=o,t.abrupt("continue",10);case 3:return h=o,v.removeSelectedCommunity=!0,t.abrupt("continue",10);case 4:return h=l,v.reviewComment=m.reviewComment,v.directPublish=m.directPublish,t.abrupt("continue",10);case 5:return h=s,t.abrupt("continue",10);case 6:return h=c,v.isDiscardingVersion=m.isDiscardingVersion,t.abrupt("continue",10);case 7:return h=u,v.pidType=m.pidType,t.abrupt("continue",10);case 8:return h=d,v.pidType=m.pidType,t.abrupt("continue",10);case 9:throw Error("The submit btn must set the form action name.");case 10:return t.prev=10,t.next=11,h(r,v);case 11:t.next=13;break;case 12:t.prev=12,(y=t.catch(10))&&y.errors?n.setErrors(y.errors):ie();case 13:return t.prev=13,e.submitContext={},t.finish(13);case 14:case"end":return t.stop()}},t,null,[[10,12,13,14]])}));return function(e,r){return t.apply(this,arguments)}}()),e}return(0,s.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",function(t){if(e.props.fileUploadOngoing)return t.returnValue="",""}),window.addEventListener("unload",(0,ft.A)(ht().mark(function e(){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})))}},{key:"render",value:function(){var e=this.props,t=e.errors,r=e.record,n=e.children;return c.createElement(cn.Provider,{value:{setSubmitContext:this.setSubmitContext}},c.createElement(m.BaseForm,{onSubmit:this.onFormSubmit,formik:hl({enableReinitialize:!0,initialValues:r},t&&{initialErrors:t})},n))}}])}(c.Component);bl.propTypes={errors:p().object,record:p().object.isRequired,children:p().node,saveAction:p().func.isRequired,publishAction:p().func.isRequired,submitReview:p().func.isRequired,previewAction:p().func.isRequired,deleteAction:p().func.isRequired,reservePIDAction:p().func.isRequired,discardPIDAction:p().func.isRequired,fileUploadOngoing:p().bool},bl.defaultProps={errors:void 0,children:void 0,fileUploadOngoing:!1};var yl=(0,u.connect)(function(e){var t=e.files,r=t.isFileUploadInProgress,n=(0,Z.A)(t,fl);return{record:e.deposit.record,errors:e.deposit.errors,formState:e.deposit.formState,fileUploadOngoing:r,files:n}},function(e){return{publishAction:function(t,r){var n=r.removeSelectedCommunity;return e(function(e,t){var r=t.removeSelectedCommunity,n=void 0!==r&&r;return function(){var t=(0,ft.A)(ht().mark(function t(r,i,a){var o,l,s,c,u;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r({type:Pt}),!n){t.next=1;break}return t.next=1,r(sr(null));case 1:return t.next=2,or(e,a.service.drafts,{depositState:i().deposit,dispatchFn:r,failType:Ot,partialValidationActionType:Ct,showOnlyValidationErrorsWithSeverityError:!0});case 2:return o=t.sent,l=o.data,t.prev=3,t.next=4,a.service.drafts.publish(l.links);case 4:s=t.sent,c=s.data.links.self_html,window.location.replace(c),t.next=6;break;case 5:throw t.prev=5,u=t.catch(3),console.error("Error publishing draft",u,e),r({type:Ot,payload:{errors:u.errors}}),u;case 6:case"end":return t.stop()}},t,null,[[3,5]])}));return function(e,r,n){return t.apply(this,arguments)}}()}(t,{removeSelectedCommunity:void 0!==n&&n}))},submitReview:function(t,r){var n=r.reviewComment,i=r.directPublish;return e(function(e,t){var r=t.reviewComment,n=t.directPublish;return function(){var t=(0,ft.A)(ht().mark(function t(i,a,o){var l,s,c,u,d;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i({type:Ft,payload:{reviewComment:r},directPublish:n}),t.next=1,or(e,o.service.drafts,{depositState:a().deposit,dispatchFn:i,failType:xt,partialValidationActionType:Mt,showOnlyValidationErrorsWithSeverityError:!0});case 1:return l=t.sent,s=l.data,t.prev=2,t.next=3,o.service.drafts.submitReview(s.links,r);case 3:c=t.sent,u=c.data.links.next_html,window.location.replace(u),t.next=5;break;case 4:throw t.prev=4,d=t.catch(2),console.error("Error submitting review",d,e),i({type:xt,payload:{errors:d.errors}}),d;case 5:case"end":return t.stop()}},t,null,[[2,4]])}));return function(e,r,n){return t.apply(this,arguments)}}()}(t,{reviewComment:n,directPublish:i}))},saveAction:function(t){return e((r=t,function(){var e=(0,ft.A)(ht().mark(function e(t,n,i){var a;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Et}),e.next=1,or(r,i.service.drafts,{depositState:n().deposit,dispatchFn:t,failType:Rt,partialValidationActionType:gt,showOnlyValidationErrorsWithSeverityError:!1});case 1:a=e.sent,t({type:wt,payload:{data:a.data}});case 2:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()));var r},previewAction:function(t){return e((r=t,function(){var e=(0,ft.A)(ht().mark(function e(t,n,i){var a,o;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:St}),e.next=1,or(r,i.service.drafts,{depositState:n().deposit,dispatchFn:t,failType:kt,partialValidationActionType:gt,showOnlyValidationErrorsWithSeverityError:!0});case 1:a=e.sent,o=a.data.links.record_html,window.location="".concat(o,"?preview=1");case 2:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()));var r},deleteAction:function(t,r){r.isDiscardingVersion;return e(function(){var e=(0,ft.A)(ht().mark(function e(t,r,n){var i,a,o;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Dt}),e.prev=1,i=r().deposit.record,e.next=2,n.service.drafts.delete(i.links);case 2:a=n.config.dashboard_routes.uploads,window.location.replace(a),e.next=4;break;case 3:throw e.prev=3,o=e.catch(1),console.error("Error deleting draft",o),t({type:It,payload:{errors:o.errors}}),o;case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(t,r,n){return e.apply(this,arguments)}}())},reservePIDAction:function(t,r){var n=r.pidType;return e(function(e,t){var r=t.pidType;return function(){var t=(0,ft.A)(ht().mark(function t(n,i,a){var o,l,s;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:jt,payload:{pidType:r}}),t.prev=1,t.next=2,ir(e,a.service.drafts);case 2:return o=t.sent,l=o.data,t.next=3,a.service.drafts.reservePID(l.links,r);case 3:o=t.sent,n({type:Tt,payload:{data:o.data}}),t.next=5;break;case 4:throw t.prev=4,s=t.catch(1),console.error("Error reserving PID",s,e),n({type:_t,payload:{errors:s.errors}}),s;case 5:case"end":return t.stop()}},t,null,[[1,4]])}));return function(e,r,n){return t.apply(this,arguments)}}()}(t,{pidType:n}))},discardPIDAction:function(t,r){var n=r.pidType;return e(function(e,t){var r=t.pidType;return function(){var t=(0,ft.A)(ht().mark(function t(n,i,a){var o,l,s;return ht().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:zt,payload:{pidType:r}}),t.prev=1,t.next=2,ir(e,a.service.drafts);case 2:return o=t.sent,l=o.data,t.next=3,a.service.drafts.discardPID(l.links,r);case 3:o=t.sent,n({type:qt,payload:{data:o.data}}),t.next=5;break;case 4:throw t.prev=4,s=t.catch(1),console.error("Error discarding PID",s,e),n({type:Lt,payload:{errors:s.errors}}),s;case 5:case"end":return t.stop()}},t,null,[[1,4]])}));return function(e,r,n){return t.apply(this,arguments)}}()}(t,{pidType:n}))}}})(bl);function gl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gl=function(){return!!e})()}var Al=function(){return(0,a.A)(function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")},[{key:"read",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(),El=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,a=(0,l.A)(a),(r=(0,o.A)(n,gl()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s))).apiClient=e,r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"_draftAlreadyCreated",value:function(e){return!!e.id}},{key:"create",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.createDraft(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.readDraft(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._draftAlreadyCreated(t)?this.apiClient.saveDraft(t,t.links):this.create(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.publishDraft(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.deleteDraft(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reservePID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.reservePID(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"discardPID",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.discardPID(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"createOrUpdateReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.createOrUpdateReview(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.deleteReview(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitReview",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiClient.submitReview(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}])}(Al);function wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Pl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pl=function(){return!!e})()}var Ol=function(){return(0,a.A)(function e(){(0,i.A)(this,e),(0,A.A)(this,"currents",[]),(0,A.A)(this,"pending",[])},[{key:"put",value:function(e,t){this.pending.push({initializeUploadURL:e,file:t})}},{key:"totalInProgress",get:function(){return this.currents.length}},{key:"next",get:function(){var e=this.pending.shift();return void 0!==e&&this.currents.push(e.file),e}},{key:"markCompleted",value:function(e){var t=this.currents.indexOf(e);t>=0&&this.currents.splice(t,1)}}])}(),Cl=function(){return(0,a.A)(function e(t){(0,i.A)(this,e),this.dispatcher=t},[{key:"onUploadAdded",value:function(e){throw new Error("Not implemented.")}},{key:"onUploadStarted",value:function(e,t){throw new Error("Not implemented.")}},{key:"onUploadProgress",value:function(e,t){throw new Error("Not implemented.")}},{key:"onUploadCompleted",value:function(e,t,r,n){throw new Error("Not implemented.")}},{key:"onUploadCancelled",value:function(e){throw new Error("Not implemented.")}},{key:"onUploadFailed",value:function(e){throw new Error("Not implemented.")}}])}(),Sl=function(){return(0,a.A)(function e(t,r){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")},[{key:"setProgressNotifier",value:function(e){if(!(e instanceof Cl))throw new Error("Progress notifier must be an instance of `UploadProgressNotifier`");this.progressNotifier=e}},{key:"initializeUpload",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r,n){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"uploadPart",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"finalizeUpload",value:function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"importParentRecordFiles",value:function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented.");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(),kl=function(e){function t(e,r){var n,a,s,c;return(0,i.A)(this,t),a=this,s=t,s=(0,l.A)(s),n=(0,o.A)(a,Pl()?Reflect.construct(s,c||[],(0,l.A)(a).constructor):s.apply(a,c)),(0,A.A)(n,"_initializeUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){var i,a;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.initializeFileUpload(t,r.name,r.transferOptions);case 1:return i=e.sent,a=i.data.entries.filter(function(e){return e.key.normalize()===r.name.normalize()})[0],e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"_doUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.uploadFile(t,r,function(e){return n.progressNotifier.onUploadProgress(r.name,e)},function(e){return n.progressNotifier.onUploadStarted(r.name,e)});case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"_finalizeUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){var i;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.uploaderQueue.markCompleted(r),n._startNextUpload(),e.next=1,n.fileApiClient.finalizeFileUpload(t);case 1:return i=e.sent,e.abrupt("return",i.data);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"_onError",function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?n.progressNotifier.onUploadCancelled(e.name):n.progressNotifier.onUploadFailed(e.name),n.uploaderQueue.markCompleted(e),n._startNextUpload()}),(0,A.A)(n,"_startNewUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){var i,a,o,l,s,c;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,n._initializeUpload(t,r);case 1:i=e.sent,e.next=3;break;case 2:return e.prev=2,e.catch(0),n._onError(r),e.abrupt("return");case 3:return a=i.links.content,o=i.links.commit,e.prev=4,e.next=5,n._doUpload(a,r);case 5:return e.next=6,n._finalizeUpload(o,r);case 6:l=e.sent,n.progressNotifier.onUploadCompleted(l.key,l.size,l.checksum,l.links),e.next=8;break;case 7:e.prev=7,c=e.catch(4),console.error(c),s=n.fileApiClient.isCancelled(c),n._onError(r,s);case 8:case"end":return e.stop()}},e,null,[[0,2],[4,7]])}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"_startNextUpload",(0,ft.A)(ht().mark(function e(){var t;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.uploaderQueue.totalInProgress<n.maxConcurrentUploads)){e.next=1;break}if(!(t=n.uploaderQueue.next)){e.next=1;break}return e.next=1,n._startNewUpload(t.initializeUploadURL,t.file);case 1:case"end":return e.stop()}},e)}))),(0,A.A)(n,"initializeUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){var i;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n._initializeUpload(t,r);case 1:return i=e.sent,n.progressNotifier.onUploadStarted(r.name,r.transferOptions.cancelFn),e.abrupt("return",i);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"upload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.uploaderQueue.put(t,r),n.progressNotifier.onUploadAdded(r.name),e.next=1,n._startNextUpload();case 1:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"delete",function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.deleteFile(t);case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),(0,A.A)(n,"uploadPart",function(){var e=(0,ft.A)(ht().mark(function e(t){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.uploadPart(t);case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),(0,A.A)(n,"finalizeUpload",function(){var e=(0,ft.A)(ht().mark(function e(t,r){return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.finalizeFileUpload(t);case 1:return e.abrupt("return",e.sent.data);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),(0,A.A)(n,"importParentRecordFiles",function(){var e=(0,ft.A)(ht().mark(function e(t){var r;return ht().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.fileApiClient.importParentRecordFiles(t);case 1:return r=e.sent,e.abrupt("return",r.data.entries.reduce(function(e,t){return Rl(Rl({},e),{},(0,A.A)({},t.key,{status:gr.completed,size:t.size,name:t.key,progressPercentage:100,checksum:t.checksum,links:t.links}))},{}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.fileApiClient=e,n.maxConcurrentUploads=r||3,n.uploaderQueue=new Ol,n}return(0,s.A)(t,e),(0,a.A)(t)}(Sl),Dl=r(88055),Il=r.n(Dl),Fl=r(84684),xl=r.n(Fl),Ml=r(56449),jl=r.n(Ml),Tl=r(53812),_l=r.n(Tl),zl=r(5187),ql=r.n(zl),Ll=r(98023),Nl=r.n(Ll),Bl=r(23805),Ul=r.n(Bl),Vl=r(73916),Hl=r.n(Vl),Wl=r(44383),Yl=r.n(Wl),Gl=r(71086),Ql=r.n(Gl),Kl=r(63560),Xl=r.n(Kl),Zl=r(8306),Jl=r(80357);function $l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return es(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?es(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ns(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ns=function(){return!!e})()}var is=function(){return(0,a.A)(function e(t){if((0,i.A)(this,e),this.constructor===e)throw new Error("Abstract")},[{key:"deserialize",value:function(e){throw new Error("Not implemented.")}},{key:"deserializeErrors",value:function(e){throw new Error("Not implemented.")}},{key:"serialize",value:function(e){throw new Error("Not implemented.")}}])}(),as=function(e){function t(e){var r,n,a,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,i.A)(this,t),n=this,a=t,a=(0,l.A)(a),(r=(0,o.A)(n,ns()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s))).defaultLocale=e,r.customFieldVocabularies=c,r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"depositRecordSchema",get:function(){return{files:new Zl.D0({fieldpath:"files"}),media_files:new Zl.D0({fieldpath:"media_files"}),links:new Zl.D0({fieldpath:"links"}),expanded:new Zl.D0({fieldpath:"expanded",deserializedDefault:{}}),pids:new Zl.D0({fieldpath:"pids",deserializedDefault:{},serializedDefault:{}}),title:new Zl.D0({fieldpath:"metadata.title",deserializedDefault:""}),additional_titles:new Zl.yv({fieldpath:"metadata.additional_titles",schema:{title:new Zl.D0({fieldpath:"title"}),type:new Zl.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),lang:new Zl.vE({fieldpath:"lang",deserializedDefault:"",serializedDefault:""})}}),additional_descriptions:new Zl.yv({fieldpath:"metadata.additional_descriptions",schema:{description:new Zl.D0({fieldpath:"description"}),type:new Zl.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),lang:new Zl.vE({fieldpath:"lang",deserializedDefault:"",serializedDefault:""})}}),creators:new Zl.yv({fieldpath:"metadata.creators",schema:{person_or_org:new Zl.D0({fieldpath:"person_or_org"}),role:new Zl.vE({fieldpath:"role",deserializedDefault:"",serializedDefault:""}),affiliations:new Zl.TV({fieldpath:"affiliations",deserializedDefault:[],serializedDefault:[],labelField:"name"})}}),contributors:new Zl.yv({fieldpath:"metadata.contributors",schema:{person_or_org:new Zl.D0({fieldpath:"person_or_org"}),role:new Zl.vE({fieldpath:"role",deserializedDefault:"",serializedDefault:""}),affiliations:new Zl.TV({fieldpath:"affiliations",deserializedDefault:[],serializedDefault:[],labelField:"name"})}}),resource_type:new Zl.vE({fieldpath:"metadata.resource_type",deserializedDefault:"",serializedDefault:""}),access:new Zl.D0({fieldpath:"access",deserializedDefault:{record:"public",files:"public"}}),publication_date:new Zl.D0({fieldpath:"metadata.publication_date",deserializedDefault:""}),dates:new Zl.yv({fieldpath:"metadata.dates",schema:{date:new Zl.D0({fieldpath:"date"}),type:new Zl.vE({fieldpath:"type",deserializedDefault:"",serializedDefault:""}),description:new Zl.D0({fieldpath:"description"})},deserializedDefault:[]}),languages:new Zl.vE({fieldpath:"metadata.languages",deserializedDefault:[],serializedDefault:[]}),identifiers:new Zl.yv({fieldpath:"metadata.identifiers",schema:{scheme:new Zl.D0({fieldpath:"scheme"}),identifier:new Zl.D0({fieldpath:"identifier"})},deserializedDefault:[]}),related_identifiers:new Zl.yv({fieldpath:"metadata.related_identifiers",schema:{scheme:new Zl.D0({fieldpath:"scheme"}),identifier:new Zl.D0({fieldpath:"identifier"}),relation_type:new Zl.vE({fieldpath:"relation_type",deserializedDefault:"",serializedDefault:""}),resource_type:new Zl.vE({fieldpath:"resource_type",deserializedDefault:"",serializedDefault:""})},deserializedDefault:[]}),references:new Zl.yv({fieldpath:"metadata.references",schema:{reference:new Zl.D0({fieldpath:"reference"})},deserializedDefault:[]}),subjects:new Zl.TV({fieldpath:"metadata.subjects",deserializedDefault:[],serializedDefault:[],labelField:"subject"}),funding:new Zl.yv({fieldpath:"metadata.funding",schema:{award:new Zl.qB({fieldpath:"award",deserializedDefault:{}}),funder:new Zl.qB({fieldpath:"funder",deserializedDefault:{}})}}),version:new Zl.D0({fieldpath:"metadata.version",deserializedDefault:""}),rights:new Zl.MQ({fieldpath:"metadata.rights",deserializedDefault:[],serializedDefault:[],localeFields:["title","description"]}),custom_fields:new Jl.CustomField({fieldpath:"custom_fields",deserializedDefault:{},serializedDefault:{},vocabularyFields:this.customFieldVocabularies})}}},{key:"_removeEmptyValues",value:function(e){var t=this;if(jl()(e))return e.map(function(e){return t._removeEmptyValues(e)}).filter(function(e){return _l()(e)||Nl()(e)?e:!M()(e)});if(Ul()(e)){var r=Hl()(e,function(e){return t._removeEmptyValues(e)});return Ql()(r,function(e){return jl()(e)||Ul()(e)?!M()(e):!ql()(e)})}return Nl()(e)||_l()(e)||e?e:null}},{key:"deserialize",value:function(e){var t=Yl()(Il()(e),["access","expanded","metadata","id","links","files","media_files","is_published","versions","parent","status","pids","ui","custom_fields","created","updated","revision_id"]),r=t.pids||{},n=this._removeEmptyValues(t);for(var i in n=rs(rs({},n),M()(r)?{}:{pids:r}),this.depositRecordSchema)n=this.depositRecordSchema[i].deserialize(n,this.defaultLocale);return n}},{key:"deserializeErrors",value:function(e){var t,r={},n=$l(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;"severity"in i&&"severity"in i?Xl()(r,i.field,{message:i.messages.join(" "),severity:i.severity,description:i.description}):Xl()(r,i.field,i.messages.join(" "))}}catch(a){n.e(a)}finally{n.f()}return r}},{key:"serialize",value:function(e){var t=Yl()(Il()(e),["access","metadata","id","links","files","media_files","pids","parent","custom_fields"]),r=t.pids||{},n=t;for(var i in this.depositRecordSchema)n=this.depositRecordSchema[i].serialize(n,this.defaultLocale);return n=rs(rs({},n=this._removeEmptyValues(n)),{pids:M()(r)?{}:r}),xl()(n,{metadata:{},custom_fields:{}}),n}}])}(is),os=function(){return(0,a.A)(function e(t,r){(0,i.A)(this,e),this.draftsService=t,this.filesService=r},[{key:"drafts",get:function(){return this.draftsService}},{key:"files",get:function(){return this.filesService}}])}(),ls=r(68238),ss=r(1265);const cs=(0,ls.combineReducers)({deposit:wn,files:Er});var us=["record","errors","preselectedCommunity","files","config","permissions"];function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var fs=function(e){var t=Il()(e);return{links:e.links||{},entries:me()(t,"entries",[]).map(function(e){var t={file_id:e.file_id,name:e.key,size:e.size||0,checksum:e.checksum||"",links:e.links||{},mimetype:e.mimetype||"application/octet-stream",status:gr[e.status]};return ps({progressPercentage:t.status===gr.completed?100:0},t)}).reduce(function(e,t){return e[t.name]=ps({},t),e},{})}};function ms(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ms=function(){return!!e})()}var hs=function(e){function t(){return(0,i.A)(this,t),e=this,r=t,n=arguments,r=(0,l.A)(r),(0,o.A)(e,ms()?Reflect.construct(r,n||[],(0,l.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,s.A)(t,e),(0,a.A)(t,[{key:"onUploadAdded",value:function(e){this.dispatcher&&this.dispatcher({type:Bt,payload:{filename:e}})}},{key:"onUploadStarted",value:function(e,t){this.dispatcher&&this.dispatcher({type:Zt,payload:{filename:e,cancelUploadFn:t}})}},{key:"onUploadProgress",value:function(e,t){this.dispatcher&&this.dispatcher({type:Ut,payload:{filename:e,percent:t}})}},{key:"onUploadCompleted",value:function(e,t,r,n){this.dispatcher&&this.dispatcher({type:Vt,payload:{filename:e,size:t,checksum:r,links:n}})}},{key:"onUploadCancelled",value:function(e){this.dispatcher&&this.dispatcher({type:Jt,payload:{filename:e}})}},{key:"onUploadFailed",value:function(e){this.dispatcher&&this.dispatcher({type:Ht,payload:{filename:e}})}}])}(Cl);function vs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vs=function(){return!!e})()}var bs=function(e){function t(e){var r,n,a,s;(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),r=(0,o.A)(n,vs()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s));var c=e.recordSerializer?e.recordSerializer:new as(e.config.default_locale,e.config.custom_fields.vocabularies),u={headers:e.config.apiHeaders?e.config.apiHeaders:null},d=e.apiClient?e.apiClient:new cl(u,e.config.createUrl,c),p=e.fileApiClient?e.fileApiClient:new dl(u,e.config.default_transfer_type,e.config.enabled_transfer_types),f=e.draftsService?e.draftsService:new El(d),m=e.filesService?e.filesService:new kl(p,e.config.fileUploadConcurrency),h=new os(f,m),v={config:e.config,record:c.deserialize(e.record),preselectedCommunity:e.preselectedCommunity,files:e.files,apiClient:d,fileApiClient:p,service:h,permissions:e.permissions,recordSerializer:c};e.errors&&e.errors.length>0&&(v.errors=c.deserializeErrors(e.errors)),r.store=function(e){var t=e.record,r=e.errors,n=e.preselectedCommunity,i=e.files,a=e.config,o=e.permissions,l=(0,Z.A)(e,us),s={deposit:{record:t,errors:r||{},editorState:En(t,n||void 0),config:a,permissions:o,actionState:r?At:null,actionStateExtra:{}},files:fs(i||{})},c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ls.compose;return(0,ls.createStore)(cs,s,c((0,ls.applyMiddleware)(ss.default.withExtraArgument(ps({config:a},l)))))}(v);var b=new hs(r.store.dispatch);return m.setProgressNotifier(b),r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e=this.props.children;return c.createElement(u.Provider,{store:this.store},c.createElement(pl.x,{i18n:g.M},c.createElement(yl,null,e)))}}])}(c.Component);bs.propTypes={config:p().object.isRequired,record:p().object.isRequired,errors:p().arrayOf(p().shape({field:p().string.isRequired,messages:p().arrayOf(p().string).isRequired,description:p().string,severity:p().string})),preselectedCommunity:p().object,files:p().object,permissions:p().object,apiClient:p().instanceOf(sl),fileApiClient:p().instanceOf(ul),draftsService:p().instanceOf(Al),filesService:p().instanceOf(Sl),recordSerializer:p().instanceOf(is),children:p().node},bs.defaultProps={preselectedCommunity:void 0,permissions:void 0,apiClient:void 0,errors:void 0,fileApiClient:void 0,draftsService:void 0,filesService:void 0,recordSerializer:void 0,files:void 0,children:void 0};var ys=(0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)((0,A.A)({},gn.IN_REVIEW,{color:"warning",title:g.M.t("In review"),message:g.M.t("Community curators will review your upload. Once accepted, it will be published.")}),gn.DECLINED,{color:"negative",title:g.M.t("Declined"),message:g.M.t("The request to submit this upload to the community was declined.")}),gn.EXPIRED,{color:"expired",title:g.M.t("Expired"),message:g.M.t("The request to submit this upload to the community has expired.")}),gn.PUBLISHED,{color:"positive",title:g.M.t("Published"),message:g.M.t("Your upload is published.")}),gn.DRAFT_WITH_REVIEW,{color:"neutral",title:g.M.t("Draft"),message:g.M.t("Once your upload is complete, you can submit it for review to the community curators.")}),gn.DRAFT,{color:"neutral",title:g.M.t("Draft"),message:g.M.t("Once your upload is complete, you can publish or submit it for review to the community curators.")}),gn.NEW_VERSION_DRAFT,{color:"neutral",title:g.M.t("New version draft"),message:g.M.t("Once your upload is complete, you can publish it.")}),gs=function(e){var t=e.depositReview,r=e.depositStatus,n=ys[r];if(!n)throw new Error("Status is undefined");var i=r===gn.IN_REVIEW;return c.createElement(K.A,{verticalAlign:"middle"},c.createElement(K.A.Row,{centered:!0,className:"pt-5 pb-5 ".concat(n.color)},c.createElement(K.A.Column,{width:i?8:16,textAlign:i?"left":"center"},c.createElement("span",null,n.title),c.createElement(E.A,{trigger:c.createElement(w.A,{className:"ml-10",name:"info circle"}),content:n.message})),i&&c.createElement(K.A.Column,{width:8,textAlign:"right"},c.createElement(R.A,{href:"/me/requests/".concat(t.id),target:"_blank",icon:"external alternate",content:g.M.t("View request"),size:"mini",className:"transparent",title:g.M.t("Opens in new tab")}))))};gs.propTypes={depositReview:p().bool,depositStatus:p().string.isRequired},gs.defaultProps={depositReview:void 0};var As=(0,u.connect)(function(e){return{depositStatus:e.deposit.record.status,depositReview:e.deposit.record.status!==gn.DRAFT&&e.deposit.record.parent.review}},null)(gs);function Es(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Es=function(){return!!e})()}var ws=function(e){function t(e){var r,n,a,s;return(0,i.A)(this,t),n=this,a=t,s=[e],a=(0,l.A)(a),(r=(0,o.A)(n,Es()?Reflect.construct(a,s||[],(0,l.A)(n).constructor):a.apply(n,s))).state={modalOpen:!1},r}return(0,s.A)(t,e),(0,a.A)(t,[{key:"render",value:function(){var e,t=this,r=this.props,n=r.changeSelectedCommunity,i=r.community,a=r.imagePlaceholderLink,o=r.showCommunitySelectionButton,l=r.disableCommunitySelectionButton,s=r.userCanManageRecord,u=r.record,d=r.showCommunityHeader,p=this.state.modalOpen,f=!!u.id&&!s||l;return d&&c.createElement(zn.A,{className:"page-subheader-outer compact ml-0-mobile mr-0-mobile",fluid:!0},c.createElement(zn.A,{className:"page-subheader"},i?c.createElement(c.Fragment,null,c.createElement("div",{className:"page-subheader-element"},c.createElement(m.Image,{rounded:!0,className:"community-header-logo",src:(null===(e=i.links)||void 0===e?void 0:e.logo)||a,fallbackSrc:a})),c.createElement("div",{className:"page-subheader-element flex align-items-center"},i.metadata.title)):c.createElement("div",{className:"page-subheader-element"},g.M.t("Select the community where you want to submit your record.")),c.createElement("div",{className:"community-header-element flex align-items-center rel-ml-1"},o&&c.createElement(k.default,{id:"InvenioRdmRecords.CommunityHeader.CommunityHeaderElement.Container"},c.createElement(c.Fragment,null,c.createElement(yo,{onCommunityChange:function(e){n(e),t.setState({modalOpen:!1})},onModalChange:function(e){return t.setState({modalOpen:e})},modalOpen:p,chosenCommunity:i,displaySelected:!0,record:u,trigger:c.createElement(k.default,{id:"InvenioRdmRecords.CommunityHeader.CommunitySelectionButton.Container"},c.createElement(R.A,{className:"community-header-button",disabled:f,onClick:function(){return t.setState({modalOpen:!0})},primary:!0,size:"mini",name:"setting",type:"button",content:i?g.M.t("Change"):g.M.t("Select a community")}))}),c.createElement(k.default,{id:"InvenioRdmRecords.CommunityHeader.RemoveCommunityButton.Container",community:i},i&&c.createElement(R.A,{basic:!0,size:"mini",labelPosition:"left",className:"community-header-button ml-5",onClick:function(){return n(null)},content:g.M.t("Remove"),icon:"close",disabled:f})))))))}}])}(c.Component);ws.propTypes={imagePlaceholderLink:p().string.isRequired,community:p().object,disableCommunitySelectionButton:p().bool.isRequired,showCommunitySelectionButton:p().bool.isRequired,showCommunityHeader:p().bool.isRequired,changeSelectedCommunity:p().func.isRequired,record:p().object.isRequired,userCanManageRecord:p().bool.isRequired},ws.defaultProps={community:void 0};var Rs=(0,u.connect)(function(e){return{community:e.deposit.editorState.selectedCommunity,disableCommunitySelectionButton:e.deposit.editorState.ui.disableCommunitySelectionButton,showCommunitySelectionButton:e.deposit.editorState.ui.showCommunitySelectionButton,showCommunityHeader:e.deposit.editorState.ui.showCommunityHeader,userCanManageRecord:e.deposit.permissions.can_manage}},function(e){return{changeSelectedCommunity:function(t){return e(sr(t))}}})(ws);var Ps=function(e){var t=document.getElementsByName(e);return t.length>0&&t[0].hasAttribute("value")?JSON.parse(t[0].value):null}},80357:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CustomField:()=>O,Imprint:()=>T,Journal:()=>q,Meeting:()=>B,Thesis:()=>H});var n=r(80296),i=r(82284),a=r(23029),o=r(92901),l=r(56822),s=r(53954),c=r(85501),u=r(58156),d=r.n(u),p=r(63560),f=r.n(p),m=r(88055),h=r.n(m),v=r(56449),b=r.n(v),y=r(23805),g=r.n(y),A=r(8306);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function w(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function R(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var P=new WeakSet,O=function(e){function t(e){var r,n,i,o,c=e.fieldpath,u=e.deserializedDefault,d=void 0===u?null:u,p=e.serializedDefault,f=void 0===p?null:p,m=e.allowEmpty,h=void 0!==m&&m,v=e.vocabularyFields,b=void 0===v?[]:v;return(0,a.A)(this,t),n=this,i=t,o=[{fieldpath:c,deserializedDefault:d,serializedDefault:f,allowEmpty:h}],i=(0,s.A)(i),w(r=(0,l.A)(n,E()?Reflect.construct(i,o||[],(0,s.A)(n).constructor):i.apply(n,o)),P),r.vocabularyFields=b,r}return(0,c.A)(t,e),(0,o.A)(t,[{key:"recursiveMapping",value:function(e,t,r){var n=null;if(b()(e))n=e.map(function(e,n){return r(e,n,t)});else if(g()(e)&&!t){for(var i in e)e[i]=this.recursiveMapping(e[i],t,r);n=e}else n=r(e,null,t);return n}},{key:"deserialize",value:function(e){var t=h()(e),r=d()(e,this.fieldpath,this.deserializedDefault);return R(P,this,C).call(this,t,r,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&null!==e&&void 0!==e&&e.id?e.id:(t&&"object"===(0,i.A)(e)&&null!==e&&(e.__key=t),e)}),t}},{key:"serialize",value:function(e){var t=h()(e),r=d()(e,this.fieldpath,this.serializedDefault);return R(P,this,C).call(this,t,r,function(e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&"string"===typeof e?{id:e}:(delete e.__key,e)}),t}}])}(A.D0);function C(e,t,r){if(null!==t)for(var i=0,a=Object.entries(t);i<a.length;i++){var o=(0,n.A)(a[i],2),l=o[0],s=o[1],c=this.vocabularyFields.includes(l),u=this.recursiveMapping(s,c,r);e=f()(e,"custom_fields.".concat(l),u)}}var S=r(96540),k=r(81057),D=r(36713),I=r(1489),F=r(5556),x=r.n(F);function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M=function(){return!!e})()}var j=function(e){function t(){return(0,a.A)(this,t),e=this,r=t,n=arguments,r=(0,s.A)(r),(0,l.A)(e,M()?Reflect.construct(r,n||[],(0,s.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.title,n=e.place,i=e.isbn,a=e.pages,o=e.edition,l=e.label,s=e.labelIcon;return S.createElement(S.Fragment,null,l&&S.createElement(S.Fragment,null,S.createElement(k.FieldLabel,{htmlFor:t,icon:s,label:l}),S.createElement(D.A,{fitted:!0})),S.createElement(I.A,{padded:!0},S.createElement(I.A.Column,{width:"12"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".title"),label:r.label,placeholder:r.placeholder,helpText:r.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".isbn"),label:i.label,placeholder:i.placeholder,helpText:i.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".place"),label:n.label,placeholder:n.placeholder,helpText:n.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".pages"),label:a.label,placeholder:a.placeholder,helpText:a.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".edition"),label:o.label,placeholder:o.placeholder,helpText:o.description}))))}}])}(S.Component);j.propTypes={fieldPath:x().string.isRequired,title:x().object.isRequired,place:x().object.isRequired,isbn:x().object.isRequired,pages:x().object.isRequired,edition:x().object.isRequired,labelIcon:x().string,label:x().string},j.defaultProps={labelIcon:void 0,label:void 0};var T=(0,k.showHideOverridableWithDynamicId)(j);function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}var z=function(e){function t(){return(0,a.A)(this,t),e=this,r=t,n=arguments,r=(0,s.A)(r),(0,l.A)(e,_()?Reflect.construct(r,n||[],(0,s.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.title,n=e.volume,i=e.issue,a=e.pages,o=e.issn,l=e.labelIcon,s=e.label;return S.createElement(S.Fragment,null,s&&S.createElement(S.Fragment,null,S.createElement(k.FieldLabel,{htmlFor:t,icon:l,label:s}),S.createElement(D.A,{fitted:!0})),S.createElement(I.A,{padded:!0},S.createElement(I.A.Column,{width:"12"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".title"),label:r.label,placeholder:r.placeholder,helpText:r.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".issn"),label:o.label,placeholder:o.placeholder,helpText:o.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".volume"),label:n.label,placeholder:n.placeholder,helpText:n.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".issue"),label:i.label,placeholder:i.placeholder,helpText:i.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".pages"),label:a.label,placeholder:a.placeholder,helpText:a.description}))))}}])}(S.Component);z.propTypes={fieldPath:x().string.isRequired,title:x().object.isRequired,volume:x().object.isRequired,issue:x().object.isRequired,pages:x().object.isRequired,issn:x().object.isRequired,labelIcon:x().string,label:x().string},z.defaultProps={labelIcon:void 0,label:void 0};var q=(0,k.showHideOverridableWithDynamicId)(z);function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(L=function(){return!!e})()}var N=function(e){function t(){return(0,a.A)(this,t),e=this,r=t,n=arguments,r=(0,s.A)(r),(0,l.A)(e,L()?Reflect.construct(r,n||[],(0,s.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.title,n=e.acronym,i=e.dates,a=e.place,o=e.url,l=e.session,s=e.session_part,c=e.labelIcon,u=e.label;return S.createElement(S.Fragment,null,u&&S.createElement(S.Fragment,null,S.createElement(k.FieldLabel,{htmlFor:t,icon:c,label:u}),S.createElement(D.A,{fitted:!0})),S.createElement(I.A,{padded:!0},S.createElement(I.A.Column,{width:"12"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".title"),label:r.label,placeholder:r.placeholder,helpText:r.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".acronym"),label:n.label,placeholder:n.placeholder,helpText:n.description})),S.createElement(I.A.Column,{width:"12"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".place"),label:a.label,placeholder:a.placeholder,helpText:a.description})),S.createElement(I.A.Column,{width:"4"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".dates"),label:i.label,placeholder:i.placeholder,helpText:i.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".session"),label:l.label,placeholder:l.placeholder,helpText:l.description})),S.createElement(I.A.Column,{width:"6"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".session_part"),label:s.label,placeholder:s.placeholder,helpText:s.description})),o&&S.createElement(I.A.Column,{width:"12"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".url"),label:o.label,placeholder:o.placeholder,helpText:o.description}))))}}])}(S.Component);N.propTypes={fieldPath:x().string.isRequired,title:x().object.isRequired,acronym:x().object.isRequired,session_part:x().object.isRequired,session:x().object.isRequired,dates:x().object.isRequired,place:x().object.isRequired,labelIcon:x().string,label:x().string,url:x().object.isRequired},N.defaultProps={labelIcon:void 0,label:void 0};var B=(0,k.showHideOverridableWithDynamicId)(N);function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(U=function(){return!!e})()}var V=function(e){function t(){return(0,a.A)(this,t),e=this,r=t,n=arguments,r=(0,s.A)(r),(0,l.A)(e,U()?Reflect.construct(r,n||[],(0,s.A)(e).constructor):r.apply(e,n));var e,r,n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this.props,t=e.fieldPath,r=e.university,n=e.department,i=e.type,a=e.date_submitted,o=e.date_defended,l=e.labelIcon,s=e.label,c=n&&i?6:16;return S.createElement(S.Fragment,null,s&&S.createElement(S.Fragment,null,S.createElement(k.FieldLabel,{htmlFor:t,icon:l,label:s}),S.createElement(D.A,{fitted:!0})),S.createElement(I.A,{padded:!0},r&&S.createElement(I.A.Column,{width:c},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".university"),label:r.label,placeholder:r.placeholder,helpText:r.description})),n&&S.createElement(I.A.Column,{width:6},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".department"),label:n.label,placeholder:n.placeholder,helpText:n.description})),i&&S.createElement(I.A.Column,{width:4},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".type"),label:i.label,placeholder:i.placeholder,helpText:i.description})),S.createElement(I.A.Column,{width:"8"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".date_submitted"),label:a.label,placeholder:a.placeholder,helpText:a.description})),S.createElement(I.A.Column,{width:"8"},S.createElement(k.InputComponent,{fieldPath:"".concat(t,".date_defended"),label:o.label,placeholder:o.placeholder,helpText:o.description}))))}}])}(S.Component);V.propTypes={fieldPath:x().string.isRequired,university:x().object.isRequired,department:x().object.isRequired,type:x().object.isRequired,date_submitted:x().object.isRequired,date_defended:x().object.isRequired,labelIcon:x().string,label:x().string},V.defaultProps={labelIcon:void 0,label:void 0};var H=(0,k.showHideOverridableWithDynamicId)(V)},91496:(e,t,r)=>{var n={"./ar_SA.js":[10154,154],"./bg_BG.js":[39825,9825],"./ca_ES.js":[80587,587],"./cs_CZ.js":[44828,4828],"./da_DK.js":[59799,9799],"./de_DE.js":[31785,1785],"./el_GR.js":[57365,7365],"./en_US.js":[54986,4986],"./es_ES.js":[47563,7563],"./es_MX.js":[56286,6286],"./fa_IR.js":[9659,9659],"./fi_FI.js":[66242,3861],"./fr_FR.js":[55043,5043],"./gl_ES.js":[41062,1062],"./he_IL.js":[29943,9943],"./hi_IN.js":[64821,4821],"./hr_HR.js":[20119,119],"./hu_HU.js":[27633,7633],"./id_ID.js":[20341,341],"./is_IS.js":[1211,1211],"./it_IT.js":[27189,9570],"./ja_JP.js":[63078,3078],"./ko_KR.js":[60256,256],"./nb_NO.js":[42536,2536],"./nl_NL.js":[55611,5611],"./pl_PL.js":[2967,2967],"./pt_BR.js":[26855,6855],"./pt_PT.js":[92759,2759],"./ro_RO.js":[21745,1745],"./ru_RU.js":[73173,3173],"./sk_SK.js":[32363,2363],"./sr_RS_Cyrillic.js":[93099,3099],"./sr_RS_Latin.js":[63334,3334],"./sv_SE.js":[27004,7004],"./th_TH.js":[28279,8279],"./tr_TR.js":[63511,3511],"./uk_UA.js":[61349,1349],"./uz_UZ.js":[44213,4213],"./vi_VN.js":[78080,8080],"./zh_CN.js":[3936,3936],"./zh_TW.js":[59976,9976]};function i(e){if(!r.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],i=t[0];return r.e(t[1]).then(()=>r(i))}i.keys=()=>Object.keys(n),i.id=91496,e.exports=i}}]);
//# sourceMappingURL=7114.7582e9c635706abf2d61.js.map